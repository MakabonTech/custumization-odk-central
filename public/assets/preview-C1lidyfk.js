import{J as x,u as F,$ as i,a1 as c,A as I,c as u,o as a,g as s,p as m,i as h,e as w,L as _,Q as v,h as r,F as l,D as p,n as E}from"./index-BJJ6YbMy.js";const L=Object.assign({name:"FormPreview"},{__name:"preview",props:{projectId:{type:String,required:!0},xmlFormId:{type:String,required:!0},draft:{type:Boolean,required:!0}},setup(f){const t=f,o=x(!0),d=()=>{o.value=!1},{form:e}=F(),y=i(c("WebFormRenderer")),k=i(c("EnketoIframe")),g=()=>{e.request({url:t.draft?p.formDraft(t.projectId,t.xmlFormId):p.form(t.projectId,t.xmlFormId),extended:!0}).catch(E)};return e.dataExists||g(),I(()=>e.initiallyLoading,n=>{n||(o.value=e.dataExists)}),(n,b)=>(a(),u(l,null,[o.value?(a(),s(v,{key:0},{default:h(()=>[w(_,{state:!0})]),_:1})):m("",!0),r(e).dataExists?(a(),u(l,{key:1},[r(e).webformsEnabled||n.$route.query.webforms==="true"?(a(),s(r(y),{key:0,"action-type":"preview",onLoaded:d})):(a(),s(r(k),{key:1,"enketo-id":r(e).enketoId,"action-type":"preview",onLoaded:d},null,8,["enketo-id"]))],64)):m("",!0)],64))}});export{L as default};
