import{O as m,a7 as Q,am as v,A as w,H as d,N as f}from"./index-BJJ6YbMy.js";const x=({fromQuery:y,toQuery:p})=>{const n=m(),u=Q(),t=v(null),a=new Set,i=new Proxy({},{get:(e,r)=>(a.add(r),u.query[r])}),l=()=>{a.clear(),t.value=y(i)};l();let o=!1;w(n.currentRoute,(e,r)=>{if(e.path!==r.path)return;if(o){o=!1;return}const s=e.query,h=r.query;for(const c of a)if(!f(s[c],h[c])){l();return}});const q=()=>{const e={...u.query};for(const[r,s]of Object.entries(p(t.value)))s!=null?e[r]=s:delete e[r];f(e,u.query)||(o=!0,n.replace({path:u.path,query:e}))};return d({get:()=>t.value,set:e=>{t.value!==e&&(t.value=e,q())}})};export{x as u};
