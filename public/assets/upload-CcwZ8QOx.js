import{c as j,o as S,d as b,t as q,J as ge,r as je,g as re,i as de,R as _t,e as oe,q as le,C as Se,f as se,a as wt,u as Te,H as _e,k as ye,ah as zt,ai as $t,n as ve,ag as Ae,aj as Dt,l as Ie,p as Z,s as Ot,ak as xt,K as yt,A as ue,F as Le,j as Fe,h as te,al as Lt,ab as Ge,W as Ue,S as qt,w as At,X as Tt,Y as Je,am as Oe,G as It,an as Pt,af as Ft,L as Ut,v as jt,D as Ye}from"./index-BJJ6YbMy.js";import{_ as Nt}from"./file-drop-zone-DebRuhhk.js";import{D as Ht}from"./datetime-3JD3bssD.js";import{_ as Bt}from"./sentence-separator-DdZUROGk.js";import{_ as Mt}from"./list-CXstQNZI.js";import{_ as Wt}from"./modal-BMSEXbZM.js";import{_ as Xe}from"./pagination-DLInApQo.js";import{u as Qt}from"./request--gXHIWga.js";function et(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{en:{title:{t:0,b:{t:2,i:[{t:3}],s:"Data error"}}}}})}function tt(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{de:{title:{t:0,b:{t:2,i:[{t:3}],s:"Datenfehler"}}},es:{title:{t:0,b:{t:2,i:[{t:3}],s:"Error de datos"}}},fr:{title:{t:0,b:{t:2,i:[{t:3}],s:"Erreur de données"}}},it:{title:{t:0,b:{t:2,i:[{t:3}],s:"Errore dati"}}},pt:{title:{t:0,b:{t:2,i:[{t:3}],s:"Erro de dados"}}},"zh-Hant":{title:{t:0,b:{t:2,i:[{t:3}],s:"資料錯誤"}}}}})}const Kt={id:"entity-upload-data-error",class:"panel panel-danger"},Vt={class:"panel-heading"},Zt={class:"panel-title"},Gt={class:"panel-body"},Ne=Object.assign({name:"EntityUploadDataError"},{__name:"data-error",props:{message:{type:String,required:!0}},setup(i){return(n,o)=>(S(),j("div",Kt,[b("div",Vt,[b("h1",Zt,q(n.$t("title")),1)]),b("div",Gt,q(i.message),1)]))}});typeof et=="function"&&et(Ne);typeof tt=="function"&&tt(Ne);function nt(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{en:{text:{full:{t:0,b:{t:2,i:[{t:3,v:"Drag a .csv file here, or "},{t:4,k:"chooseOne"},{t:3,v:" to import."}]}},chooseOne:{t:0,b:{t:2,i:[{t:3}],s:"choose one"}}},parsing:{t:0,b:{t:2,i:[{t:3}],s:"Reading data…"}}}}})}function it(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{de:{text:{full:{t:0,b:{t:2,i:[{t:3,v:"Fügen Sie hier eine Datei mit Drag-and-Drop ein, oder "},{t:4,k:"chooseOne"},{t:3,v:" zum Hochladen."}]}},chooseOne:{t:0,b:{t:2,i:[{t:3}],s:"eine auswählen"}}},parsing:{t:0,b:{t:2,i:[{t:3}],s:"Daten lesen..."}}},es:{text:{full:{t:0,b:{t:2,i:[{t:3,v:"Arrastre un archivo .csv aquí, o "},{t:4,k:"chooseOne"},{t:3,v:" para subir."}]}},chooseOne:{t:0,b:{t:2,i:[{t:3}],s:"elige uno"}}},parsing:{t:0,b:{t:2,i:[{t:3}],s:"Leyendo datos..."}}},fr:{text:{full:{t:0,b:{t:2,i:[{t:3,v:"Glissez un fichier .csv ici, ou "},{t:4,k:"chooseOne"},{t:3,v:" pour l'importer."}]}},chooseOne:{t:0,b:{t:2,i:[{t:3}],s:"Choisissez en un"}}},parsing:{t:0,b:{t:2,i:[{t:3}],s:"Lecture des données..."}}},it:{text:{full:{t:0,b:{t:2,i:[{t:3,v:"Trascina un file .csv qui, o "},{t:4,k:"chooseOne"},{t:3,v:" per caricarlo."}]}},chooseOne:{t:0,b:{t:2,i:[{t:3}],s:"scegli uno"}}},parsing:{t:0,b:{t:2,i:[{t:3}],s:"Lettura dei dati…"}}},pt:{text:{full:{t:0,b:{t:2,i:[{t:3,v:"Arraste um arquivo .csv aqui ou "},{t:4,k:"chooseOne"},{t:3,v:" para importar."}]}},chooseOne:{t:0,b:{t:2,i:[{t:3}],s:"escolha um"}}},parsing:{t:0,b:{t:2,i:[{t:3}],s:"Lendo dados…"}}},"zh-Hant":{text:{full:{t:0,b:{t:2,i:[{t:3,v:"拖曳一個 .csv 檔案到這，或者 "},{t:4,k:"chooseOne"},{t:3,v:"進行匯入。"}]}},chooseOne:{t:0,b:{t:2,i:[{t:3}],s:"選擇一個檔案"}}},parsing:{t:0,b:{t:2,i:[{t:3}],s:"讀取資料..."}}}}})}const Jt={id:"entity-upload-file-select-heading"},Yt=["aria-disabled"],He=Object.assign({name:"EntityUploadFileSelect"},{__name:"file-select",props:{parsing:Boolean},emits:["change"],setup(i,{emit:n}){const o=n,d=ge(null),h=f=>{o("change",f.target.files[0]),d.value.value=""};return(f,p)=>{const x=je("i18n-t");return S(),re(Nt,{id:"entity-upload-file-select",disabled:i.parsing,onDrop:p[1]||(p[1]=z=>f.$emit("change",z.dataTransfer.files[0]))},{default:de(()=>[b("div",Jt,[oe(x,{tag:"div",keypath:"text.full"},{chooseOne:de(()=>[le(b("input",{ref_key:"input",ref:d,type:"file",accept:".csv,.tsv",onChange:h},null,544),[[Se,!1]]),b("button",{type:"button",class:"btn btn-primary","aria-disabled":i.parsing,onClick:p[0]||(p[0]=z=>d.value.click())},[p[2]||(p[2]=b("span",{class:"icon-folder-open"},null,-1)),se(q(f.$t("text.chooseOne")),1)],8,Yt)]),_:1}),le(b("div",null,[oe(wt,{inline:""}),se(q(f.$t("parsing")),1)],512),[[Se,i.parsing]])]),_t(f.$slots,"default")]),_:3},8,["disabled"])}}});typeof nt=="function"&&nt(He);typeof it=="function"&&it(He);function st(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{en:{text:{full:{t:0,b:{t:2,i:[{t:3,v:"If you aren’t sure, you can "},{t:4,k:"downloadTemplate"}]}},downloadTemplate:{t:0,b:{t:2,i:[{t:3}],s:"Download a data template (.csv)"}}}}}})}function at(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{de:{text:{full:{t:0,b:{t:2,i:[{t:3,v:"Wenn Sie sich nicht sicher sind, können Sie "},{t:4,k:"downloadTemplate"},{t:3,v:" herunterladen."}]}},downloadTemplate:{t:0,b:{t:2,i:[{t:3}],s:"Downloaden Sie eine Datenvorlage (.csv)"}}}},es:{text:{full:{t:0,b:{t:2,i:[{t:3,v:"Si no estás seguro, puedes "},{t:4,k:"downloadTemplate"}]}},downloadTemplate:{t:0,b:{t:2,i:[{t:3}],s:"Descargar una plantilla de datos (.csv)"}}}},fr:{text:{full:{t:0,b:{t:2,i:[{t:3,v:"Si vous n'êtes pas sûr, vous pouvez "},{t:4,k:"downloadTemplate"}]}},downloadTemplate:{t:0,b:{t:2,i:[{t:3}],s:"Télécharger un modèle de données (.csv)"}}}},it:{text:{full:{t:0,b:{t:2,i:[{t:3,v:"Se non sei sicuro, puoi "},{t:4,k:"downloadTemplate"}]}},downloadTemplate:{t:0,b:{t:2,i:[{t:3}],s:"Scarica un modello di dati (.csv)"}}}},pt:{text:{full:{t:0,b:{t:2,i:[{t:3,v:"Se não tiver certeza, você pode "},{t:4,k:"downloadTemplate"}]}},downloadTemplate:{t:0,b:{t:2,i:[{t:3}],s:"Baixar um modelo de dados (.csv)"}}}},"zh-Hant":{text:{full:{t:0,b:{t:2,i:[{t:3,v:"如果您不確定，您可以"},{t:4,k:"downloadTemplate"}]}},downloadTemplate:{t:0,b:{t:2,i:[{t:3}],s:"下載資料模板 (.csv)"}}}}}})}const Xt=["href"],Be=Object.assign({name:"EntityUploadDataTemplate"},{__name:"data-template",props:{error:Boolean},setup(i){const{dataset:n}=Te(),o=_e(()=>{const h=n.properties.map(({name:p})=>p);h.unshift("label");const f=h.join(",");return`data:text/csv;charset=UTF-8,\uFEFF${encodeURIComponent(f)}`}),d=h=>{const f=Ht.local().toFormat("yyyyMMddHHmmss");h.target.setAttribute("download",`${n.name} ${f}.csv`)};return(h,f)=>{const p=je("i18n-t");return S(),re(p,{tag:"span",keypath:"text.full"},{downloadTemplate:de(()=>[b("a",{class:ye(["btn",i.error?"btn-danger":"btn-default"]),href:o.value,onClick:d},[f[0]||(f[0]=b("span",{class:"icon-download"},null,-1)),se(q(h.$t("text.downloadTemplate")),1)],10,Xt)]),_:1})}}});typeof st=="function"&&st(Be);typeof at=="function"&&at(Be);var qe={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var en=qe.exports,rt;function tn(){return rt||(rt=1,(function(i,n){((o,d)=>{i.exports=d()})(en,function o(){var d=typeof self<"u"?self:typeof window<"u"?window:d!==void 0?d:{},h,f=!d.document&&!!d.postMessage,p=d.IS_PAPA_WORKER||!1,x={},z=0,r={};function A(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var s=ze(t);s.chunkSize=parseInt(s.chunkSize),t.step||t.chunk||(s.chunkSize=null),this._handle=new T(s),(this._handle.streamer=this)._config=s}.call(this,e),this.parseChunk=function(t,s){var g=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<g){let C=this._config.newline;C||(u=this._config.quoteChar||'"',C=this._handle.guessLineEndings(t,u)),t=[...t.split(C).slice(g)].join(C)}this.isFirstChunk&&F(this._config.beforeFirstChunk)&&(u=this._config.beforeFirstChunk(t))!==void 0&&(t=u),this.isFirstChunk=!1,this._halted=!1;var g=this._partialLine+t,u=(this._partialLine="",this._handle.parse(g,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=u.meta.cursor,g=(this._finished||(this._partialLine=g.substring(t-this._baseIndex),this._baseIndex=t),u&&u.data&&(this._rowCount+=u.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),p)d.postMessage({results:u,workerId:r.WORKER_ID,finished:g});else if(F(this._config.chunk)&&!s){if(this._config.chunk(u,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=u=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(u.data),this._completeResults.errors=this._completeResults.errors.concat(u.errors),this._completeResults.meta=u.meta),this._completed||!g||!F(this._config.complete)||u&&u.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),g||u&&u.meta.paused||this._nextChunk(),u}this._halted=!0},this._sendError=function(t){F(this._config.error)?this._config.error(t):p&&this._config.error&&d.postMessage({workerId:r.WORKER_ID,error:t,finished:!1})}}function L(e){var t;(e=e||{}).chunkSize||(e.chunkSize=r.RemoteChunkSize),A.call(this,e),this._nextChunk=f?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(s){this._input=s,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),f||(t.onload=ce(this._chunkLoaded,this),t.onerror=ce(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!f),this._config.downloadRequestHeaders){var s,g=this._config.downloadRequestHeaders;for(s in g)t.setRequestHeader(s,g[s])}var u;this._config.chunkSize&&(u=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+u));try{t.send(this._config.downloadRequestBody)}catch(C){this._chunkError(C.message)}f&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(s=>(s=s.getResponseHeader("Content-Range"))!==null?parseInt(s.substring(s.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(s){s=t.statusText||s,this._sendError(new Error(s))}}function E(e){(e=e||{}).chunkSize||(e.chunkSize=r.LocalChunkSize),A.call(this,e);var t,s,g=typeof FileReader<"u";this.stream=function(u){this._input=u,s=u.slice||u.webkitSlice||u.mozSlice,g?((t=new FileReader).onload=ce(this._chunkLoaded,this),t.onerror=ce(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var u=this._input,C=(this._config.chunkSize&&(C=Math.min(this._start+this._config.chunkSize,this._input.size),u=s.call(u,this._start,C)),t.readAsText(u,this._config.encoding));g||this._chunkLoaded({target:{result:C}})},this._chunkLoaded=function(u){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(u.target.result)},this._chunkError=function(){this._sendError(t.error)}}function y(e){var t;A.call(this,e=e||{}),this.stream=function(s){return t=s,this._nextChunk()},this._nextChunk=function(){var s,g;if(!this._finished)return s=this._config.chunkSize,t=s?(g=t.substring(0,s),t.substring(s)):(g=t,""),this._finished=!t,this.parseChunk(g)}}function H(e){A.call(this,e=e||{});var t=[],s=!0,g=!1;this.pause=function(){A.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){A.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(u){this._input=u,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){g&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):s=!0},this._streamData=ce(function(u){try{t.push(typeof u=="string"?u:u.toString(this._config.encoding)),s&&(s=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(C){this._streamError(C)}},this),this._streamError=ce(function(u){this._streamCleanUp(),this._sendError(u)},this),this._streamEnd=ce(function(){this._streamCleanUp(),g=!0,this._streamData("")},this),this._streamCleanUp=ce(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function T(e){var t,s,g,u,C=Math.pow(2,53),Q=-C,Y=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ne=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,$=this,N=0,v=0,G=!1,_=!1,D=[],m={data:[],errors:[],meta:{}};function W(a){return e.skipEmptyLines==="greedy"?a.join("").trim()==="":a.length===1&&a[0].length===0}function B(){if(m&&g&&(ee("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+r.DefaultDelimiter+"'"),g=!1),e.skipEmptyLines&&(m.data=m.data.filter(function(l){return!W(l)})),K()){let l=function(O,U){F(e.transformHeader)&&(O=e.transformHeader(O,U)),D.push(O)};if(m)if(Array.isArray(m.data[0])){for(var a=0;K()&&a<m.data.length;a++)m.data[a].forEach(l);m.data.splice(0,1)}else m.data.forEach(l)}function c(l,O){for(var U=e.header?{}:[],I=0;I<l.length;I++){var P=I,k=l[I],k=((ae,R)=>(M=>(e.dynamicTypingFunction&&e.dynamicTyping[M]===void 0&&(e.dynamicTyping[M]=e.dynamicTypingFunction(M)),(e.dynamicTyping[M]||e.dynamicTyping)===!0))(ae)?R==="true"||R==="TRUE"||R!=="false"&&R!=="FALSE"&&((M=>{if(Y.test(M)&&(M=parseFloat(M),Q<M&&M<C))return 1})(R)?parseFloat(R):ne.test(R)?new Date(R):R===""?null:R):R)(P=e.header?I>=D.length?"__parsed_extra":D[I]:P,k=e.transform?e.transform(k,P):k);P==="__parsed_extra"?(U[P]=U[P]||[],U[P].push(k)):U[P]=k}return e.header&&(I>D.length?ee("FieldMismatch","TooManyFields","Too many fields: expected "+D.length+" fields but parsed "+I,v+O):I<D.length&&ee("FieldMismatch","TooFewFields","Too few fields: expected "+D.length+" fields but parsed "+I,v+O)),U}var w;m&&(e.header||e.dynamicTyping||e.transform)&&(w=1,!m.data.length||Array.isArray(m.data[0])?(m.data=m.data.map(c),w=m.data.length):m.data=c(m.data,0),e.header&&m.meta&&(m.meta.fields=D),v+=w)}function K(){return e.header&&D.length===0}function ee(a,c,w,l){a={type:a,code:c,message:w},l!==void 0&&(a.row=l),m.errors.push(a)}F(e.step)&&(u=e.step,e.step=function(a){m=a,K()?B():(B(),m.data.length!==0&&(N+=a.data.length,e.preview&&N>e.preview?s.abort():(m.data=m.data[0],u(m,$))))}),this.parse=function(a,c,w){var l=e.quoteChar||'"',l=(e.newline||(e.newline=this.guessLineEndings(a,l)),g=!1,e.delimiter?F(e.delimiter)&&(e.delimiter=e.delimiter(a),m.meta.delimiter=e.delimiter):((l=((O,U,I,P,k)=>{var ae,R,M,be;k=k||[",","	","|",";",r.RECORD_SEP,r.UNIT_SEP];for(var Ee=0;Ee<k.length;Ee++){for(var pe,$e=k[Ee],X=0,he=0,J=0,ie=(M=void 0,new we({comments:P,delimiter:$e,newline:U,preview:10}).parse(O)),me=0;me<ie.data.length;me++)I&&W(ie.data[me])?J++:(pe=ie.data[me].length,he+=pe,M===void 0?M=pe:0<pe&&(X+=Math.abs(pe-M),M=pe));0<ie.data.length&&(he/=ie.data.length-J),(R===void 0||X<=R)&&(be===void 0||be<he)&&1.99<he&&(R=X,ae=$e,be=he)}return{successful:!!(e.delimiter=ae),bestDelimiter:ae}})(a,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=l.bestDelimiter:(g=!0,e.delimiter=r.DefaultDelimiter),m.meta.delimiter=e.delimiter),ze(e));return e.preview&&e.header&&l.preview++,t=a,s=new we(l),m=s.parse(t,c,w),B(),G?{meta:{paused:!0}}:m||{meta:{paused:!1}}},this.paused=function(){return G},this.pause=function(){G=!0,s.abort(),t=F(e.chunk)?"":t.substring(s.getCharIndex())},this.resume=function(){$.streamer._halted?(G=!1,$.streamer.parseChunk(t,!0)):setTimeout($.resume,3)},this.aborted=function(){return _},this.abort=function(){_=!0,s.abort(),m.meta.aborted=!0,F(e.complete)&&e.complete(m),t=""},this.guessLineEndings=function(O,l){O=O.substring(0,1048576);var l=new RegExp(V(l)+"([^]*?)"+V(l),"gm"),w=(O=O.replace(l,"")).split("\r"),l=O.split(`
`),O=1<l.length&&l[0].length<w[0].length;if(w.length===1||O)return`
`;for(var U=0,I=0;I<w.length;I++)w[I][0]===`
`&&U++;return U>=w.length/2?`\r
`:"\r"}}function V(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function we(e){var t=(e=e||{}).delimiter,s=e.newline,g=e.comments,u=e.step,C=e.preview,Q=e.fastMode,Y=null,ne=!1,$=e.quoteChar==null?'"':e.quoteChar,N=$;if(e.escapeChar!==void 0&&(N=e.escapeChar),(typeof t!="string"||-1<r.BAD_DELIMITERS.indexOf(t))&&(t=","),g===t)throw new Error("Comment character same as delimiter");g===!0?g="#":(typeof g!="string"||-1<r.BAD_DELIMITERS.indexOf(g))&&(g=!1),s!==`
`&&s!=="\r"&&s!==`\r
`&&(s=`
`);var v=0,G=!1;this.parse=function(_,D,m){if(typeof _!="string")throw new Error("Input must be a string");var W=_.length,B=t.length,K=s.length,ee=g.length,a=F(u),c=[],w=[],l=[],O=v=0;if(!_)return X();if(Q||Q!==!1&&_.indexOf($)===-1){for(var U=_.split(s),I=0;I<U.length;I++){if(l=U[I],v+=l.length,I!==U.length-1)v+=s.length;else if(m)return X();if(!g||l.substring(0,ee)!==g){if(a){if(c=[],be(l.split(t)),he(),G)return X()}else be(l.split(t));if(C&&C<=I)return c=c.slice(0,C),X(!0)}}return X()}for(var P=_.indexOf(t,v),k=_.indexOf(s,v),ae=new RegExp(V(N)+V($),"g"),R=_.indexOf($,v);;)if(_[v]===$)for(R=v,v++;;){if((R=_.indexOf($,R+1))===-1)return m||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:c.length,index:v}),pe();if(R===W-1)return pe(_.substring(v,R).replace(ae,$));if($===N&&_[R+1]===N)R++;else if($===N||R===0||_[R-1]!==N){P!==-1&&P<R+1&&(P=_.indexOf(t,R+1));var M=Ee((k=k!==-1&&k<R+1?_.indexOf(s,R+1):k)===-1?P:Math.min(P,k));if(_.substr(R+1+M,B)===t){l.push(_.substring(v,R).replace(ae,$)),_[v=R+1+M+B]!==$&&(R=_.indexOf($,v)),P=_.indexOf(t,v),k=_.indexOf(s,v);break}if(M=Ee(k),_.substring(R+1+M,R+1+M+K)===s){if(l.push(_.substring(v,R).replace(ae,$)),$e(R+1+M+K),P=_.indexOf(t,v),R=_.indexOf($,v),a&&(he(),G))return X();if(C&&c.length>=C)return X(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:c.length,index:v}),R++}}else if(g&&l.length===0&&_.substring(v,v+ee)===g){if(k===-1)return X();v=k+K,k=_.indexOf(s,v),P=_.indexOf(t,v)}else if(P!==-1&&(P<k||k===-1))l.push(_.substring(v,P)),v=P+B,P=_.indexOf(t,v);else{if(k===-1)break;if(l.push(_.substring(v,k)),$e(k+K),a&&(he(),G))return X();if(C&&c.length>=C)return X(!0)}return pe();function be(J){c.push(J),O=v}function Ee(J){var ie=0;return ie=J!==-1&&(J=_.substring(R+1,J))&&J.trim()===""?J.length:ie}function pe(J){return m||(J===void 0&&(J=_.substring(v)),l.push(J),v=W,be(l),a&&he()),X()}function $e(J){v=J,be(l),l=[],k=_.indexOf(s,v)}function X(J){if(e.header&&!D&&c.length&&!ne){var ie=c[0],me=Object.create(null),Pe=new Set(ie);let Ve=!1;for(let Ce=0;Ce<ie.length;Ce++){let fe=ie[Ce];if(me[fe=F(e.transformHeader)?e.transformHeader(fe,Ce):fe]){let De,Ze=me[fe];for(;De=fe+"_"+Ze,Ze++,Pe.has(De););Pe.add(De),ie[Ce]=De,me[fe]++,Ve=!0,(Y=Y===null?{}:Y)[De]=fe}else me[fe]=1,ie[Ce]=fe;Pe.add(fe)}Ve&&console.warn("Duplicate headers found and renamed."),ne=!0}return{data:c,errors:w,meta:{delimiter:t,linebreak:s,aborted:G,truncated:!!J,cursor:O+(D||0),renamedHeaders:Y}}}function he(){u(X()),c=[],w=[]}},this.abort=function(){G=!0},this.getCharIndex=function(){return v}}function ke(e){var t=e.data,s=x[t.workerId],g=!1;if(t.error)s.userError(t.error,t.file);else if(t.results&&t.results.data){var u={abort:function(){g=!0,xe(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Re,resume:Re};if(F(s.userStep)){for(var C=0;C<t.results.data.length&&(s.userStep({data:t.results.data[C],errors:t.results.errors,meta:t.results.meta},u),!g);C++);delete t.results}else F(s.userChunk)&&(s.userChunk(t.results,u,t.file),delete t.results)}t.finished&&!g&&xe(t.workerId,t.results)}function xe(e,t){var s=x[e];F(s.userComplete)&&s.userComplete(t),s.terminate(),delete x[e]}function Re(){throw new Error("Not implemented.")}function ze(e){if(typeof e!="object"||e===null)return e;var t,s=Array.isArray(e)?[]:{};for(t in e)s[t]=ze(e[t]);return s}function ce(e,t){return function(){e.apply(t,arguments)}}function F(e){return typeof e=="function"}return r.parse=function(e,t){var s=(t=t||{}).dynamicTyping||!1;if(F(s)&&(t.dynamicTypingFunction=s,s={}),t.dynamicTyping=s,t.transform=!!F(t.transform)&&t.transform,!t.worker||!r.WORKERS_SUPPORTED)return s=null,r.NODE_STREAM_INPUT,typeof e=="string"?(e=(g=>g.charCodeAt(0)!==65279?g:g.slice(1))(e),s=new(t.download?L:y)(t)):e.readable===!0&&F(e.read)&&F(e.on)?s=new H(t):(d.File&&e instanceof File||e instanceof Object)&&(s=new E(t)),s.stream(e);(s=(()=>{var g;return!!r.WORKERS_SUPPORTED&&(g=(()=>{var u=d.URL||d.webkitURL||null,C=o.toString();return r.BLOB_URL||(r.BLOB_URL=u.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",C,")();"],{type:"text/javascript"})))})(),(g=new d.Worker(g)).onmessage=ke,g.id=z++,x[g.id]=g)})()).userStep=t.step,s.userChunk=t.chunk,s.userComplete=t.complete,s.userError=t.error,t.step=F(t.step),t.chunk=F(t.chunk),t.complete=F(t.complete),t.error=F(t.error),delete t.worker,s.postMessage({input:e,config:t,workerId:s.id})},r.unparse=function(e,t){var s=!1,g=!0,u=",",C=`\r
`,Q='"',Y=Q+Q,ne=!1,$=null,N=!1,v=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||r.BAD_DELIMITERS.filter(function(D){return t.delimiter.indexOf(D)!==-1}).length||(u=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(s=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(ne=t.skipEmptyLines),typeof t.newline=="string"&&(C=t.newline),typeof t.quoteChar=="string"&&(Q=t.quoteChar),typeof t.header=="boolean"&&(g=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");$=t.columns}t.escapeChar!==void 0&&(Y=t.escapeChar+Q),t.escapeFormulae instanceof RegExp?N=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(N=/^[=+\-@\t\r].*$/)}})(),new RegExp(V(Q),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return G(null,e,ne);if(typeof e[0]=="object")return G($||Object.keys(e[0]),e,ne)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||$),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),G(e.fields||[],e.data||[],ne);throw new Error("Unable to serialize unrecognized input");function G(D,m,W){var B="",K=(typeof D=="string"&&(D=JSON.parse(D)),typeof m=="string"&&(m=JSON.parse(m)),Array.isArray(D)&&0<D.length),ee=!Array.isArray(m[0]);if(K&&g){for(var a=0;a<D.length;a++)0<a&&(B+=u),B+=_(D[a],a);0<m.length&&(B+=C)}for(var c=0;c<m.length;c++){var w=(K?D:m[c]).length,l=!1,O=K?Object.keys(m[c]).length===0:m[c].length===0;if(W&&!K&&(l=W==="greedy"?m[c].join("").trim()==="":m[c].length===1&&m[c][0].length===0),W==="greedy"&&K){for(var U=[],I=0;I<w;I++){var P=ee?D[I]:I;U.push(m[c][P])}l=U.join("").trim()===""}if(!l){for(var k=0;k<w;k++){0<k&&!O&&(B+=u);var ae=K&&ee?D[k]:k;B+=_(m[c][ae],k)}c<m.length-1&&(!W||0<w&&!O)&&(B+=C)}}return B}function _(D,m){var W,B;return D==null?"":D.constructor===Date?JSON.stringify(D).slice(1,25):(B=!1,N&&typeof D=="string"&&N.test(D)&&(D="'"+D,B=!0),W=D.toString().replace(v,Y),(B=B||s===!0||typeof s=="function"&&s(D,m)||Array.isArray(s)&&s[m]||((K,ee)=>{for(var a=0;a<ee.length;a++)if(-1<K.indexOf(ee[a]))return!0;return!1})(W,r.BAD_DELIMITERS)||-1<W.indexOf(u)||W.charAt(0)===" "||W.charAt(W.length-1)===" ")?Q+W+Q:W)}},r.RECORD_SEP="",r.UNIT_SEP="",r.BYTE_ORDER_MARK="\uFEFF",r.BAD_DELIMITERS=["\r",`
`,'"',r.BYTE_ORDER_MARK],r.WORKERS_SUPPORTED=!f&&!!d.Worker,r.NODE_STREAM_INPUT=1,r.LocalChunkSize=10485760,r.RemoteChunkSize=5242880,r.DefaultDelimiter=",",r.Parser=we,r.ParserHandle=T,r.NetworkStreamer=L,r.FileStreamer=E,r.StringStreamer=y,r.ReadableStreamStreamer=H,d.jQuery&&((h=d.jQuery).fn.parse=function(e){var t=e.config||{},s=[];return this.each(function(C){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&d.FileReader)||!this.files||this.files.length===0)return!0;for(var Q=0;Q<this.files.length;Q++)s.push({file:this.files[Q],inputElem:this,instanceConfig:h.extend({},t)})}),g(),this;function g(){if(s.length===0)F(e.complete)&&e.complete();else{var C,Q,Y,ne,$=s[0];if(F(e.before)){var N=e.before($.file,$.inputElem);if(typeof N=="object"){if(N.action==="abort")return C="AbortError",Q=$.file,Y=$.inputElem,ne=N.reason,void(F(e.error)&&e.error({name:C},Q,Y,ne));if(N.action==="skip")return void u();typeof N.config=="object"&&($.instanceConfig=h.extend($.instanceConfig,N.config))}else if(N==="skip")return void u()}var v=$.instanceConfig.complete;$.instanceConfig.complete=function(G){F(v)&&v(G,$.file,$.inputElem),u()},r.parse($.file,$.instanceConfig)}}function u(){s.splice(0,1),g()}}),p&&(d.onmessage=function(e){e=e.data,r.WORKER_ID===void 0&&e&&(r.WORKER_ID=e.workerId),typeof e.input=="string"?d.postMessage({workerId:r.WORKER_ID,results:r.parse(e.input,e.config),finished:!0}):(d.File&&e.input instanceof File||e.input instanceof Object)&&(e=r.parse(e.input,e.config))&&d.postMessage({workerId:r.WORKER_ID,results:e,finished:!0})}),(L.prototype=Object.create(A.prototype)).constructor=L,(E.prototype=Object.create(A.prototype)).constructor=E,(y.prototype=Object.create(y.prototype)).constructor=y,(H.prototype=Object.create(A.prototype)).constructor=H,r})})(qe)),qe.exports}var nn=tn();const kt=zt(nn),sn=(i,n)=>{if(i.aborted)return n(new Error("aborted")),ve;const o=()=>{n(new Error("aborted")),i.removeEventListener("abort",o)};return i.addEventListener("abort",o),()=>{i.removeEventListener("abort",o)}},an=$t({aborted:!1,addEventListener:ve,removeEventListener:ve}),Et=(i,n,o=an(),d={})=>{if(d.complete!=null)throw new Error("Option complete not allowed: call then() on the promise instead.");if(d.error!=null)throw new Error("Option error not allowed: call catch() on the promise instead");return new Promise((h,f)=>{const p=sn(o,f);if(o.aborted)return;let x=!1;const z={error:A=>{o.aborted||(x=!0,p(),f(new Error(i.t("util.csv.readError",{message:A.message}))))},complete:A=>{p(),x||o.aborted||h(A)},...d},r="step"in d?"step":"chunk"in d?"chunk":null;if(r!=null){const A=d[r];z[r]=(L,E)=>{if(x||o.aborted){E.abort();return}try{A(L)}catch(y){x=!0,E.abort(),f(y)}}}kt.parse(n,z)})},rn=async(i,n,o=void 0)=>{const{data:d,errors:h,meta:f}=await Et(i,n,o,{delimitersToGuess:[",",";","	","|"],preview:1}),p=d.length!==0?d[0]:[];if(p.some(z=>z.includes("\0")))throw new Error(i.t("util.csv.invalidCSV",{name:n.name}));const x=h.filter(z=>z.code!=="UndetectableDelimiter");if(x.length===0)for(;p.length!==0&&Ae(p)==="";)p.pop();return{columns:p,errors:x,meta:{delimiter:f.delimiter}}},on=i=>{const n=[];let o=!1;return{type:"raggedRows",pushRow:(h,f)=>{if(h.length<i.length){const p=Ae(n);p!=null&&f===p[1]+1?p[1]=f:n.length<500&&n.push([f,f])}else h.length===i.length&&Ae(h)===""&&(o=!0)},hasWarning:()=>n.length!==0&&o,get details(){return n}}},ln=i=>{const n={size:0,row:-1},o=[0,0];return{type:"largeCell",pushRow:(h,f)=>{let p=0;for(const x of h)p+=x.length,x.length>n.size&&(x.includes(i)||x.search(/[\n\r]/)!==-1)&&(n.size=x.length,n.row=f);p>o[1]&&(p>o[0]?(o[1]=o[0],o[0]=p):o[1]=p)},hasWarning:()=>n.size>10*o[1],get details(){return n.row}}},un=async(i,n,o,d={})=>{const{delimiter:h=",",transformRow:f=Dt,signal:p=void 0}=d,x=[];let z=-1;const r=[on(o),ln(h)],A=(y,H)=>{for(;y.length>o.length&&Ae(y)==="";)y.pop();if(y.every(T=>T==="")){z===-1&&(z=H);return}if(z!==-1){const T=new Error(i.t("util.csv.emptyRow"));throw T.row=z,T}if(y.length>o.length){const T={expected:i.n(o.length,"default"),actual:i.n(y.length,"default")};throw new Error(i.tc("util.csv.dataWithoutHeader",o.length,T))}if(y.some(T=>T.includes("\0"))){const T=new Error(i.t("util.csv.invalidCSV",{name:n.name}));throw T.row=NaN,T}x.push(f(y,o));for(const T of r)T.pushRow(y,H,o)};let L=0;try{await Et(i,n,p,{delimiter:h,chunk:({data:y,errors:H})=>{if(H.length!==0){const T=H[0],V=new Error(T.type==="Quotes"?i.t("util.csv.invalidQuotes"):T.message);throw V.row=T.row,V}L===0&&(y.shift(),L+=1);for(const T of y)A(T,L),L+=1},worker:!0})}catch(y){throw Number.isNaN(y.row)?y:new Error(i.t("util.csv.rowError",{message:y.message,row:i.n((y.row??L)+1,"default")}))}const E={count:0,details:{}};for(const y of r)y.hasWarning()&&(E.count+=1,E.details[y.type]=y.details);return{data:x,warnings:E}},Ct=i=>i==="	"?"⇥":i,dn=(i,{maxLength:n=1e4,maxSize:o=1e4})=>{let d=0;const h=Math.min(i.length,n);let f=0;for(;d<h&&f<o;)f+=i[d].length,d+=1;const p=i.slice(0,d);return f>o?p[d-1]=p[d-1].slice(0,o-f).concat("…"):d<i.length&&p.push("…"),p},St=(i,n={})=>{const{maxLength:o,maxSize:d,...h}=n,f=dn(i,{maxLength:o,maxSize:d});h.delimiter==null&&(h.delimiter=",");const p=Ct(h.delimiter);if(p!==h.delimiter){for(const[x,z]of f.entries())f[x]=z.replaceAll(h.delimiter,p);h.delimiter=p}return kt.unparse([f],h)};function ot(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{en:{expectedHeader:{t:0,b:{t:2,i:[{t:3}],s:"Expected header"}},suggestions:{title:{t:0,b:{t:2,i:[{t:3}],s:"Suggestions"}},invalidQuotes:{t:0,b:{t:2,i:[{t:3}],s:"A quoted field is invalid. Check the header row of your file to see if there are any unusual values."}},missingLabel:{t:0,b:{t:2,i:[{t:3,v:"A "},{t:4,k:"label"},{t:3,v:" property is required. The label indicates the name to use for each Entity throughout Central and elsewhere."}]}},unknownProperty:{t:0,b:{t:2,i:[{t:3}],s:"If you want to add properties to this Entity List, you can do so in the Entity Properties section on the Overview page of this Entity List, or you can upload and publish a Form that references the property."}},duplicateColumn:{t:0,b:{t:2,i:[{t:3}],s:"It looks like two or more columns have the same header. Please make sure column headers are unique."}},emptyColumn:{t:0,b:{t:2,i:[{t:3}],s:"It looks like you have an empty cell in the header. Please remove any empty columns in your file."}},delimiterNotComma:{t:0,b:{t:2,i:[{t:3,v:"This might be because we got the cell delimiter wrong. We used "},{t:4,k:"delimiter"},{t:3,v:"."}]}}}}}})}function lt(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{de:{expectedHeader:{t:0,b:{t:2,i:[{t:3}],s:"Erwartete Kopfzeile"}},suggestions:{title:{t:0,b:{t:2,i:[{t:3}],s:"Vorschläge"}},invalidQuotes:{t:0,b:{t:2,i:[{t:3}],s:"Ein zitiertes Feld ist ungültig. Überprüfen Sie die Kopfzeile Ihrer Datei, um zu sehen, ob es irgendwelche ungewöhnlichen Werte gibt."}},missingLabel:{t:0,b:{t:2,i:[{t:3,v:"Eine "},{t:4,k:"label"},{t:3,v:" Eigenschaft ist erforderlich. Die Bezeichnung gibt den Namen an, der für jede Entität in Central und anderswo zu verwenden ist."}]}},unknownProperty:{t:0,b:{t:2,i:[{t:3}],s:"Wenn Sie Eigenschaften zu dieser Entitätsliste hinzufügen möchten, können Sie dies im Abschnitt Entitätseigenschaften auf der Übersichtsseite dieser Entitätsliste tun, oder Sie können ein Formular hochladen und veröffentlichen, das auf die Eigenschaft verweist."}},duplicateColumn:{t:0,b:{t:2,i:[{t:3}],s:"Es sieht so aus, als hätten zwei oder mehr Spalten die gleiche Überschrift. Bitte stellen Sie sicher, dass die Spaltenüberschriften eindeutig sind."}},emptyColumn:{t:0,b:{t:2,i:[{t:3}],s:"Es sieht so aus, als ob Sie eine leere Zelle in der Kopfzeile haben. Bitte entfernen Sie alle leeren Spalten in Ihrer Datei."}},delimiterNotComma:{t:0,b:{t:2,i:[{t:3,v:"Das könnte daran liegen, dass wir das Zellentrennzeichen falsch gesetzt haben. Wir haben "},{t:4,k:"delimiter"},{t:3,v:" benutzt."}]}}}},es:{expectedHeader:{t:0,b:{t:2,i:[{t:3}],s:"Cabecera prevista"}},suggestions:{title:{t:0,b:{t:2,i:[{t:3}],s:"Sugerencias"}},invalidQuotes:{t:0,b:{t:2,i:[{t:3}],s:"Un campo citado no es válido. Compruebe la fila de cabecera de su archivo para ver si hay algún valor inusual."}},missingLabel:{t:0,b:{t:2,i:[{t:3,v:"Se requiere una propiedad "},{t:4,k:"label"},{t:3,v:". La etiqueta indica el nombre a utilizar para cada Entidad en toda la Central y en otros lugares."}]}},unknownProperty:{t:0,b:{t:2,i:[{t:3}],s:"Si desea añadir propiedades a esta Lista de entidades, puede hacerlo en la sección Propiedades de la entidad de la página Descripción general de esta Lista de entidades, o puede cargar y publicar un Formulario que haga referencia a la propiedad."}},duplicateColumn:{t:0,b:{t:2,i:[{t:3}],s:"Parece que dos o más columnas tienen el mismo encabezado. Asegúrate de que los encabezados de las columnas son únicos."}},emptyColumn:{t:0,b:{t:2,i:[{t:3}],s:"Parece que tiene una celda vacía en la cabecera. Elimine las columnas vacías de su archivo."}},delimiterNotComma:{t:0,b:{t:2,i:[{t:3,v:"Esto puede deberse a que nos equivocamos al delimitar las celdas. Hemos utilizado "},{t:4,k:"delimiter"},{t:3,v:"."}]}}}},fr:{expectedHeader:{t:0,b:{t:2,i:[{t:3}],s:"Entête attendu"}},suggestions:{title:{t:0,b:{t:2,i:[{t:3}],s:"Suggestions"}},invalidQuotes:{t:0,b:{t:2,i:[{t:3}],s:"Un champ entre guillemets est invalide. Vérifiez que l'entête de votre fichier ne contient pas une valeur inhabituelle."}},missingLabel:{t:0,b:{t:2,i:[{t:3,v:"Une propriété "},{t:4,k:"label"},{t:3,v:" est requise. Le label indique le nom à utiliser pour chaque entité dans Central et ailleurs."}]}},unknownProperty:{t:0,b:{t:2,i:[{t:3}],s:"Si vous souhaitez ajouter des propriétés à cette liste d'entités, vous pouvez le faire dans la section Propriétés d'Entités de la page d'aperçu de cette liste d'entités, ou vous pouvez charger et publier un formulaire qui référence ces propriétés."}},duplicateColumn:{t:0,b:{t:2,i:[{t:3}],s:"Il semblerait que deux colonnes ou plus aient le même entête. Assurez vous que les entêtes de colonnes sont uniques."}},emptyColumn:{t:0,b:{t:2,i:[{t:3}],s:"Il semblerait que vous ayez une cellule vide dans la ligne d'entête. Merci de supprimer toutes les colonnes vides de votre fichier."}},delimiterNotComma:{t:0,b:{t:2,i:[{t:3,v:"Ça pourrait être parce que nous avons mal déterminé le délimiteur. Nous avons utilisé "},{t:4,k:"delimiter"},{t:3,v:"."}]}}}},it:{expectedHeader:{t:0,b:{t:2,i:[{t:3}],s:"Intestazione prevista"}},suggestions:{title:{t:0,b:{t:2,i:[{t:3}],s:"Suggerimenti"}},invalidQuotes:{t:0,b:{t:2,i:[{t:3}],s:"Un campo tra virgolette non è valido. Controlla la riga di intestazione del tuo file per vedere se sono presenti valori insoliti."}},missingLabel:{t:0,b:{t:2,i:[{t:3,v:"Una "},{t:4,k:"label"},{t:3,v:" proprietà è richiesta. L'etichetta indica il nome da utilizzare per ciascuna Entità in tutto Central e altrove."}]}},unknownProperty:{t:0,b:{t:2,i:[{t:3}],s:"Se si desidera aggiungere proprietà a questo Elenco di entità, è possibile farlo nella sezione Proprietà dell'entità nella pagina Panoramica di questo Elenco di entità, oppure si può caricare e pubblicare un formulario che faccia riferimento alla proprietà."}},duplicateColumn:{t:0,b:{t:2,i:[{t:3}],s:"Sembra che due o più colonne abbiano la stessa intestazione. Assicurarsi che le intestazioni delle colonne siano uniche."}},emptyColumn:{t:0,b:{t:2,i:[{t:3}],s:"Sembra che ci sia una cella vuota nell'intestazione. Eliminare le colonne vuote nel file."}},delimiterNotComma:{t:0,b:{t:2,i:[{t:3,v:"Ciò potrebbe essere dovuto al fatto che abbiamo sbagliato il delimitatore di cella. Abbiamo usato "},{t:4,k:"delimiter"},{t:3,v:"."}]}}}},pt:{expectedHeader:{t:0,b:{t:2,i:[{t:3}],s:"Cabeçalho esperado"}},suggestions:{title:{t:0,b:{t:2,i:[{t:3}],s:"Sugestões"}},invalidQuotes:{t:0,b:{t:2,i:[{t:3}],s:"Um campo entre aspas é inválido. Verifique a linha de cabeçalho do seu arquivo para ver se há valores incomuns."}},missingLabel:{t:0,b:{t:2,i:[{t:3,v:"Uma propriedade de "},{t:4,k:"label"},{t:3,v:" é obrigatória. O rótulo indica o nome a ser usado para cada Entidade no Central e em outros lugares."}]}},unknownProperty:{t:0,b:{t:2,i:[{t:3}],s:"Se quiser adicionar propriedades a esta Lista de Entidades, você pode fazê-lo na seção Propriedades da Entidade na página Visão Geral desta Lista de Entidades, ou pode carregar e publicar um Formulário que faça referência à propriedade."}},duplicateColumn:{t:0,b:{t:2,i:[{t:3}],s:"Parece que duas ou mais colunas têm o mesmo cabeçalho. Certifique-se de que os cabeçalhos das colunas sejam exclusivos."}},emptyColumn:{t:0,b:{t:2,i:[{t:3}],s:"Parece que você tem uma célula vazia no cabeçalho. Remova todas as colunas vazias do seu arquivo."}},delimiterNotComma:{t:0,b:{t:2,i:[{t:3,v:"Isso pode ter ocorrido porque definimos o delimitador de célula errado. Usamos "},{t:4,k:"delimiter"},{t:3,v:"."}]}}}},"zh-Hant":{expectedHeader:{t:0,b:{t:2,i:[{t:3}],s:"預期標題"}},suggestions:{title:{t:0,b:{t:2,i:[{t:3}],s:"建議"}},invalidQuotes:{t:0,b:{t:2,i:[{t:3}],s:"帶引號的欄位無效。檢查文件的標題行，看看是否有任何異常值。"}},missingLabel:{t:0,b:{t:2,i:[{t:3,v:"需要 1"},{t:4,k:"label"},{t:3,v:" 屬性。此標籤指示整個 Central 和其他地方每個實體使用的名稱。"}]}},unknownProperty:{t:0,b:{t:2,i:[{t:3}],s:"如果您想要向此實體清單新增屬性，您可以在此實體清單的概述頁面上的實體屬性部分中執行此操作，也可以上傳並發布引用該屬性的表單。"}},duplicateColumn:{t:0,b:{t:2,i:[{t:3}],s:"看起來兩個或更多列具有相同的標題。請確保列標題是唯一的。"}},emptyColumn:{t:0,b:{t:2,i:[{t:3}],s:"標題中似乎有一個空白單元格。請刪除檔案中的所有空白列。"}},delimiterNotComma:{t:0,b:{t:2,i:[{t:3,v:"這可能是因為我們的單元格分隔符號錯誤。我們使用了 1"},{t:4,k:"delimiter"},{t:3,v:"。"}]}}}}}})}const cn={id:"entity-upload-header-errors",class:"dl-horizontal"},pn={id:"entity-upload-header-errors-filename"},hn={key:0,class:"entity-upload-header-errors-suggestions"},fn={key:1,class:"entity-upload-header-errors-suggestions"},gn={key:0},mn={key:2},bn={key:3},vn={key:4},Me=Object.assign({name:"EntityUploadHeaderErrors"},{__name:"header-errors",props:{filename:{type:String,required:!0},header:{type:String,required:!0},delimiter:{type:String,required:!0},invalidQuotes:Boolean,missingLabel:Boolean,missingProperty:Boolean,unknownProperty:Boolean,duplicateColumn:Boolean,emptyColumn:Boolean},setup(i){const n=i,{dataset:o}=Te(),d=_e(()=>{const r=o.properties.map(({name:A})=>A);return r.unshift("label"),St(r,{delimiter:n.delimiter})}),h=[],f=r=>A=>{h[r]=A},p=r=>{const{target:A}=r;for(const L of h)L!==A&&L.scroll(A.scrollLeft,0)},x=_e(()=>n.delimiter!==","||Object.entries(n).some(([r,A])=>A===!0&&r!=="missingProperty")),z=_e(()=>Ct(n.delimiter));return(r,A)=>{const L=je("i18n-t"),E=Ie("tooltip");return S(),j("dl",cn,[b("dt",null,q(r.$t("expectedHeader")),1),b("dd",null,[b("div",{ref:f(0),class:"csv-header",onScroll:p},q(d.value),545)]),le((S(),j("dt",pn,[se(q(i.filename),1)])),[[E,void 0,void 0,{text:!0}]]),b("dd",null,[b("div",{ref:f(1),class:"csv-header",onScroll:p},q(i.header),545)]),x.value?(S(),j("dt",hn,q(r.$t("suggestions.title")),1)):Z("",!0),x.value?(S(),j("dd",fn,[i.invalidQuotes?(S(),j("p",gn,q(r.$t("suggestions.invalidQuotes")),1)):Z("",!0),i.missingLabel?(S(),re(L,{key:1,tag:"p",keypath:"suggestions.missingLabel"},{label:de(()=>A[0]||(A[0]=[b("span",{class:"text-monospace"},"label",-1)])),_:1})):Z("",!0),i.unknownProperty?(S(),j("p",mn,q(r.$t("suggestions.unknownProperty")),1)):Z("",!0),i.duplicateColumn?(S(),j("p",bn,q(r.$t("suggestions.duplicateColumn")),1)):Z("",!0),i.emptyColumn?(S(),j("p",vn,q(r.$t("suggestions.emptyColumn")),1)):Z("",!0),i.delimiter!==","?(S(),re(L,{key:5,tag:"p",keypath:"suggestions.delimiterNotComma"},{delimiter:de(()=>[b("code",null,q(z.value),1)]),_:1})):Z("",!0)])):Z("",!0)])}}});typeof ot=="function"&&ot(Me);typeof lt=="function"&&lt(Me);function ut(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{en:{headersNote:{t:0,b:{t:2,i:[{t:3}],s:"The first row in your data file must exactly match the table header you see above."}}}}})}function dt(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{de:{headersNote:{t:0,b:{t:2,i:[{t:3}],s:"Die erste Zeile in Ihrer Datendatei muss genau mit dem Tabellenkopf übereinstimmen, den Sie oben sehen."}}},es:{headersNote:{t:0,b:{t:2,i:[{t:3}],s:"La primera fila de su fichero de datos debe coincidir exactamente con la cabecera de la tabla que ve arriba."}}},fr:{headersNote:{t:0,b:{t:2,i:[{t:3}],s:"La première ligne de votre fichier de données doit correspondre exactement à l'entête de table visible ci-dessous."}}},it:{headersNote:{t:0,b:{t:2,i:[{t:3}],s:"The first row in your data file must exactly match the table header you see above."}}},pt:{headersNote:{t:0,b:{t:2,i:[{t:3}],s:"A primeira linha do seu arquivo de dados deve corresponder exatamente ao cabeçalho da tabela que você vê acima."}}},"zh-Hant":{headersNote:{t:0,b:{t:2,i:[{t:3}],s:"資料檔案中的第一行必須與上面看到的表標題完全相符。"}}}}})}const _n={key:0,class:"panel-body"},We=Object.assign({name:"EntityUploadHeaderHelp"},{__name:"header-help",props:{errors:Object},setup(i){const n=i,o=_e(()=>n.errors!=null);return(d,h)=>(S(),j("div",{id:"entity-upload-header-help",class:ye({panel:o.value,"panel-danger":o.value})},[b("div",{class:ye({"panel-heading":o.value})},[b("span",null,q(d.$t("headersNote")),1),oe(Bt),oe(Be,{error:o.value},null,8,["error"])],2),o.value?(S(),j("div",_n,[oe(Me,Ot(xt(i.errors)),null,16)])):Z("",!0)],2))}});typeof ut=="function"&&ut(We);typeof dt=="function"&&dt(We);function ct(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{en:{rowCount:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" data row found"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" data rows found"}]}]}},status:{sending:{t:0,b:{t:2,i:[{t:3,v:"Sending file… ("},{t:4,k:"percentUploaded"},{t:3,v:")"}]}},processing:{t:0,b:{t:2,i:[{t:3}],s:"Processing file…"}}}}}})}function pt(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{de:{rowCount:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" Datenzeile gefunden"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" Datenzeilen gefunden"}]}]}},status:{sending:{t:0,b:{t:2,i:[{t:3,v:"Datei senden... ("},{t:4,k:"percentUploaded"},{t:3,v:")"}]}},processing:{t:0,b:{t:2,i:[{t:3}],s:"Datei verarbeiten..."}}}},es:{rowCount:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" fila de datos encontradas"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" filas de datos encontradas"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" filas de datos encontradas"}]}]}},status:{sending:{t:0,b:{t:2,i:[{t:3,v:"Enviando archivo… ("},{t:4,k:"percentUploaded"},{t:3,v:")"}]}},processing:{t:0,b:{t:2,i:[{t:3}],s:"Procesando archivo…"}}}},fr:{rowCount:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" ligne de données trouvée"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" lignes de données trouvées"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" lignes de données trouvées"}]}]}},status:{sending:{t:0,b:{t:2,i:[{t:3,v:"Envoi du fichier...("},{t:4,k:"percentUploaded"},{t:3,v:")"}]}},processing:{t:0,b:{t:2,i:[{t:3}],s:"Traitement du fichier..."}}}},it:{rowCount:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" riga di dati trovata"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" righe di dati trovate"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" righe di dati trovate"}]}]}},status:{sending:{t:0,b:{t:2,i:[{t:3,v:"Inviando il file...("},{t:4,k:"percentUploaded"},{t:3,v:")"}]}},processing:{t:0,b:{t:2,i:[{t:3}],s:"Processando il file..."}}}},pt:{rowCount:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" linha de dados encontrada"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" linhas de dados encontradas"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" linhas de dados encontradas"}]}]}},status:{sending:{t:0,b:{t:2,i:[{t:3,v:"Enviando arquivo… ("},{t:4,k:"percentUploaded"},{t:3,v:")"}]}},processing:{t:0,b:{t:2,i:[{t:3}],s:"Processando arquivo…"}}}},"zh-Hant":{rowCount:{t:0,b:{t:2,i:[{t:3,v:"找到"},{t:4,k:"count"},{t:3,v:"行資料"}]}},status:{sending:{t:0,b:{t:2,i:[{t:3,v:"傳送檔案… ("},{t:4,k:"percentUploaded"},{t:3,v:")"}]}},processing:{t:0,b:{t:2,i:[{t:3}],s:"處理檔案…"}}}}}})}const wn={id:"entity-upload-popup-heading"},yn=["aria-label"],kn={id:"entity-upload-popup-count"},En={id:"entity-upload-popup-warnings"},Cn={id:"entity-upload-popup-status"},Qe=Object.assign({name:"EntityUploadPopup"},{__name:"popup",props:{filename:{type:String,required:!0},count:{type:Number,required:!0},warnings:{type:Number,required:!0},awaitingResponse:Boolean,progress:{type:Number,required:!0}},emits:["clear","animationstart","animationend"],setup(i){const n=i,{t:o,n:d}=yt(),h=_e(()=>n.progress<1?o("status.sending",{percentUploaded:d(n.progress,"percent")}):o("status.processing"));return(f,p)=>{const x=Ie("tooltip");return S(),j("div",{id:"entity-upload-popup",onAnimationstart:p[1]||(p[1]=z=>f.$emit("animationstart")),onAnimationend:p[2]||(p[2]=z=>f.$emit("animationend"))},[b("div",wn,[le((S(),j("div",null,[se(q(i.filename),1)])),[[x,void 0,void 0,{text:!0}]]),le(b("button",{type:"button",class:"btn btn-link","aria-label":f.$t("action.clear"),onClick:p[0]||(p[0]=z=>f.$emit("clear"))},p[3]||(p[3]=[b("span",{class:"icon-trash"},null,-1)]),8,yn),[[Se,!i.awaitingResponse]])]),b("div",kn,q(f.$tcn("rowCount",i.count)),1),le(b("div",En,[p[4]||(p[4]=b("span",{class:"icon-warning"},null,-1)),se(q(f.$tcn("count.warning",i.warnings)),1)],512),[[Se,i.warnings!==0&&!i.awaitingResponse]]),le(b("div",Cn,[oe(wt,{inline:""}),b("span",null,q(h.value),1)],512),[[Se,i.awaitingResponse]])],32)}}});typeof ct=="function"&&ct(Qe);typeof pt=="function"&&pt(Qe);const Sn={class:"table"},Rn={class:"sr-only"},zn={class:"row-number"},ht=Object.assign({name:"EntityUploadTable"},{__name:"table",props:{entities:Array,rowIndex:Number,pageSize:{type:Number,required:!0},awaitingResponse:Boolean,highlighted:Array},setup(i,{expose:n}){const o=i,{dataset:d}=Te(),h=ge(null),f=ge("auto");let p=0;ue([()=>o.entities,()=>o.pageSize],([L,E],[,y])=>{f.value="auto",(E!==y||L==null)&&(p=0),L!=null&&L.length===E?Ue(()=>{p=h.value.getBoundingClientRect().height}):p!==0&&(f.value=Ge(p))});const x=L=>o.highlighted!=null&&L>=o.highlighted[0]&&L<=o.highlighted[1],z=ge(!1);return n({resizeLastColumn:()=>{const L=h.value.querySelector("th:last-child");if(L.style.width="",h.value.clientWidth===0){z.value=!1;return}const E=h.value.closest(".modal-body").querySelector("#entity-upload-popup");if(E!=null){const y=E.getBoundingClientRect(),H=h.value.getBoundingClientRect();if(z.value=y.top<H.bottom,z.value){const T=H.right-y.left;L.style.width=Ge(L.clientWidth+T+10)}}h.value.scrollWidth===h.value.clientWidth&&(L.style.width="auto")},resetScroll:()=>{h.value.scroll(0,0)}}),(L,E)=>{const y=Ie("tooltip");return S(),j("div",{ref_key:"container",ref:h,class:ye(["entity-upload-table",{"overlaps-popup":z.value}]),style:Lt({minHeight:f.value})},[b("table",Sn,[b("thead",null,[b("tr",null,[b("th",null,[b("span",Rn,q(L.$t("common.rowNumber")),1)]),E[0]||(E[0]=b("th",null,"label",-1)),(S(!0),j(Le,null,Fe(te(d).properties,({name:H})=>(S(),j("th",{key:H},[le((S(),j("div",null,[se(q(H),1)])),[[y,void 0,void 0,{text:!0}]])]))),128))])]),i.entities!=null&&i.entities.length!==0?(S(),j("tbody",{key:0,class:ye({"data-loading":i.awaitingResponse})},[(S(!0),j(Le,null,Fe(i.entities,(H,T)=>(S(),j("tr",{key:T,class:ye({highlight:x(i.rowIndex+T)})},[b("td",zn,q(L.$n(i.rowIndex+T+1,"noGrouping")),1),b("td",null,[le((S(),j("div",null,[se(q(H.label),1)])),[[y,void 0,void 0,{text:!0}]])]),(S(!0),j(Le,null,Fe(te(d).properties,({name:V})=>(S(),j("td",{key:V},[le((S(),j("div",null,[se(q(H.data[V]),1)])),[[y,void 0,void 0,{text:!0}]])]))),128))],2))),128))],2)):Z("",!0)])],6)}}}),$n={class:"entity-upload-warning"},Dn={class:"label label-warning"},On=["onClick"],ft=Object.assign({name:"EntityUploadWarning"},{__name:"warning",props:{ranges:Array},emits:["rows"],setup(i){const{formatRange:n}=qt();return(o,d)=>(S(),j("div",$n,[b("span",Dn,[d[0]||(d[0]=b("span",{class:"icon-warning"},null,-1)),se(q(o.$t("common.warning")),1)]),_t(o.$slots,"default"),i.ranges!=null?(S(),j(Le,{key:0},[d[1]||(d[1]=b("span",null," ",-1)),oe(Mt,{list:i.ranges},{default:de(({value:[h,f]})=>[b("a",{href:"#",onClick:At(p=>o.$emit("rows",[h-1,f-1]),["prevent"])},q(te(n)(h,f)),9,On)]),_:1},8,["list"])],64)):Z("",!0)]))}});function gt(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{en:{row:{raggedRows:{t:0,b:{t:2,i:[{t:3}],s:"Fewer columns were found than expected in some rows:"}},largeCell:{t:0,b:{t:2,i:[{t:3}],s:"Some cells are abnormally large, which can indicate difficulties reading your file:"}}}}}})}function mt(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{de:{row:{raggedRows:{t:0,b:{t:2,i:[{t:3}],s:"In einigen Zeilen wurden weniger Spalten als erwartet gefunden:"}},largeCell:{t:0,b:{t:2,i:[{t:3}],s:"Einige Zellen sind ungewöhnlich groß, was auf Schwierigkeiten beim Lesen Ihrer Datei hinweisen kann:"}}}},es:{row:{raggedRows:{t:0,b:{t:2,i:[{t:3}],s:"Se encontraron menos columnas de las esperadas en algunas filas:"}},largeCell:{t:0,b:{t:2,i:[{t:3}],s:"Algunas celdas son anormalmente grandes, lo que puede indicar dificultades para leer su archivo:"}}}},fr:{row:{raggedRows:{t:0,b:{t:2,i:[{t:3}],s:"Dans certaines lignes, il y a eu moins de colonnes détectées que prévu:"}},largeCell:{t:0,b:{t:2,i:[{t:3}],s:"Certaines cellules sont anormalement larges, ce qui peut indiquer des difficultés à lire votre fichier:"}}}},it:{row:{raggedRows:{t:0,b:{t:2,i:[{t:3}],s:"In alcune righe sono state trovate meno colonne del previsto:"}},largeCell:{t:0,b:{t:2,i:[{t:3}],s:"Alcune celle sono eccessivamente grandi, il che può indicare difficoltà nella lettura del file:"}}}},pt:{row:{raggedRows:{t:0,b:{t:2,i:[{t:3}],s:"Menos colunas foram encontradas do que o esperado em algumas linhas:"}},largeCell:{t:0,b:{t:2,i:[{t:3}],s:"Algumas células são anormalmente grandes, o que pode indicar dificuldades na leitura do seu arquivo:"}}}},"zh-Hant":{row:{raggedRows:{t:0,b:{t:2,i:[{t:3}],s:"在某些行中發現的列數少於預期："}},largeCell:{t:0,b:{t:2,i:[{t:3}],s:"有些儲存格異常大，這可能表示讀取檔案有困難："}}}}}})}const xn={id:"entity-upload-warnings"},Ke=Object.assign({name:"EntityUploadWarnings"},{__name:"warnings",props:{raggedRows:Array,largeCell:Number},emits:["rows"],setup(i){return(n,o)=>(S(),j("div",xn,[i.raggedRows!=null?(S(),re(ft,{key:0,ranges:i.raggedRows,onRows:o[0]||(o[0]=d=>n.$emit("rows",d))},{default:de(()=>[se(q(n.$t("row.raggedRows")),1)]),_:1},8,["ranges"])):Z("",!0),i.largeCell!=null?(S(),re(ft,{key:1,ranges:[[i.largeCell,i.largeCell]],onRows:o[1]||(o[1]=d=>n.$emit("rows",d))},{default:de(()=>[se(q(n.$t("row.largeCell")),1)]),_:1},8,["ranges"])):Z("",!0)]))}});typeof gt=="function"&&gt(Ke);typeof mt=="function"&&mt(Ke);function bt(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{en:{title:{t:0,b:{t:2,i:[{t:3}],s:"Import Data from File"}},table:{server:{t:0,b:{t:2,i:[{t:4,k:"name"},{t:3,v:" server data"}]}},file:{t:0,b:{t:2,i:[{t:3}],s:"Data to import"}}},noEntities:{t:0,b:{t:2,i:[{t:3}],s:"There are no Entities to show."}},action:{append:{t:0,b:{t:2,i:[{t:3}],s:"Append data"}}},alert:{blankLabel:{t:0,b:{t:2,i:[{t:3}],s:"Missing label."}},noData:{t:0,b:{t:2,i:[{t:3}],s:"Your file does not contain any data."}}}}}})}function vt(i){const n=i;n.__i18n=n.__i18n||[],n.__i18n.push({locale:"",resource:{cs:{noEntities:{t:0,b:{t:2,i:[{t:3}],s:"Nejsou zde žádné subjekty, které by bylo možné zobrazit."}}},de:{title:{t:0,b:{t:2,i:[{t:3}],s:"Daten aus Datei importieren"}},table:{server:{t:0,b:{t:2,i:[{t:4,k:"name"},{t:3,v:" Serverdaten"}]}},file:{t:0,b:{t:2,i:[{t:3}],s:"Zu importierende Daten"}}},action:{append:{t:0,b:{t:2,i:[{t:3}],s:"Daten hinzufügen"}}},alert:{noData:{t:0,b:{t:2,i:[{t:3}],s:"Ihre Datei enthält keine Daten."}}},noEntities:{t:0,b:{t:2,i:[{t:3}],s:"Es gibt keine Entitäten zum Anzeigen."}}},es:{title:{t:0,b:{t:2,i:[{t:3}],s:"Importar datos de un archivo"}},table:{server:{t:0,b:{t:2,i:[{t:4,k:"name"},{t:3,v:" datos del servidor"}]}},file:{t:0,b:{t:2,i:[{t:3}],s:"Datos a importar"}}},action:{append:{t:0,b:{t:2,i:[{t:3}],s:"Añadir datos"}}},alert:{blankLabel:{t:0,b:{t:2,i:[{t:3}],s:"Falta la etiqueta."}},noData:{t:0,b:{t:2,i:[{t:3}],s:"Su archivo no contiene ningún dato."}}},noEntities:{t:0,b:{t:2,i:[{t:3}],s:"No hay Entidades para mostrar."}}},fr:{title:{t:0,b:{t:2,i:[{t:3}],s:"Importer des données depuis un fichier"}},table:{server:{t:0,b:{t:2,i:[{t:4,k:"name"},{t:3,v:" : données du serveur"}]}},file:{t:0,b:{t:2,i:[{t:3}],s:"Données à importer"}}},action:{append:{t:0,b:{t:2,i:[{t:3}],s:"Ajouter les données"}}},alert:{blankLabel:{t:0,b:{t:2,i:[{t:3}],s:"Étiquette manquante."}},noData:{t:0,b:{t:2,i:[{t:3}],s:"Votre fichier ne contient aucune donnée"}}},noEntities:{t:0,b:{t:2,i:[{t:3}],s:"Pas d'entités à montrer."}}},it:{title:{t:0,b:{t:2,i:[{t:3}],s:"Importa Dati da File"}},table:{server:{t:0,b:{t:2,i:[{t:4,k:"name"},{t:3,v:" dati del server"}]}},file:{t:0,b:{t:2,i:[{t:3}],s:"Dati da importare"}}},action:{append:{t:0,b:{t:2,i:[{t:3}],s:"Aggiungi dati"}}},alert:{blankLabel:{t:0,b:{t:2,i:[{t:3}],s:"Etichetta mancante"}},noData:{t:0,b:{t:2,i:[{t:3}],s:"Il tuo file non contiene alcun dato."}}},noEntities:{t:0,b:{t:2,i:[{t:3}],s:"Non ci sono entità da mostrare."}}},pt:{title:{t:0,b:{t:2,i:[{t:3}],s:"Importar dados de arquivo"}},table:{server:{t:0,b:{t:2,i:[{t:3,v:"Dados do servidor "},{t:4,k:"name"}]}},file:{t:0,b:{t:2,i:[{t:3}],s:"Dados para importar"}}},action:{append:{t:0,b:{t:2,i:[{t:3}],s:"Anexar dados"}}},alert:{noData:{t:0,b:{t:2,i:[{t:3}],s:"Seu arquivo não contém dados."}}},noEntities:{t:0,b:{t:2,i:[{t:3}],s:"Não há Entidades para mostrar."}}},sw:{noEntities:{t:0,b:{t:2,i:[{t:3}],s:"Hakuna Fomu za kuonyesha."}}},"zh-Hant":{title:{t:0,b:{t:2,i:[{t:3}],s:"從文件匯入數據"}},table:{server:{t:0,b:{t:2,i:[{t:4,k:"name"},{t:3,v:" 伺服器數據"}]}},file:{t:0,b:{t:2,i:[{t:3}],s:"要導入的資料"}}},action:{append:{t:0,b:{t:2,i:[{t:3}],s:"追加資料"}}},alert:{blankLabel:{t:0,b:{t:2,i:[{t:3}],s:"標籤遺失。"}},noData:{t:0,b:{t:2,i:[{t:3}],s:"您的文件不包含任何資料。"}}},noEntities:{t:0,b:{t:2,i:[{t:3}],s:"沒有可顯示的實體。"}}}}})}const Ln={class:"panel panel-simple"},qn={class:"panel-heading"},An={class:"panel-title"},Tn={class:"panel-body"},In={key:0,class:"empty-table-message"},Pn={class:"panel panel-simple"},Fn={class:"panel-heading"},Un={class:"panel-title"},jn={class:"panel-body"},Nn=["aria-disabled"],Hn=["aria-disabled"],Rt=Object.assign({name:"EntityUpload"},{__name:"upload",props:{state:Boolean},emits:["hide","success"],setup(i,{emit:n}){const o=i,d=n,{dataset:h,createResource:f}=Te(),p=[5,10,20,50],x=p[0],z=f("serverEntities",()=>({transformResponse:({data:a})=>({value:a.value.map(c=>Tt(c,h.properties).currentVersion),count:a["@odata.count"]})})),r=Je({count:0,page:-1,size:x});let A;const L=ge(-1);ue(()=>o.state,a=>{a?h.entities!==0?(r.page=0,A=`__system/createdAt le ${new Date().toISOString()}`):z.data={value:[]}:(z.reset(),Object.assign(r,{count:0,page:-1,size:x}),A=null,L.value=-1)}),ue([()=>r.page,()=>r.size],()=>{const{count:a,page:c,size:w}=r;if(c===-1)return;const l=a===0;z.request({url:Ye.odataEntities(h.projectId,h.name,{$filter:A,$orderby:"__system/createdAt asc",$top:w,$skip:c*w,$count:l}),clear:!1}).then(()=>{l&&(r.count=z.count),L.value=c*w}).catch(ve)});const E=Oe(null),y=Oe(null),H=Oe(null),T=ge(null),V=Oe(null),we=ge(!1);let ke=ve;const xe=({columns:a,errors:c,meta:w},l)=>{const O={};if(c.length!==0)O.invalidQuotes=c.some(({type:U})=>U==="Quotes");else{const U=new Set;for(const k of a)/^\s*$/.test(k)?O.emptyColumn=!0:U.has(k)?O.duplicateColumn=!0:U.add(k);const I=U.has("label");O.missingLabel=!I;const P=h.properties.reduce((k,{name:ae})=>U.has(ae)?k+1:k,0);O.missingProperty=P!==h.properties.length,O.unknownProperty=U.size!==P+(I?1:0)}return Object.values(O).includes(!0)?(H.value={filename:l.name,header:St(a,{delimiter:w.delimiter}),delimiter:w.delimiter,...O},!1):!0},{t:Re}=yt(),ze={toJSON:()=>{}},ce=(a,c)=>{const w=Object.create(null);let l=!1;for(const[U,I]of a.entries()){if(I==="")continue;const P=c[U];w[P]=I,P!=="label"&&(l=!0)}const{label:O}=w;if(O==null||/^\s+$/.test(O))throw new Error(Re("alert.blankLabel"));return l?(delete w.label,{label:O,data:w}):(w.data=ze,w)},{i18n:F,redAlert:e}=It("container"),t=async(a,c,w)=>{const l=await un(F,a,c.columns,{delimiter:c.meta.delimiter,transformRow:ce,signal:w});if(l.data.length===0)throw new Error(Re("alert.noData"));E.value=l.data,y.value={name:a.name,size:a.size},V.value=l.warnings},s=a=>{e.hide(),H.value=null,T.value=null;const c=new AbortController;ke=()=>{c.abort()};const{signal:w}=c;return we.value=!0,rn(F,a,w).catch(l=>{throw w.aborted||e.show(l.message),l}).then(l=>xe(l,a)?t(a,l,w).catch(O=>{throw w.aborted||(T.value=O.message),O}):Promise.resolve()).finally(()=>{we.value=!1,ke=ve}).catch(ve)},g=()=>{E.value=null,y.value=null,V.value=null};ue(()=>o.state,a=>{a||(ke(),E.value=null,y.value=null,H.value=null,T.value=null,V.value=null)}),Pt(()=>{ke()});const u=Je({page:0,size:x}),C=_e(()=>E.value!=null?u.page*u.size:-1),Q=_e(()=>E.value!=null?E.value.slice(C.value,C.value+u.size):null);ue(E,a=>{a==null&&Object.assign(u,{page:0,size:x})});const Y=Oe(null),ne=a=>{u.page=Math.floor(a[0]/u.size),Y.value=a};ue(E,a=>{a==null&&(Y.value=null)});const{request:$,awaitingResponse:N}=Qt(),v=ge(0),G=()=>{$({method:"POST",url:Ye.entities(h.projectId,h.name),data:{source:y.value,entities:E.value},onUploadProgress:a=>{v.value=a.progress??0}}).then(()=>{d("success",E.value.length)}).finally(()=>{v.value=0}).catch(ve)},_=ge(!1),D=a=>{_.value=a};ue(E,a=>{a==null&&(_.value=!1)});const m=[null,null],W=a=>c=>{m[a]=c},B=()=>{for(const a of m)a.resizeLastColumn()};ue(_,a=>{a||B()}),ue(()=>o.state,a=>{a||Ue(B)});const K=()=>{o.state&&!_.value&&B()};Ft(window,"resize",K);const ee=ge(null);return ue(E,a=>{a!=null&&Ue(()=>{ee.value.scrollIntoView()})}),ue(()=>o.state,a=>{if(!a)for(const c of m)c.resetScroll()}),(a,c)=>{const w=Ie("tooltip");return S(),re(Wt,{id:"entity-upload",state:i.state,hideable:!te(N),size:"full",backdrop:"",onHide:c[7]||(c[7]=l=>a.$emit("hide")),onMutate:K},{title:de(()=>[se(q(a.$t("title")),1)]),body:de(()=>[b("div",{class:ye({backdrop:te(N)})},[b("div",Ln,[b("div",qn,[le((S(),j("h1",An,[se(q(a.$t("table.server",te(h))),1)])),[[w,void 0,void 0,{text:!0}]])]),b("div",Tn,[oe(ht,{ref:W(0),entities:te(z).value,"row-index":L.value,"page-size":r.size,"awaiting-response":te(z).awaitingResponse},null,8,["entities","row-index","page-size","awaiting-response"]),oe(Ut,{state:te(z).initiallyLoading},null,8,["state"]),te(z).dataExists&&te(z).value.length===0?(S(),j("p",In,q(a.$t("noEntities")),1)):Z("",!0),r.count!==0?(S(),re(Xe,{key:1,page:r.page,"onUpdate:page":c[0]||(c[0]=l=>r.page=l),size:r.size,"onUpdate:size":c[1]||(c[1]=l=>r.size=l),count:r.count,"size-options":p,spinner:te(z).awaitingResponse},null,8,["page","size","count","spinner"])):Z("",!0)])]),b("div",Pn,[b("div",Fn,[b("h1",Un,q(a.$t("table.file")),1)]),b("div",jn,[V.value!=null&&V.value.count!==0?(S(),re(Ke,jt({key:0},V.value.details,{onRows:ne}),null,16)):Z("",!0),oe(ht,{ref:W(1),entities:Q.value,"row-index":C.value,"page-size":u.size,highlighted:Y.value},null,8,["entities","row-index","page-size","highlighted"]),E.value!=null?(S(),re(Xe,{key:1,page:u.page,"onUpdate:page":c[2]||(c[2]=l=>u.page=l),size:u.size,"onUpdate:size":c[3]||(c[3]=l=>u.size=l),count:E.value.length,"size-options":p},null,8,["page","size","count"])):Z("",!0)])]),le(oe(He,{parsing:we.value,onChange:s},{default:de(()=>[oe(We,{errors:H.value},null,8,["errors"]),T.value!=null?(S(),re(Ne,{key:0,message:T.value},null,8,["message"])):Z("",!0)]),_:1},8,["parsing"]),[[Se,E.value==null]])],2),E.value!=null?(S(),re(Qe,{key:0,filename:y.value.name,count:E.value.length,warnings:V.value.count,"awaiting-response":te(N),progress:v.value,onClear:g,onAnimationstart:c[4]||(c[4]=l=>D(!0)),onAnimationend:c[5]||(c[5]=l=>D(!1))},null,8,["filename","count","warnings","awaiting-response","progress"])):Z("",!0),b("div",{ref_key:"actions",ref:ee,class:"modal-actions"},[b("button",{type:"button",class:"btn btn-link","aria-disabled":te(N),onClick:c[6]||(c[6]=l=>a.$emit("hide"))},q(a.$t("action.cancel")),9,Nn),b("button",{type:"button",class:"btn btn-primary","aria-disabled":E.value==null||te(N),onClick:G},q(a.$t("action.append")),9,Hn)],512)]),_:1},8,["state","hideable"])}}});typeof bt=="function"&&bt(Rt);typeof vt=="function"&&vt(Rt);export{Rt as default};
