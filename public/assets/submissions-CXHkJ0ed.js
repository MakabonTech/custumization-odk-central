import{D as j,S as G}from"./datetime-3JD3bssD.js";import{ay as It,az as Et,_ as q,b as jt,a3 as xt,aA as Pt,D as C,u as A,aB as Nt,r as g,l as x,g as T,o as l,i as F,d as n,q as S,w as W,c as u,p as f,t as d,k as V,f as y,T as N,F as I,e as k,C as B,v as E,H,G as Bt,aC as Z,K as At,h as O,J as U,A as J,W as Ht,j as Ct,a as Y,z as Ut,U as Lt,V as Gt,L as Kt,n as $,Y as L,P,am as Qt,aD as dt,Z as K,av as Wt}from"./index-BJJ6YbMy.js";import{E as Zt}from"./fill-jYfh2lBR.js";import{_ as X,a as Jt}from"./odata-loading-message-C4DiRpoY.js";import{_ as Mt,a as Yt}from"./modal-BMSEXbZM.js";import{D as Xt}from"./date-range-picker-1tVSoL2V.js";import{u as Vt}from"./review-state-DuiKQZfx.js";import{f as te,a as ee,b as se,D as ie}from"./date-time-CEONMtaY.js";import{_ as ne}from"./review-state-m1o3bY3s.js";import{_ as oe}from"./freeze-CDRjGwqt.js";import{u as ae}from"./chunky-array-CH9f7RmW.js";import{S as le,_ as re,u as de}from"./fields-BTJfkXdT.js";import{_ as ue}from"./pagination-DLInApQo.js";import{u as Q}from"./query-ref-D9qdbv9b.js";import{u as ce}from"./request--gXHIWga.js";const me=Number.isInteger||function(t){return t<<0===t};var be=It(function(t,s){return t.map(function(a){for(var i=s,o=0,r;o<a.length;){if(i==null)return;r=a[o],i=me(r)?Et(r,i):i[r],o+=1}return i})}),pe=It(function(t,s){return be([t],s)[0]});function ut(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{title:{t:0,b:{t:2,i:[{t:3}],s:"Download Submissions"}},exportOptions:{t:0,b:{t:2,i:[{t:3}],s:"Export options"}},field:{splitSelectMultiples:{t:0,b:{t:2,i:[{t:3}],s:"Split “select multiple” choices into columns"}},removeGroupNames:{t:0,b:{t:2,i:[{t:3}],s:"Remove group names"}},deletedFields:{t:0,b:{t:2,i:[{t:3}],s:"Include fields not in the published Form"}}},deletedFieldsHelp:{t:0,b:{t:2,i:[{t:3}],s:"Use this option if you need to see fields referenced in previous Form versions."}},noSelectMultiple:{t:0,b:{t:2,i:[{t:3}],s:"This Form does not have any select multiple fields."}},encryptedForm:{t:0,b:{t:2,i:[{t:3}],s:"Encrypted Forms cannot be processed in this way."}},deletedFieldsDisabledForDraft:{t:0,b:{t:2,i:[{t:3}],s:"Draft Forms cannot be processed in this way."}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"In order to download this data, you will need to provide your passphrase. Your passphrase will be used only to decrypt your data for download, after which the server will forget it again."}}],hint:{t:0,b:{t:2,i:[{t:3,v:"Hint: "},{t:4,k:"hint"}]}},noRepeat:{t:0,b:{t:2,i:[{t:3}],s:"This Form does not have repeats."}},action:{download:{mainTable:{t:0,b:{t:2,i:[{t:3}],s:"Main data table (no repeats)"}},allTables:{t:0,b:{t:2,i:[{t:3}],s:"All data tables"}},withAttachments:{t:0,b:{t:2,i:[{t:3}],s:"All data and Attachments"}}}},alert:{unavailable:{t:0,b:{t:2,i:[{t:3}],s:"The data download is not yet available. Please try again in a moment."}},submit:{t:0,b:{t:2,i:[{t:3}],s:"Data download should begin soon. Once it begins, you can close this message. If it hasn’t started in 20 seconds, please try again."}},parseError:{t:0,b:{t:2,i:[{t:3}],s:"Something went wrong while requesting your data."}}}}}})}function ct(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{cs:{title:{t:0,b:{t:2,i:[{t:3}],s:"Stáhnout příspěvky"}},exportOptions:{t:0,b:{t:2,i:[{t:3}],s:"Možnosti exportu"}},field:{splitSelectMultiples:{t:0,b:{t:2,i:[{t:3}],s:'Rozdělení možností "vybrat více" do sloupců'}},removeGroupNames:{t:0,b:{t:2,i:[{t:3}],s:"Odstranění názvů skupin"}},deletedFields:{t:0,b:{t:2,i:[{t:3}],s:"Zahrnout pole, která nejsou ve zveřejněném formuláři"}}},deletedFieldsHelp:{t:0,b:{t:2,i:[{t:3}],s:"Tuto možnost použijte, pokud potřebujete zobrazit pole odkazovaná v předchozích verzích formuláře."}},noSelectMultiple:{t:0,b:{t:2,i:[{t:3}],s:"Tento formulář nemá žádná pole pro výběr více položek."}},encryptedForm:{t:0,b:{t:2,i:[{t:3}],s:"Šifrované formuláře nelze tímto způsobem zpracovávat."}},deletedFieldsDisabledForDraft:{t:0,b:{t:2,i:[{t:3}],s:"Návrhy formulářů nelze tímto způsobem zpracovávat."}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Abyste mohli tato data stáhnout, budete muset zadat vaše přístupové heslo. Vaše přístupové heslo bude použito pouze k dešifrování vašich dat ke stažení, a poté ho server znovu zapomene."}}],hint:{t:0,b:{t:2,i:[{t:3,v:"Nápověda: "},{t:4,k:"hint"}]}},noRepeat:{t:0,b:{t:2,i:[{t:3}],s:"Tento formulář nemá opakování."}},action:{download:{mainTable:{t:0,b:{t:2,i:[{t:3}],s:"Hlavní datová tabulka (bez opakování)"}},allTables:{t:0,b:{t:2,i:[{t:3}],s:"Všechny datové tabulky"}},withAttachments:{t:0,b:{t:2,i:[{t:3}],s:"Všechna data a přílohy"}}}},alert:{unavailable:{t:0,b:{t:2,i:[{t:3}],s:"Data ke stažení zatím nejsou k dispozici. Zkuste to prosím za chvíli znovu."}},parseError:{t:0,b:{t:2,i:[{t:3}],s:"Při vyžádání vašich dat se něco pokazilo."}}}},de:{title:{t:0,b:{t:2,i:[{t:3}],s:"Übermittlungen downloaden"}},exportOptions:{t:0,b:{t:2,i:[{t:3}],s:"Exportoptionen"}},field:{splitSelectMultiples:{t:0,b:{t:2,i:[{t:3}],s:"Unterteilen Sie „mehrere auswählen“-Optionen in Spalten"}},removeGroupNames:{t:0,b:{t:2,i:[{t:3}],s:"Gruppennamen entfernen"}},deletedFields:{t:0,b:{t:2,i:[{t:3}],s:"Felder einschließen, die nicht in der veröffentlichten Version des Formulars enthalten sind"}}},deletedFieldsHelp:{t:0,b:{t:2,i:[{t:3}],s:"Verwenden Sie diese Option, um Felder aus früheren Versionen des Formulars anzuzeigen."}},noSelectMultiple:{t:0,b:{t:2,i:[{t:3}],s:"Dieses Formular enthält keine Mehrfachauswahlfelder."}},encryptedForm:{t:0,b:{t:2,i:[{t:3}],s:"Verschlüsselte Formulare können auf diese Weise nicht verarbeitet werden."}},deletedFieldsDisabledForDraft:{t:0,b:{t:2,i:[{t:3}],s:"Formularentwürfe können auf diese Weise nicht bearbeitet werden."}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Um die Daten herunterzuladen wird Ihre Passphrase benötigt. Diese wird nur zum Entschlüsseln der Daten für den Download benutzt und nicht gespeichert."}}],hint:{t:0,b:{t:2,i:[{t:3,v:"Hinweis: "},{t:4,k:"hint"}]}},noRepeat:{t:0,b:{t:2,i:[{t:3}],s:"Diese Form hat keine repeats."}},action:{download:{mainTable:{t:0,b:{t:2,i:[{t:3}],s:"Hauptdatentabelle (keine repeats)"}},allTables:{t:0,b:{t:2,i:[{t:3}],s:"Alle Datentabellen"}},withAttachments:{t:0,b:{t:2,i:[{t:3}],s:"Alle Daten und Anhänge"}}}},alert:{unavailable:{t:0,b:{t:2,i:[{t:3}],s:"Der Datendownload ist noch nicht verfügbar. Bitte versuchen Sie es gleich noch einmal."}},parseError:{t:0,b:{t:2,i:[{t:3}],s:"Beim Anfordern Ihrer Daten ist etwas nicht geklappt."}}}},es:{title:{t:0,b:{t:2,i:[{t:3}],s:"Descargar datos enviados"}},exportOptions:{t:0,b:{t:2,i:[{t:3}],s:"Opciones de exportación"}},field:{splitSelectMultiples:{t:0,b:{t:2,i:[{t:3}],s:'Divida las opciones de "selección múltiple" en columnas'}},removeGroupNames:{t:0,b:{t:2,i:[{t:3}],s:"Eliminar nombres de grupos"}},deletedFields:{t:0,b:{t:2,i:[{t:3}],s:"Incluir campos que no están en el Formulario publicado."}}},deletedFieldsHelp:{t:0,b:{t:2,i:[{t:3}],s:"Utilice esta opción si necesita ver los campos a los que se hace referencia en versiones anteriores del formulario."}},noSelectMultiple:{t:0,b:{t:2,i:[{t:3}],s:"Este formulario no tiene ningún campo de selección múltiple."}},encryptedForm:{t:0,b:{t:2,i:[{t:3}],s:"Los formularios cifrados no se pueden procesar de esta manera."}},deletedFieldsDisabledForDraft:{t:0,b:{t:2,i:[{t:3}],s:"Los borradores no se pueden procesar de esta manera."}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Para descargar la información, usted necesitará ingresar su contraseña. Su contraseña se usará para desencriptar la información descargada, al finalizar el proceso el servidor la olvidará."}}],hint:{t:0,b:{t:2,i:[{t:3,v:"Pista: "},{t:4,k:"hint"}]}},noRepeat:{t:0,b:{t:2,i:[{t:3}],s:"Este formulario no tiene campos repetidos."}},action:{download:{mainTable:{t:0,b:{t:2,i:[{t:3}],s:"Tabla de datos principal (sin repeticiones)"}},allTables:{t:0,b:{t:2,i:[{t:3}],s:"Todas las tablas de datos"}},withAttachments:{t:0,b:{t:2,i:[{t:3}],s:"Todos los datos y archivos adjuntos"}}}},alert:{unavailable:{t:0,b:{t:2,i:[{t:3}],s:"La descarga de datos aún no está disponible. Vuelva a intentarlo en un momento."}},submit:{t:0,b:{t:2,i:[{t:3}],s:"Su descarga de datos debería comenzar en breve. Una vez que inicie, puede cerrar este mensaje. Si no se ha comenzado en 20 segundos, por favor inténtelo nuevamente."}},parseError:{t:0,b:{t:2,i:[{t:3}],s:"Algo salió mal al solicitar tus datos."}}}},fr:{title:{t:0,b:{t:2,i:[{t:3}],s:"Télécharger les soumissions"}},exportOptions:{t:0,b:{t:2,i:[{t:3}],s:"Options d'exportation"}},field:{splitSelectMultiples:{t:0,b:{t:2,i:[{t:3}],s:"Séparer le contenu des questions à choix multiples en plusieurs colonnes."}},removeGroupNames:{t:0,b:{t:2,i:[{t:3}],s:"Supprimer les noms de groupe"}},deletedFields:{t:0,b:{t:2,i:[{t:3}],s:"Inclut les champs qui ne sont pas dans le formulaire publié"}}},deletedFieldsHelp:{t:0,b:{t:2,i:[{t:3}],s:"Utilisez cette option si vous avez besoin de champs référencés dans les versions précédentes du formulaire"}},noSelectMultiple:{t:0,b:{t:2,i:[{t:3}],s:'Ce formulaire ne contient aucun champ à choix multiples (de type "select_multiple").'}},encryptedForm:{t:0,b:{t:2,i:[{t:3}],s:"Les formulaires chiffrés ne peuvent être traités de cette manière."}},deletedFieldsDisabledForDraft:{t:0,b:{t:2,i:[{t:3}],s:"Les ébauches de formulaires ne peuvent être utilisées comme cela."}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Pour télécharger ces données, vous devrez fournir votre phrase secrète. Votre phrase secrète sera utilisée uniquement pour déchiffrer vos données pour le téléchargement, après quoi le serveur l'oubliera à nouveau"}}],hint:{t:0,b:{t:2,i:[{t:3,v:"Indice : "},{t:4,k:"hint"}]}},noRepeat:{t:0,b:{t:2,i:[{t:3}],s:'Ce formulaire ne contient pas de structures "repeat"'}},action:{download:{mainTable:{t:0,b:{t:2,i:[{t:3}],s:'Principale table de données (sans "repeats")'}},allTables:{t:0,b:{t:2,i:[{t:3}],s:"Toutes les tables de données"}},withAttachments:{t:0,b:{t:2,i:[{t:3}],s:"Toutes données et fichiers joints"}}}},alert:{unavailable:{t:0,b:{t:2,i:[{t:3}],s:"Le téléchargement des données n'est pas encore disponible. Merci de réessayer dans un moment."}},submit:{t:0,b:{t:2,i:[{t:3}],s:"Le téléchargement de vos données devrait commencer bientôt. Une fois qu'il aura commencé, vous pourrez fermer ce message. Si vous avez attendu et le téléchargement n'a pas commencé, veuillez réessayer."}},parseError:{t:0,b:{t:2,i:[{t:3}],s:"Quelque chose s'est mal passé pendant la requête de vos données"}}}},id:{exportOptions:{t:0,b:{t:2,i:[{t:3}],s:"Opsi Ekspor"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Untuk mengunduh data ini, Anda harus menyediakan frasa sandi. Frasa sandi hanya akan digunakan untuk mendekripsi data anda untuk diunduh, dan akan terhapus dari server setelahnya."}}],hint:{t:0,b:{t:2,i:[{t:3,v:"Petunjuk: "},{t:4,k:"hint"}]}},noRepeat:{t:0,b:{t:2,i:[{t:3}],s:"Formulir ini tidak memiliki pengulangan."}},action:{download:{mainTable:{t:0,b:{t:2,i:[{t:3}],s:"Tabel data utama (tanpa pengulangan)"}}}}},it:{title:{t:0,b:{t:2,i:[{t:3}],s:"Scarica invii"}},exportOptions:{t:0,b:{t:2,i:[{t:3}],s:"Opzioni di esportazione"}},field:{splitSelectMultiples:{t:0,b:{t:2,i:[{t:3}],s:'Dividi le scelte "select multiple" in colonne'}},removeGroupNames:{t:0,b:{t:2,i:[{t:3}],s:"Rimuovi i nomi dei gruppi"}},deletedFields:{t:0,b:{t:2,i:[{t:3}],s:"Includere i campi non nel formulario pubblicato"}}},deletedFieldsHelp:{t:0,b:{t:2,i:[{t:3}],s:"Utilizzare questa opzione se è necessario visualizzare i campi a cui si fa riferimento nelle versioni precedenti del formulario."}},noSelectMultiple:{t:0,b:{t:2,i:[{t:3}],s:"Questo formulario non ha campi a scelta multipla selezionati."}},encryptedForm:{t:0,b:{t:2,i:[{t:3}],s:"I moduli crittografati non possono essere elaborati in questo modo."}},deletedFieldsDisabledForDraft:{t:0,b:{t:2,i:[{t:3}],s:"Le bozze non possono essere elaborate in questo modo."}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Per scaricare questi dati, dovrai fornire la tua passphrase. La tua passphrase verrà utilizzata solo per decifrare i tuoi dati per il download, dopodiché il server la cancellerà."}}],hint:{t:0,b:{t:2,i:[{t:3,v:"Suggerimento: "},{t:4,k:"hint"}]}},noRepeat:{t:0,b:{t:2,i:[{t:3}],s:"Questo formulario non ha repeats."}},action:{download:{mainTable:{t:0,b:{t:2,i:[{t:3}],s:"Tabella dati principale (no repeats)"}},allTables:{t:0,b:{t:2,i:[{t:3}],s:"Tutte le tabelle di dati"}},withAttachments:{t:0,b:{t:2,i:[{t:3}],s:"Tutti i dati e gli allegati"}}}},alert:{unavailable:{t:0,b:{t:2,i:[{t:3}],s:"Il download dei dati non è ancora disponibile. Si prega di riprovare in un altro momento."}},submit:{t:0,b:{t:2,i:[{t:3}],s:"Il download dei dati dovrebbe iniziare a breve. Una volta iniziato, puoi chiudere questo messaggio. Se non è iniziato in 20 secondi, riprova."}},parseError:{t:0,b:{t:2,i:[{t:3}],s:"Qualcosa è andato storto durante la richiesta dei tuoi dati"}}}},ja:{title:{t:0,b:{t:2,i:[{t:3}],s:"提出済フォームをダウンロードする"}},exportOptions:{t:0,b:{t:2,i:[{t:3}],s:"エクスポート設定"}},field:{splitSelectMultiples:{t:0,b:{t:2,i:[{t:3}],s:"複数選択項目を列に切り分ける。"}},removeGroupNames:{t:0,b:{t:2,i:[{t:3}],s:"グループ名を取り除く"}}},noSelectMultiple:{t:0,b:{t:2,i:[{t:3}],s:"このフォームには複数選択項目がありません。"}},encryptedForm:{t:0,b:{t:2,i:[{t:3}],s:"この方法でフォームの暗号化は行えません。"}},deletedFieldsDisabledForDraft:{t:0,b:{t:2,i:[{t:3}],s:"この方法で下書きの処理は行えません。"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"このデータをダウンロードするためには、パスフレーズを入力する必要があります。パスフレーズは、データをダウンロードする際の復号時にのみ使用され、その後、サーバーはパスフレーズを保持しません。"}}],hint:{t:0,b:{t:2,i:[{t:3,v:"ヒント："},{t:4,k:"hint"}]}},noRepeat:{t:0,b:{t:2,i:[{t:3}],s:"このフォームはリピート項目がありません。"}},action:{download:{mainTable:{t:0,b:{t:2,i:[{t:3}],s:"主なデータ（リピートを含まない）"}},allTables:{t:0,b:{t:2,i:[{t:3}],s:"全てのデータ"}}}},alert:{unavailable:{t:0,b:{t:2,i:[{t:3}],s:"データのダウンロードはまだ利用できません。しばらく待って、再試行してください。"}}}},pt:{title:{t:0,b:{t:2,i:[{t:3}],s:"Baixar Respostas"}},exportOptions:{t:0,b:{t:2,i:[{t:3}],s:"Opções de exportação"}},field:{splitSelectMultiples:{t:0,b:{t:2,i:[{t:3}],s:"Dividir opções de “selecionar várias” em colunas"}},removeGroupNames:{t:0,b:{t:2,i:[{t:3}],s:"Remover nomes de grupos"}},deletedFields:{t:0,b:{t:2,i:[{t:3}],s:"Incluir campos que não estão no Formulário publicado"}}},deletedFieldsHelp:{t:0,b:{t:2,i:[{t:3}],s:"Use esta opção se precisar ver campos referenciados em versões anteriores do Formulário."}},noSelectMultiple:{t:0,b:{t:2,i:[{t:3}],s:"Este Formulário não tem campos de seleção múltiplos."}},encryptedForm:{t:0,b:{t:2,i:[{t:3}],s:"Formulários encriptados não podem ser processados dessa forma."}},deletedFieldsDisabledForDraft:{t:0,b:{t:2,i:[{t:3}],s:"Formulários de rascunho não podem ser processados dessa forma."}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Para baixar esses dados, você precisará fornecer sua senha. Sua senha será usada apenas para descriptografar seus dados para download, após o qual o servidor irá esquecê-la novamente."}}],hint:{t:0,b:{t:2,i:[{t:3,v:"Dica: "},{t:4,k:"hint"}]}},noRepeat:{t:0,b:{t:2,i:[{t:3}],s:"Este Formulário não tem repetições."}},action:{download:{mainTable:{t:0,b:{t:2,i:[{t:3}],s:"Tabela de dados principal (sem repetições)"}},allTables:{t:0,b:{t:2,i:[{t:3}],s:"Todas as tabelas de dados"}},withAttachments:{t:0,b:{t:2,i:[{t:3}],s:"Todos os dados e Anexos"}}}},alert:{unavailable:{t:0,b:{t:2,i:[{t:3}],s:"O download de dados ainda não está disponível. Tente novamente em instantes."}},parseError:{t:0,b:{t:2,i:[{t:3}],s:"Algo deu errado ao solicitar seus dados."}}}},sw:{title:{t:0,b:{t:2,i:[{t:3}],s:"Pakua Mawasilisho"}},exportOptions:{t:0,b:{t:2,i:[{t:3}],s:"Chaguzi za export"}},field:{splitSelectMultiples:{t:0,b:{t:2,i:[{t:3}],s:'Gawanya chaguo za "chagua nyingi" kwenye safu wima'}},removeGroupNames:{t:0,b:{t:2,i:[{t:3}],s:"Ondoa majina ya kikundi"}},deletedFields:{t:0,b:{t:2,i:[{t:3}],s:"Jumuisha sehemu zisizo katika Fomu iliyochapishwa"}}},deletedFieldsHelp:{t:0,b:{t:2,i:[{t:3}],s:"Tumia chaguo hili ikiwa unahitaji kuona sehemu zilizorejelewa katika matoleo ya awali ya Fomu."}},noSelectMultiple:{t:0,b:{t:2,i:[{t:3}],s:"Fomu hii haina sehemu nyingi zilizochaguliwa"}},encryptedForm:{t:0,b:{t:2,i:[{t:3}],s:"Fomu Zilizosimbwa kwa njia fiche haziwezi kuchakatwa kwa njia hii"}},deletedFieldsDisabledForDraft:{t:0,b:{t:2,i:[{t:3}],s:"Rasimu za Fomu haziwezi kuchakatwa kwa njia hii."}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Ili kupakua data hii, utahitaji kutoa neno lako la siri. Kauli yako ya siri itatumika tu kusimbua data yako kwa ajili ya kupakua, na kisha seva itaisahau tena."}}],hint:{t:0,b:{t:2,i:[{t:3,v:"Kidokezo: "},{t:4,k:"hint"}]}},noRepeat:{t:0,b:{t:2,i:[{t:3}],s:"Fomu hii haina marudio"}},action:{download:{mainTable:{t:0,b:{t:2,i:[{t:3}],s:"Jedwali kuu la data (hakuna marudio)"}},allTables:{t:0,b:{t:2,i:[{t:3}],s:"Jedwali zote za data"}},withAttachments:{t:0,b:{t:2,i:[{t:3}],s:"Data na Viambatisho vyote"}}}},alert:{unavailable:{t:0,b:{t:2,i:[{t:3}],s:"Upakuaji wa data bado haupatikani. Tafadhali jaribu tena baada ya muda mfupi"}},parseError:{t:0,b:{t:2,i:[{t:3}],s:"Hitilafu fulani imetokea wakati wa kuomba data yako."}}}},"zh-Hant":{title:{t:0,b:{t:2,i:[{t:3}],s:"下載提交資料"}},exportOptions:{t:0,b:{t:2,i:[{t:3}],s:"匯出選項"}},field:{splitSelectMultiples:{t:0,b:{t:2,i:[{t:3}],s:"將「選擇多個」選項拆分為列"}},removeGroupNames:{t:0,b:{t:2,i:[{t:3}],s:"刪除群組名稱"}},deletedFields:{t:0,b:{t:2,i:[{t:3}],s:"包含已發布表單中未包含的字段"}}},deletedFieldsHelp:{t:0,b:{t:2,i:[{t:3}],s:"如果您需要查看先前的表單版本中引用的字段，請使用此選項。"}},noSelectMultiple:{t:0,b:{t:2,i:[{t:3}],s:"此表單沒有任何選擇多個欄位。"}},encryptedForm:{t:0,b:{t:2,i:[{t:3}],s:"加密表格不能以這種方式處理。"}},deletedFieldsDisabledForDraft:{t:0,b:{t:2,i:[{t:3}],s:"草稿表格不能以這種方式處理。"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"為了下載此資料，您需要提供您的密碼。您的密碼將僅用於解密您的資料以供下載，之後伺服器將再次忘記它。"}}],hint:{t:0,b:{t:2,i:[{t:3,v:"提示: "},{t:4,k:"hint"}]}},noRepeat:{t:0,b:{t:2,i:[{t:3}],s:"此表格沒有重複。"}},action:{download:{mainTable:{t:0,b:{t:2,i:[{t:3}],s:"主要資料表（無重複）"}},allTables:{t:0,b:{t:2,i:[{t:3}],s:"所有資料表"}},withAttachments:{t:0,b:{t:2,i:[{t:3}],s:"所有資料與附件"}}}},alert:{unavailable:{t:0,b:{t:2,i:[{t:3}],s:"資料下載尚不可用。請稍後重試。"}},submit:{t:0,b:{t:2,i:[{t:3}],s:"資料下載即將開始。一旦開始，您可以關閉此訊息。如果 20 秒內仍未開始，請再試一次。"}},parseError:{t:0,b:{t:2,i:[{t:3}],s:"請求您的資料時出現問題。"}}}}}})}const tt={name:"SubmissionDownload",components:{FormGroup:jt,Modal:Mt},inject:["toast","redAlert","logger"],props:{state:Boolean,formVersion:Object,odataFilter:String},emits:["hide"],setup(){const{session:e,keys:t,fields:s}=A(),{callWait:a,cancelCall:i}=Nt();return{session:e,keys:t,fields:s,callWait:a,cancelCall:i}},data(){return{splitSelectMultiples:!1,removeGroupNames:!1,deletedFields:!1,passphrase:""}},computed:{managedKey(){return this.keys.dataExists?this.keys.find(e=>e.managed):null},splitSelectMultiplesDescription(){return this.fields.dataExists&&!this.fields.some(({selectMultiple:e})=>e===!0)?this.$t("noSelectMultiple"):this.formVersion.dataExists&&this.formVersion.keyId!=null?this.$t("encryptedForm"):null},splitSelectMultiplesDescribedBy(){return this.splitSelectMultiplesDescription!=null?"submission-download-split-select-multiples-disabled":null},deletedFieldsDisabled(){return this.formVersion.dataExists&&this.formVersion.publishedAt==null},deletedFieldsDescribedBy(){const e=["submission-download-deleted-fields-help"];return this.deletedFieldsDisabled&&e.push(["submission-download-deleted-fields-disabled"]),e.join(" ")},noRepeat(){return this.fields.dataExists&&!this.fields.some(({type:e})=>e==="repeat")}},watch:{state(e){e||(this.passphrase="")},"toast.state":function(t){t||this.cancelCall("checkForProblem")}},methods:{href(e,t=void 0){if(!this.formVersion.dataExists)return"#";const s={...t,$filter:this.odataFilter,splitSelectMultiples:this.splitSelectMultiples,groupPaths:!this.removeGroupNames,deletedFields:this.deletedFields};return C.submissions(this.formVersion.projectId,this.formVersion.xmlFormId,this.formVersion.publishedAt==null,e,s)},submitIframeForm(e){const t=this.$refs.iframe.contentWindow.document;t.body.innerHTML="";const s=t.createElement("form");s.setAttribute("method","post"),s.setAttribute("action",e),t.body.appendChild(s);const a=t.createElement("input");a.setAttribute("type","password"),a.setAttribute("name",this.managedKey.id.toString()),a.setAttribute("autocomplete","off"),s.appendChild(a);const i=t.createElement("input");i.setAttribute("type","password"),i.setAttribute("name","__csrf"),i.setAttribute("autocomplete","off"),s.appendChild(i),a.value=this.passphrase,i.value=Pt("__csrf"),s.submit(),s.reset()},checkForProblem(){const e=this.$refs.iframe.contentWindow.document;if(e.querySelector("form")!=null||e.body==null)return!1;let t;try{t=JSON.parse(e.body.textContent)}catch{this.logger.log(e.body.textContent),this.redAlert.show(this.$t("alert.parseError"))}return xt(t)&&this.redAlert.show(t.message),!0},decrypt(e){if(this.$refs.iframe.contentWindow.document.readyState==="loading"){this.redAlert.show("alert.unavailable");return}this.submitIframeForm(e),this.cancelCall("checkForProblem"),this.callWait("checkForProblem",this.checkForProblem,t=>t<300?1e3:null)},download(e){if(!this.state)return;const t=e.target.closest("a");if(t==null)return;const s=this.managedKey==null||this.$refs.form.reportValidity();if(this.managedKey!=null&&(e.preventDefault(),s&&this.decrypt(t.getAttribute("href"))),s){this.$emit("hide");const{cta:a}=this.toast.show(this.$t("alert.submit"),{autoHide:!1});this.managedKey==null&&a(this.$t("action.tryAgain"),()=>{t.click()})}}}},he={id:"submission-download-container"},fe={id:"submission-download-options-title"},ve=["disabled","aria-describedby"],ge={key:0,id:"submission-download-split-select-multiples-disabled",class:"sr-only"},we={class:"checkbox"},ye=["disabled","aria-describedby"],ke={key:0,id:"submission-download-deleted-fields-disabled",class:"sr-only"},Se={id:"submission-download-deleted-fields-help",class:"help-block"},_e={id:"submission-download-passphrase-help",class:"modal-introduction"},De={key:0,id:"submission-download-passphrase-hint",class:"modal-introduction"},Fe={class:"submission-download-action"},Re={class:"submission-download-action-label"},ze=["href"],Te={class:"submission-download-action-label"},Ie=["href"],Ae={class:"submission-download-action"},Ce={class:"submission-download-action-label"},Me=["href"],Ve={class:"modal-actions"},Oe={ref:"iframe",src:"/blank.html"};function qe(e,t,s,a,i,o){const r=g("form-group"),v=g("modal"),b=x("tooltip");return l(),T(v,{state:s.state,hideable:"",size:o.managedKey==null?"normal":"large",backdrop:"",onHide:t[7]||(t[7]=c=>e.$emit("hide")),onShown:t[8]||(t[8]=c=>e.$refs.form.querySelector("input:not([disabled])").focus())},{title:F(()=>[y(d(e.$t("title")),1)]),body:F(()=>[n("div",he,[n("form",{ref:"form",onSubmit:t[4]||(t[4]=W(()=>{},["prevent"]))},[n("p",fe,d(e.$t("exportOptions")),1),n("div",{class:V(["checkbox",{disabled:o.splitSelectMultiplesDescription!=null}])},[S((l(),u("label",null,[S(n("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.splitSelectMultiples=c),type:"checkbox",disabled:o.splitSelectMultiplesDescription!=null,"aria-describedby":o.splitSelectMultiplesDescribedBy},null,8,ve),[[N,i.splitSelectMultiples]]),y(" "+d(e.$t("field.splitSelectMultiples")),1)])),[[b,void 0,void 0,{"sr-only":!0}]]),o.splitSelectMultiplesDescription!=null?(l(),u("p",ge,d(o.splitSelectMultiplesDescription),1)):f("",!0)],2),n("div",we,[n("label",null,[S(n("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>i.removeGroupNames=c),type:"checkbox"},null,512),[[N,i.removeGroupNames]]),y(" "+d(e.$t("field.removeGroupNames")),1)])]),n("div",{class:V(["checkbox",{disabled:o.deletedFieldsDisabled}])},[S((l(),u("label",null,[S(n("input",{"onUpdate:modelValue":t[2]||(t[2]=c=>i.deletedFields=c),type:"checkbox",disabled:o.deletedFieldsDisabled,"aria-describedby":o.deletedFieldsDescribedBy},null,8,ye),[[N,i.deletedFields]]),y(" "+d(e.$t("field.deletedFields")),1)])),[[b,void 0,void 0,{"sr-only":!0}]]),o.deletedFieldsDisabled?(l(),u("p",ke,d(e.$t("deletedFieldsDisabledForDraft")),1)):f("",!0),n("p",Se,d(e.$t("deletedFieldsHelp")),1)],2),o.managedKey!=null?(l(),u(I,{key:0},[n("p",_e,d(e.$t("introduction[0]")),1),k(r,{modelValue:i.passphrase,"onUpdate:modelValue":t[3]||(t[3]=c=>i.passphrase=c),type:"password",placeholder:e.$t("field.passphrase"),required:"",autocomplete:"off"},null,8,["modelValue","placeholder"]),o.managedKey.hint!=null?(l(),u("p",De,d(e.$t("hint",o.managedKey)),1)):f("",!0)],64)):f("",!0)],544),t[15]||(t[15]=n("div",{id:"submission-download-divider"},null,-1)),n("div",{id:"submission-download-actions",onClick:t[5]||(t[5]=(...c)=>o.download&&o.download(...c))},[n("div",Fe,[n("span",Re,[t[9]||(t[9]=n("span",{class:"icon-file-o"},null,-1)),y(d(e.$t("action.download.mainTable")),1)]),n("div",null,[n("a",{href:o.href(".csv"),class:"btn btn-primary"},t[10]||(t[10]=[n("span",{class:"icon-download"},null,-1),y(".csv ",-1)]),8,ze)])]),n("div",{class:V(["submission-download-action",{disabled:o.noRepeat}])},[n("span",Te,[t[11]||(t[11]=n("span",{class:"icon-files-o"},null,-1)),y(d(e.$t("action.download.allTables")),1)]),n("div",null,[S((l(),u("a",{href:o.href(".csv.zip",{attachments:!1}),class:V(["btn btn-primary",{disabled:o.noRepeat}])},t[12]||(t[12]=[n("span",{class:"icon-download"},null,-1),y(".zip ",-1)]),10,Ie)),[[b,o.noRepeat?e.$t("noRepeat"):null,void 0,{"aria-describedby":!0}]])])],2),n("div",Ae,[n("span",Ce,[t[13]||(t[13]=n("span",{class:"icon-image"},null,-1)),y(d(e.$t("action.download.withAttachments")),1)]),n("div",null,[n("a",{href:o.href(".csv.zip"),class:"btn btn-primary"},t[14]||(t[14]=[n("span",{class:"icon-download"},null,-1),y(".zip ",-1)]),8,Me)])])])]),n("div",Ve,[n("button",{type:"button",class:"btn btn-primary",onClick:t[6]||(t[6]=c=>e.$emit("hide"))},d(e.$t("action.close")),1)]),S(n("iframe",Oe,null,512),[[B,!1]])]),_:1},8,["state","size"])}typeof ut=="function"&&ut(tt);typeof ct=="function"&&ct(tt);const $e=q(tt,[["render",qe]]);function mt(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{action:{download:{unfiltered:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Download "},{t:4,k:"count"},{t:3,v:" Submission"}]},{t:2,i:[{t:3,v:"Download all "},{t:4,k:"count"},{t:3,v:" Submissions"}]}]}},filtered:{withoutCount:{t:0,b:{t:2,i:[{t:3}],s:"Download all Submissions matching the filter"}},withCount:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Download "},{t:4,k:"count"},{t:3,v:" Submission matching the filter"}]},{t:2,i:[{t:3,v:"Download "},{t:4,k:"count"},{t:3,v:" Submissions matching the filter"}]}]}}}}}}}})}function bt(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{de:{action:{download:{unfiltered:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" Übermittlung herunterladen"}]},{t:2,i:[{t:3,v:"Alle "},{t:4,k:"count"},{t:3,v:" Übermittlungen herunterladen"}]}]}},filtered:{withoutCount:{t:0,b:{t:2,i:[{t:3}],s:"Alle Übermittlungen herunterladen, die dem Filter entsprechen"}},withCount:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" Übermittlung herunterladen, die dem Filter entsprechen"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" Übermittlungen herunterladen, die dem Filter entsprechen"}]}]}}}}}},es:{action:{download:{unfiltered:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Descargar "},{t:4,k:"count"},{t:3,v:" envío"}]},{t:2,i:[{t:3,v:"Descargar todos los "},{t:4,k:"count"},{t:3,v:" envíos"}]},{t:2,i:[{t:3,v:"Descargar todos los "},{t:4,k:"count"},{t:3,v:" envíos"}]}]}},filtered:{withoutCount:{t:0,b:{t:2,i:[{t:3}],s:"Descargar todos los envíos que coincidan con el filtro"}},withCount:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Descargar "},{t:4,k:"count"},{t:3,v:" envío que coincidan con el filtro"}]},{t:2,i:[{t:3,v:"Descargar "},{t:4,k:"count"},{t:3,v:" envíos que coincidan con el filtro"}]},{t:2,i:[{t:3,v:"Descargar "},{t:4,k:"count"},{t:3,v:" envíos que coincidan con el filtro"}]}]}}}}}},fr:{action:{download:{unfiltered:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Télécharger "},{t:4,k:"count"},{t:3,v:" soumission"}]},{t:2,i:[{t:3,v:"Télécharger toutes les "},{t:4,k:"count"},{t:3,v:" soumissions"}]},{t:2,i:[{t:3,v:"Télécharger toutes les "},{t:4,k:"count"},{t:3,v:" soumissions"}]}]}},filtered:{withoutCount:{t:0,b:{t:2,i:[{t:3}],s:"Télécharger toutes les entitées filtrées"}},withCount:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Télécharger "},{t:4,k:"count"},{t:3,v:" soumission filtrée"}]},{t:2,i:[{t:3,v:"Télécharger "},{t:4,k:"count"},{t:3,v:" soumissions filtrées"}]},{t:2,i:[{t:3,v:"Télécharger "},{t:4,k:"count"},{t:3,v:" soumissions filtrées"}]}]}}}}}},it:{action:{download:{unfiltered:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Scarica "},{t:4,k:"count"},{t:3,v:" Invio"}]},{t:2,i:[{t:3,v:"Scarica tutti i "},{t:4,k:"count"},{t:3,v:" Invii"}]},{t:2,i:[{t:3,v:"Scarica tutti i "},{t:4,k:"count"},{t:3,v:" Invii"}]}]}},filtered:{withoutCount:{t:0,b:{t:2,i:[{t:3}],s:"Scaricare tutti gli invii che corrispondono al filtro"}},withCount:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Scaricare il "},{t:4,k:"count"},{t:3,v:" invio che corrisponde al filtro"}]},{t:2,i:[{t:3,v:"Scaricare gli "},{t:4,k:"count"},{t:3,v:" invii che corrispondono al filtro"}]},{t:2,i:[{t:3,v:"Scaricare gli "},{t:4,k:"count"},{t:3,v:" invii che corrispondono al filtro"}]}]}}}}}},"zh-Hant":{action:{download:{unfiltered:{t:0,b:{t:2,i:[{t:3,v:"下載全部"},{t:4,k:"count"},{t:3,v:" 個提交資料"}]}},filtered:{withoutCount:{t:0,b:{t:2,i:[{t:3}],s:"下載符合篩選條件的所有提交內容"}},withCount:{t:0,b:{t:2,i:[{t:3,v:"下載"},{t:4,k:"count"},{t:3,v:"個符合篩選條件的提交內容"}]}}}}}}}})}const et={name:"SubmissionDownloadButton",props:{formVersion:Object,filtered:Boolean},emits:["download","downloadFiltered"],setup(){const{odata:e}=A();return{odata:e}},computed:{downloadFiltered(){return this.odata.dataExists?this.$tcn("action.download.filtered.withCount",this.odata.count):this.$t("action.download.filtered.withoutCount")}},methods:{download(){this.filtered||this.$emit("download")}}},Ee={id:"submission-download-button",class:"dropdown"},je=["data-toggle"],xe={class:"dropdown-menu dropdown-menu-right"},Pe={key:0};function Ne(e,t,s,a,i,o){return l(),u("div",Ee,[n("button",E({type:"button",class:"btn btn-primary","data-toggle":s.filtered?"dropdown":null},e.$attrs,{onClick:t[0]||(t[0]=(...r)=>o.download&&o.download(...r))}),[t[3]||(t[3]=n("span",{class:"icon-arrow-circle-down"},null,-1)),n("span",null,d(e.$t("action.download")),1)],16,je),n("ul",xe,[n("li",null,[n("button",{type:"button",class:"btn btn-link dropdown-item",onClick:t[1]||(t[1]=r=>e.$emit("downloadFiltered"))},[n("span",null,d(o.downloadFiltered),1)])]),s.formVersion.dataExists?(l(),u("li",Pe,[n("button",{type:"button",class:"btn btn-link dropdown-item",onClick:t[2]||(t[2]=r=>e.$emit("download"))},[n("span",null,d(e.$tcn("action.download.unfiltered",s.formVersion.submissions)),1)])])):f("",!0)])])}typeof mt=="function"&&mt(et);typeof bt=="function"&&bt(et);const Be=q(et,[["render",Ne]]);function pt(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{field:{columns:{t:0,b:{t:2,i:[{t:3}],s:"Columns shown"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Search columns…"}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"All"}},none:{t:0,b:{t:2,i:[{t:3}],s:"None"}}},warning:{t:0,b:{t:2,i:[{t:3}],s:"Selecting too many columns might slow down your computer."}}}}})}function ht(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{cs:{field:{columns:{t:0,b:{t:2,i:[{t:3}],s:"Zobrazené sloupce"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Hledat sloupce…"}}},warning:{t:0,b:{t:2,i:[{t:3}],s:"Výběr příliš mnoha sloupců může zpomalit počítač."}}},de:{field:{columns:{t:0,b:{t:2,i:[{t:3}],s:"angezeigte Spalten"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Spalten suchen..."}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Alle"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Keine"}}},warning:{t:0,b:{t:2,i:[{t:3}],s:"Die Auswahl zu vieler Spalten kann Ihren Computer verlangsamen."}}},es:{field:{columns:{t:0,b:{t:2,i:[{t:3}],s:"Se muestran las columnas"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Buscar columnas…"}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Todos"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Ninguno"}}},warning:{t:0,b:{t:2,i:[{t:3}],s:"Seleccionar demasiadas columnas puede ralentizar su computadora."}}},fr:{field:{columns:{t:0,b:{t:2,i:[{t:3}],s:"Colonnes affichées"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Chercher des colonnes"}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Toutes"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Aucune"}}},warning:{t:0,b:{t:2,i:[{t:3}],s:"Sélectionner trop de colonnes peut ralentir votre ordinateur."}}},id:{field:{columns:{t:0,b:{t:2,i:[{t:3}],s:"Kolom terlihat"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Mencari kolom..."}}}},it:{field:{columns:{t:0,b:{t:2,i:[{t:3}],s:"Colonne mostrate"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Cerca colonne..."}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Tutto"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Nessuno/a"}}},warning:{t:0,b:{t:2,i:[{t:3}],s:"La selezione di troppe colonne potrebbe rallentare il computer."}}},ja:{field:{columns:{t:0,b:{t:2,i:[{t:3}],s:"表示された列"}},search:{t:0,b:{t:2,i:[{t:3}],s:"列を検索"}}}},pt:{field:{columns:{t:0,b:{t:2,i:[{t:3}],s:"Colunas exibidas"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Colunas de busca..."}}},warning:{t:0,b:{t:2,i:[{t:3}],s:"Selecionar colunas em excesso pode deixar seu computador lento."}}},sw:{field:{columns:{t:0,b:{t:2,i:[{t:3}],s:"Safu wima zimeonyeshwa"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Tafuta safu wima..."}}},warning:{t:0,b:{t:2,i:[{t:3}],s:"Kuchagua safu wima nyingi kunaweza kupunguza kasi ya kompyuta yako."}}},"zh-Hant":{field:{columns:{t:0,b:{t:2,i:[{t:3}],s:"顯示欄位"}},search:{t:0,b:{t:2,i:[{t:3}],s:"搜尋欄位..."}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"全部"}},none:{t:0,b:{t:2,i:[{t:3}],s:"無"}}},warning:{t:0,b:{t:2,i:[{t:3}],s:"選擇太多列可能會降低計算機的速度。"}}}}})}const st=Object.assign({name:"SubmissionFieldDropdown"},{__name:"field-dropdown",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(e){const{fields:t}=A(),s=H(()=>t.selectable.map(i=>({value:i,key:i.path,text:i.name,description:i.header}))),a=i=>i.selected;return(i,o)=>(l(),T(X,{id:"submission-field-dropdown","model-value":e.modelValue,options:s.value,label:i.$t("field.columns"),placeholder:a,all:i.$t("action.all"),none:i.$t("action.none"),search:i.$t("field.search"),"onUpdate:modelValue":o[0]||(o[0]=r=>i.$emit("update:modelValue",r))},{"after-list":F(({selected:r})=>[r.size>100?(l(),u(I,{key:0},[o[1]||(o[1]=n("span",{class:"icon-exclamation-triangle"},null,-1)),y(d(i.$t("warning")),1)],64)):f("",!0)]),_:1},8,["model-value","options","label","all","none","search"]))}});typeof pt=="function"&&pt(st);typeof ht=="function"&&ht(st);function ft(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{action:{all:{t:0,b:{t:2,i:[{t:3}],s:"All"}},none:{t:0,b:{t:2,i:[{t:3}],s:"None"}}}}}})}function vt(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{de:{action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Alle"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Keine"}}}},es:{action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Todos"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Ninguno"}}}},fr:{action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Tous"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Aucun"}}}},it:{action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Tutto"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Nessuno/a"}}}},"zh-Hant":{action:{all:{t:0,b:{t:2,i:[{t:3}],s:"全部"}},none:{t:0,b:{t:2,i:[{t:3}],s:"無"}}}}}})}const it=Object.assign({name:"SubmissionFiltersReviewState"},{__name:"review-state",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(e){const{reviewStates:t}=Vt(),{i18n:s}=Bt("container"),a=t.map(r=>({value:Z(r),text:s.t(`reviewState.${r}`)})),{t:i}=At(),o=r=>r.total===r.selected?i("action.all"):r.selected;return(r,v)=>(l(),T(X,{id:"submission-filters-review-state","model-value":e.modelValue,options:O(a),"default-to-all":"",label:r.$t("common.reviewState"),placeholder:o,all:r.$t("action.all"),none:r.$t("action.none"),"onUpdate:modelValue":v[0]||(v[0]=b=>r.$emit("update:modelValue",b))},null,8,["model-value","options","label","all","none"]))}});typeof ft=="function"&&ft(it);typeof vt=="function"&&vt(it);function gt(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{field:{submitter:{t:0,b:{t:2,i:[{t:3}],s:"Submitted by"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Search submitters…"}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"All"}},none:{t:0,b:{t:2,i:[{t:3}],s:"None"}}},unknown:{t:0,b:{t:2,i:[{t:3}],s:"Unknown submitter"}}}}})}function wt(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{cs:{field:{submitter:{t:0,b:{t:2,i:[{t:3}],s:"Odesláno od"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Hledat odesílatele..."}}},unknown:{t:0,b:{t:2,i:[{t:3}],s:"Neznámý odesílatel"}}},de:{field:{submitter:{t:0,b:{t:2,i:[{t:3}],s:"Übermittelt von"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Einsender suchen…"}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Alle"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Keine"}}},unknown:{t:0,b:{t:2,i:[{t:3}],s:"Unbekannter Einsender"}}},es:{field:{submitter:{t:0,b:{t:2,i:[{t:3}],s:"Enviado por"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Buscar remitentes…"}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Todos"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Ninguno"}}},unknown:{t:0,b:{t:2,i:[{t:3}],s:"Remitente desconocido"}}},fr:{field:{submitter:{t:0,b:{t:2,i:[{t:3}],s:"Soumis par"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Rechercher des expéditeurs"}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Tous"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Aucun"}}},unknown:{t:0,b:{t:2,i:[{t:3}],s:"Expéditeur inconnu"}}},id:{field:{submitter:{t:0,b:{t:2,i:[{t:3}],s:"Terkirim oleh"}}}},it:{field:{submitter:{t:0,b:{t:2,i:[{t:3}],s:"Inviato da"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Cerca tra gli utenti..."}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Tutto"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Nessuno/a"}}},unknown:{t:0,b:{t:2,i:[{t:3}],s:"Utente invio sconosciuto"}}},ja:{field:{submitter:{t:0,b:{t:2,i:[{t:3}],s:"フォーム送信者"}}}},pt:{field:{submitter:{t:0,b:{t:2,i:[{t:3}],s:"Enviado por"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Pesquisar remetentes…"}}},unknown:{t:0,b:{t:2,i:[{t:3}],s:"Remetente desconhecido"}}},sw:{field:{submitter:{t:0,b:{t:2,i:[{t:3}],s:"Iliyowasilishwa na"}},search:{t:0,b:{t:2,i:[{t:3}],s:"Tafuta wawasilishaji..."}}},unknown:{t:0,b:{t:2,i:[{t:3}],s:"Mwasilishaji asiyejulikana"}}},"zh-Hant":{field:{submitter:{t:0,b:{t:2,i:[{t:3}],s:"由提交者"}},search:{t:0,b:{t:2,i:[{t:3}],s:"搜尋提交者..."}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"全部"}},none:{t:0,b:{t:2,i:[{t:3}],s:"無"}}},unknown:{t:0,b:{t:2,i:[{t:3}],s:"未知提交者"}}}}})}const nt=Object.assign({name:"SubmissionFiltersSubmitter"},{__name:"submitter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,a=t,{submitters:i}=A(),{t:o}=At(),r=H(()=>s.modelValue.reduce((p,m)=>i.ids.has(m)?p:p.add(m),new Set)),v=H(()=>{if(!i.dataExists)return null;const p=new Array(i.length+r.value.size);let m=0;for(const D of r.value)p[m]={value:D,text:o("unknown")},m+=1;for(const{id:D,displayName:M}of i)p[m]={value:D,text:M},m+=1;return p}),b=U(s.modelValue);J(()=>s.modelValue,p=>{b.value=p});const c=p=>{if(r.value.size!==0){const m=p.filter(D=>!r.value.has(D));a("update:modelValue",m.length!==0?m:[...i.ids])}else if(p.length!==0)a("update:modelValue",p);else{const m=[...i.ids];s.modelValue.length!==m.length?a("update:modelValue",m):(b.value=p,Ht(()=>{b.value=m}))}},_=p=>p.total===p.selected?o("action.all"):p.selected;return(p,m)=>(l(),T(X,{id:"submission-filters-submitter","model-value":b.value,options:v.value,loading:O(i).initiallyLoading,label:p.$t("field.submitter"),placeholder:_,all:p.$t("action.all"),none:p.$t("action.none"),search:p.$t("field.search"),empty:p.$t("submission.emptyTable"),"onUpdate:modelValue":c},{icon:F(()=>m[0]||(m[0]=[n("span",{class:"icon-user"},null,-1)])),_:1},8,["model-value","options","loading","label","all","none","search","empty"]))}});typeof gt=="function"&&gt(nt);typeof wt=="function"&&wt(nt);function yt(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{field:{submissionDate:{t:0,b:{t:2,i:[{t:3}],s:"Submitted at"}}},allSubmissionDateSelected:{t:0,b:{t:2,i:[{t:3}],s:"All time"}}}}})}function kt(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{cs:{field:{submissionDate:{t:0,b:{t:2,i:[{t:3}],s:"Odesláno v"}}}},de:{field:{submissionDate:{t:0,b:{t:2,i:[{t:3}],s:"Übermittelt um"}}}},es:{field:{submissionDate:{t:0,b:{t:2,i:[{t:3}],s:"Enviado a"}}},allSubmissionDateSelected:{t:0,b:{t:2,i:[{t:3}],s:"Todos los tiempos"}}},fr:{field:{submissionDate:{t:0,b:{t:2,i:[{t:3}],s:"Soumis à"}}},allSubmissionDateSelected:{t:0,b:{t:2,i:[{t:3}],s:"Tout temps"}}},id:{field:{submissionDate:{t:0,b:{t:2,i:[{t:3}],s:"Terkirim pada"}}}},it:{field:{submissionDate:{t:0,b:{t:2,i:[{t:3}],s:"Inviato alle"}}},allSubmissionDateSelected:{t:0,b:{t:2,i:[{t:3}],s:"Per tutto il tempo"}}},ja:{field:{submissionDate:{t:0,b:{t:2,i:[{t:3}],s:"フォームの送信日"}}}},pt:{field:{submissionDate:{t:0,b:{t:2,i:[{t:3}],s:"Enviado em"}}}},sw:{field:{submissionDate:{t:0,b:{t:2,i:[{t:3}],s:"Imewasilishwa kwa"}}}},"zh-Hant":{field:{submissionDate:{t:0,b:{t:2,i:[{t:3}],s:"提交於"}}},allSubmissionDateSelected:{t:0,b:{t:2,i:[{t:3}],s:"全部時間"}}}}})}const ot={name:"SubmissionFilters",components:{DateRangePicker:Xt,SubmissionFiltersReviewState:it,SubmissionFiltersSubmitter:nt},props:{submitterId:{type:Array,required:!0},submissionDate:{type:Array,required:!0},reviewState:{type:Array,required:!0},disabled:{type:Boolean,required:!0},disabledMessage:{type:String,required:!1}},emits:["update:submitterId","update:submissionDate","update:reviewState"]},He={id:"submission-filters"};function Ue(e,t,s,a,i,o){const r=g("submission-filters-submitter"),v=g("date-range-picker"),b=g("submission-filters-review-state");return l(),u("span",He,[k(r,{"model-value":s.submitterId,disabled:s.disabled,"disabled-message":s.disabledMessage,"onUpdate:modelValue":t[0]||(t[0]=c=>e.$emit("update:submitterId",c))},null,8,["model-value","disabled","disabled-message"]),k(v,{"model-value":s.submissionDate,label:e.$t("field.submissionDate"),disabled:s.disabled,"disabled-message":s.disabledMessage,placeholder:e.$t("allSubmissionDateSelected"),"onUpdate:modelValue":t[1]||(t[1]=c=>e.$emit("update:submissionDate",c))},null,8,["model-value","label","disabled","disabled-message","placeholder"]),k(b,{"model-value":s.reviewState,disabled:s.disabled,"disabled-message":s.disabledMessage,"onUpdate:modelValue":t[2]||(t[2]=c=>e.$emit("update:reviewState",c))},null,8,["model-value","disabled","disabled-message"])])}typeof yt=="function"&&yt(ot);typeof kt=="function"&&kt(ot);const Le=q(ot,[["render",Ue]]),Ge=["int","decimal","date","time","dateTime","geopoint"],Ke={name:"SubmissionDataRow",props:{projectId:{type:String,required:!0},xmlFormId:{type:String,required:!0},draft:Boolean,submission:{type:Object,required:!0},fields:{type:Array,required:!0},deleted:{type:Boolean,default:!1}},computed:{htmlClass(){return{"encrypted-submission":this.submission.__system.status!=null}}},methods:{fieldClass(e){return e.binary===!0?"binary-field":e.type==="int"?"int-field":e.type==="decimal"?"decimal-field":e.type==="geopoint"?"geopoint-field":null},rawValue(e,t){return pe(t.pathElements,e)},formattedValue(e,t){const s=this.rawValue(e,t);if(s==null)return null;if(t.binary===!0)return C.submissionAttachment(this.projectId,this.xmlFormId,this.draft,this.submission.__id,s);switch(t.type){case"int":return this.$n(s,"default");case"decimal":{if(Number.isInteger(s))return this.$n(s,"default");if(s>=1e13||s<=-1e12)return this.$n(s,"maximumFractionDigits1");const a=Math.floor(Math.abs(s)).toString().length,i=s<0?1:0,o=14-a-i;return this.$n(s,`maximumFractionDigits${o}`)}case"date":return se(j.fromISO(s));case"time":{const a=G.defaultZoneName;G.defaultZoneName="utc";const i=j.fromISO(s,{setZone:!0});return G.defaultZoneName=a,ee(i)}case"dateTime":return te(j.fromISO(s));default:return s}},needsTooltip(e){return!Ge.includes(e)}}},Qe=["href","aria-disabled","aria-label"],We={key:1},Ze=["colspan"],Je={class:"encryption-message"};function Ye(e,t,s,a,i,o){const r=x("tooltip");return l(),u("tr",{class:V(o.htmlClass)},[s.submission.__system.status==null?(l(!0),u(I,{key:0},Ct(s.fields,v=>(l(),u("td",{key:v.path,class:V(o.fieldClass(v))},[v.binary===!0?(l(),u(I,{key:0},[o.rawValue(s.submission,v)!=null?S((l(),u("a",{key:0,class:"binary-link",href:o.formattedValue(s.submission,v),target:"_blank","aria-disabled":s.deleted,"aria-label":s.deleted?e.$t("submission.fileDownloadUnavailable"):e.$t("submission.binaryLinkTitle")},t[0]||(t[0]=[n("span",{class:"icon-check"},null,-1),y(),n("span",{class:"icon-download"},null,-1)]),8,Qe)),[[r,void 0,void 0,{"aria-label":!0}]]):f("",!0)],64)):o.needsTooltip(v.type)?S((l(),u("span",We,[y(d(o.formattedValue(s.submission,v)),1)])),[[r,void 0,void 0,{text:!0}]]):(l(),u(I,{key:2},[y(d(o.formattedValue(s.submission,v)),1)],64))],2))),128)):s.fields.length!==0?(l(),u("td",{key:1,class:"encrypted-data",colspan:s.fields.length},[t[1]||(t[1]=n("span",{class:"icon-lock"},null,-1)),n("span",Je,d(e.$t("submission.encryptionMessage")),1),t[2]||(t[2]=n("span",{class:"encryption-overlay"},null,-1))],8,Ze)):f("",!0),n("td",null,d(s.submission.__id),1)],2)}const Xe=q(Ke,[["render",Ye]]),ts={name:"SubmissionMetadataRow",components:{DateTime:ie,Spinner:Y,SubmissionReviewState:ne},props:{projectId:{type:String,required:!0},xmlFormId:{type:String,required:!0},draft:Boolean,submission:{type:Object,required:!0},rowNumber:{type:Number,required:!0},deleted:{type:Boolean,default:!1},verbs:{type:Set,required:!0},awaitingResponse:Boolean},setup(){const{form:e}=A(),{submissionPath:t,editSubmissionPath:s}=Ut();return{form:e,submissionPath:t,editSubmissionPath:s}},computed:{missingAttachment(){const{__system:e}=this.submission;return e.reviewState==null&&e.attachmentsPresent!==e.attachmentsExpected},editPath(){return this.editSubmissionPath(this.projectId,this.xmlFormId,this.submission.__id,this.form.webformsEnabled)},editLabel(){return this.$t("submission.action.edit",{count:this.$n(this.submission.__system.edits,"default")})}}},es={class:"submission-metadata-row"},ss={class:"row-number"},is={key:0,class:"submitter-name"},ns={key:1,class:"state-and-actions"},os={class:"col-content"},as={class:"state"},ls={class:"edits"},rs={class:"btn-group"},ds=["aria-label"],us=["aria-label"],cs=["href","aria-label"],ms=["aria-label"],bs=["href"],ps={key:2,class:"state-and-actions"},hs={class:"col-content col-deleted-at"},fs={key:0,class:"btn-group"},vs=["aria-disabled","aria-label"];function gs(e,t,s,a,i,o){const r=g("date-time"),v=g("submission-review-state"),b=g("spinner"),c=g("router-link"),_=x("tooltip");return l(),u("tr",es,[n("td",ss,d(e.$n(s.rowNumber,"noGrouping")),1),s.draft?f("",!0):(l(),u("td",is,[S((l(),u("span",null,[y(d(s.submission.__system.submitterName),1)])),[[_,void 0,void 0,{text:!0}]])])),n("td",null,[k(r,{iso:s.submission.__system.submissionDate},null,8,["iso"])]),!s.draft&&!s.deleted?(l(),u("td",ns,[n("div",os,[n("span",as,[o.missingAttachment?(l(),u(I,{key:0},[t[0]||(t[0]=n("span",{class:"icon-circle-o"},null,-1)),n("span",null,d(e.$t("submission.missingAttachment")),1)],64)):(l(),T(v,{key:1,value:s.submission.__system.reviewState,align:""},null,8,["value"]))]),n("span",ls,[s.submission.__system.edits!==0?(l(),u(I,{key:0},[t[1]||(t[1]=n("span",{class:"icon-pencil"},null,-1)),n("span",null,d(e.$n(s.submission.__system.edits,"default")),1)],64)):f("",!0)]),t[2]||(t[2]=n("span",{class:"icon-angle-right"},null,-1))]),n("div",rs,[s.verbs.has("submission.delete")?S((l(),u("button",{key:0,type:"button",class:"delete-button btn btn-default","aria-label":e.$t("action.delete")},[t[3]||(t[3]=n("span",{class:"icon-trash"},null,-1)),k(b,{state:s.awaitingResponse},null,8,["state"])],8,ds)),[[_,void 0,void 0,{"aria-label":!0}]]):f("",!0),s.verbs.has("submission.update")?(l(),u(I,{key:1},[S((l(),u("button",{type:"button",class:"review-button btn btn-default","aria-label":e.$t("action.review")},t[4]||(t[4]=[n("span",{class:"icon-check"},null,-1)]),8,us)),[[_,void 0,void 0,{"aria-label":!0}]]),s.submission.__system.status==null?S((l(),u("a",{key:0,class:"btn btn-default",href:o.editPath,target:"_blank","aria-label":o.editLabel},t[5]||(t[5]=[n("span",{class:"icon-pencil"},null,-1)]),8,cs)),[[_,void 0,void 0,{"aria-label":!0}]]):S((l(),u("button",{key:1,type:"button",class:"btn btn-default","aria-label":o.editLabel,"aria-disabled":"true"},t[6]||(t[6]=[n("span",{class:"icon-pencil"},null,-1)]),8,ms)),[[_,e.$t("submission.editDisabled"),void 0,{"aria-describedby":!0}]])],64)):f("",!0),k(c,{to:a.submissionPath(s.projectId,s.xmlFormId,s.submission.__id),custom:""},{default:F(({href:p})=>[n("a",{class:"more-button btn btn-default",href:p,target:"_blank"},[n("span",null,d(e.$t("action.more")),1),t[7]||(t[7]=n("span",{class:"icon-angle-right"},null,-1))],8,bs)]),_:1},8,["to"])])])):f("",!0),!s.draft&&s.deleted?(l(),u("td",ps,[n("div",hs,[k(r,{iso:s.submission.__system.deletedAt},null,8,["iso"])]),s.verbs.has("submission.restore")?(l(),u("div",fs,[S((l(),u("button",{type:"button",class:"restore-button btn btn-default","aria-disabled":s.awaitingResponse,"aria-label":e.$t("action.restore")},[t[8]||(t[8]=n("span",{class:"icon-recycle"},null,-1)),k(b,{state:s.awaitingResponse},null,8,["state"])],8,vs)),[[_,void 0,void 0,{"aria-label":!0}]])])):f("",!0)])):f("",!0)])}const ws=q(ts,[["render",gs]]);function St(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{header:{stateAndActions:{t:0,b:{t:2,i:[{t:3}],s:"State and actions"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"Deleted at"}}}}}})}function _t(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{cs:{header:{stateAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Stav a akce"}}}},de:{header:{stateAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Status und Aktionen"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"Gelöscht am"}}}},es:{header:{stateAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Estado y acciones"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"Suprimido el"}}}},fr:{header:{stateAndActions:{t:0,b:{t:2,i:[{t:3}],s:"État et actions"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"Supprimé à"}}}},id:{header:{stateAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Status dan tindakan"}}}},it:{header:{stateAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Stato e azioni"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"Eliminato il"}}}},ja:{header:{stateAndActions:{t:0,b:{t:2,i:[{t:3}],s:"レビュー・ステータスと操作"}}}},pt:{header:{stateAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Status e ações"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"Excluída em"}}}},sw:{header:{stateAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Hali na vitendo"}}}},"zh-Hant":{header:{stateAndActions:{t:0,b:{t:2,i:[{t:3}],s:"狀態和動作"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"刪除於"}}}}}})}const ys={class:"sr-only"},ks={key:0},Ss={key:1},_s={key:2,class:"col-deleted-at"},at=Object.assign({name:"SubmissionTable"},{__name:"table",props:{projectId:{type:String,required:!0},xmlFormId:{type:String,required:!0},deleted:{type:Boolean,default:!1},draft:Boolean,fields:Array,awaitingDeletedResponses:{type:Set,required:!0}},emits:["review","delete","restore"],setup(e,{expose:t,emit:s}){const a=s,{project:i,form:o,odata:r}=A(),v=ae(H(()=>r.value)),b=({target:m,data:D})=>{m.classList.contains("review-button")&&a("review",D),m.classList.contains("delete-button")&&a("delete",D),m.classList.contains("restore-button")&&a("restore",D)},c=U(null);return t({afterReview:m=>{Gt(c.value.getRowPair(m))},afterDelete:m=>{Lt(c.value.getRowPair(m))}}),(m,D)=>{const M=x("tooltip");return O(i).dataExists&&O(o).dataExists?(l(),T(oe,{key:0,id:"submission-table",ref_key:"table",ref:c,data:O(v),"key-prop":"__id","frozen-only":e.fields==null,divider:"",onAction:b},{"head-frozen":F(()=>[n("th",null,[n("span",ys,d(m.$t("common.rowNumber")),1)]),e.draft?f("",!0):(l(),u("th",ks,d(m.$t("header.submitterName")),1)),n("th",null,d(m.$t("header.submissionDate")),1),!e.draft&&!e.deleted?(l(),u("th",Ss,d(m.$t("header.stateAndActions")),1)):f("",!0),!e.draft&&e.deleted?(l(),u("th",_s,d(m.$t("header.deletedAt")),1)):f("",!0)]),"head-scrolling":F(()=>[e.fields!=null?(l(!0),u(I,{key:0},Ct(e.fields,h=>(l(),u("th",{key:h.path},[S((l(),u("span",null,[y(d(h.header),1)])),[[M,void 0,void 0,{text:!0}]])]))),128)):f("",!0),n("th",null,d(m.$t("header.instanceId")),1)]),"data-frozen":F(({data:h})=>[k(ws,{"project-id":e.projectId,"xml-form-id":e.xmlFormId,draft:e.draft,submission:h,deleted:e.deleted,"awaiting-response":e.awaitingDeletedResponses.has(h.__id),"row-number":h.__system.rowNumber,verbs:O(i).verbs},null,8,["project-id","xml-form-id","draft","submission","deleted","awaiting-response","row-number","verbs"])]),"data-scrolling":F(({data:h})=>[k(Xe,{"project-id":e.projectId,"xml-form-id":e.xmlFormId,draft:e.draft,submission:h,fields:e.fields,deleted:e.deleted},null,8,["project-id","xml-form-id","draft","submission","fields","deleted"])]),_:1},8,["data","frozen-only"])):f("",!0)}}});typeof St=="function"&&St(at);typeof _t=="function"&&_t(at);function Dt(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{title:{t:0,b:{t:2,i:[{t:3}],s:"Restore Submission"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Are you sure you want to restore this Submission?"}},{t:0,b:{t:2,i:[{t:3}],s:"The Submission will be restored to its previous state, including associated data like comments."}},{t:0,b:{t:2,i:[{t:3}],s:"If the Submission is deleted again, it will be another 30 days before it is removed."}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Restore immediately without confirmation until I leave the page"}}}}}})}function Ft(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{de:{title:{t:0,b:{t:2,i:[{t:3}],s:"Übermittlung wiederherstellen"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Sind Sie sicher, dass Sie diese Übermittlung wiederherstellen wollen?"}},{t:0,b:{t:2,i:[{t:3}],s:"Die Übermittlung wird in seinem vorherigen Zustand wiederhergestellt, einschliesslich zugehöriger Daten wie Kommentare."}},{t:0,b:{t:2,i:[{t:3}],s:"Wenn die Übermittlung erneut gelöscht wird, dauert es 30 Tage bis es entfernt wird."}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Sofortige Wiederherstellen ohne Bestätigung, bis ich die Seite verlasse"}}}},es:{title:{t:0,b:{t:2,i:[{t:3}],s:"Restablecer el envío"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"¿Estás seguro de que quieres restablecer este Envío?"}},{t:0,b:{t:2,i:[{t:3}],s:"El envío se restablecerá a su estado anterior, incluidos los datos asociados, como los comentarios."}},{t:0,b:{t:2,i:[{t:3}],s:"Si el envío se vuelve a borrar, pasarán otros 30 días hasta que se elimine."}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Restablecer inmediatamente sin confirmación hasta que salga de la página"}}}},fr:{title:{t:0,b:{t:2,i:[{t:3}],s:"Restaurer la Soumission"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Êtes vous certain(e) de vouloir restaurer cette soumission ?"}},{t:0,b:{t:2,i:[{t:3}],s:"La Soumission sera restaurée dans son état précédent, y compris les données associées comme les commentaires."}},{t:0,b:{t:2,i:[{t:3}],s:"Si la soumission est à nouveau supprimée, il faudra attendre à nouveau 30 jours avant qu'elle ne soit retirée."}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Restaurer immédiatement sans confirmation jusqu'à ce que je quitte la page"}}}},it:{title:{t:0,b:{t:2,i:[{t:3}],s:"Ripristino invio"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Sei sicuro di voler ripristinare questo invio?"}},{t:0,b:{t:2,i:[{t:3}],s:"L'invio verrà ripristinato allo stato precedente, compresi i dati associati come i commenti."}},{t:0,b:{t:2,i:[{t:3}],s:"Se l'invio viene nuovamente cancellato, passeranno altri 30 giorni prima che venga rimosso."}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Ripristino immediato senza conferma fino a quando non lascio la pagina"}}}},pt:{title:{t:0,b:{t:2,i:[{t:3}],s:"Recuperar Resposta"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Você tem certeza que quer recuperar essa Resposta?"}},{t:0,b:{t:2,i:[{t:3}],s:"A Resposta vai ser restaurada ao seu estado anterior, incluindo dados associados, como comentários."}},{t:0,b:{t:2,i:[{t:3}],s:"Se a Resposta foi excluída novamente, haverá um novo prazo de 30 dias até que seja removida."}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Recuperar imediatamente sem pedir confirmação até que eu saia desta página"}}}},"zh-Hant":{title:{t:0,b:{t:2,i:[{t:3}],s:"恢復提交內容"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"您確定要還原此提交嗎？"}},{t:0,b:{t:2,i:[{t:3}],s:"提交內容將恢復到先前的狀態，包括評論等相關資料。"}},{t:0,b:{t:2,i:[{t:3}],s:"如果提交內容再次被刪除，則需要 30 天後才會被刪除。"}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"立即還原，無需確認，直到我離開頁面"}}}}}})}const Ds={class:"modal-introduction"},Fs={key:0},Rs={class:"checkbox"},zs={class:"modal-actions"},Ts=["aria-disabled"],Is=["aria-disabled"],lt=Object.assign({name:"SubmissionRestore"},{__name:"restore",props:{state:Boolean,checkbox:Boolean,awaitingResponse:Boolean,submission:Object},emits:["hide","restore"],setup(e,{emit:t}){const s=e,a=t,i=U(!1);J(()=>s.state,b=>{b||(i.value=!1)});const o=U(null),r=()=>{s.checkbox&&o.value.focus()},v=()=>{s.checkbox?a("restore",[s.submission,!i.value]):a("restore",[s.submission])};return(b,c)=>(l(),T(Mt,{id:"submission-restore",state:e.state,hideable:!e.awaitingResponse,backdrop:"",onHide:c[2]||(c[2]=_=>b.$emit("hide")),onShown:r},{title:F(()=>[y(d(b.$t("title")),1)]),body:F(()=>[n("div",Ds,[n("p",null,d(b.$t("introduction[0]")),1),n("p",null,d(b.$t("introduction[1]")),1),n("p",null,d(b.$t("introduction[2]")),1)]),e.checkbox?(l(),u("form",Fs,[n("div",Rs,[n("label",null,[S(n("input",{ref_key:"input",ref:o,"onUpdate:modelValue":c[0]||(c[0]=_=>i.value=_),type:"checkbox"},null,512),[[N,i.value]]),y(" "+d(b.$t("field.noConfirm")),1)])])])):f("",!0),n("div",zs,[n("button",{type:"button",class:"btn btn-link","aria-disabled":e.awaitingResponse,onClick:c[1]||(c[1]=_=>b.$emit("hide"))},d(b.$t("action.cancel")),9,Ts),n("button",{type:"button",class:"btn btn-danger","aria-disabled":e.awaitingResponse,onClick:v},[y(d(b.$t("action.restore"))+" ",1),k(Y,{state:e.awaitingResponse},null,8,["state"])],8,Is)])]),_:1},8,["state","hideable"]))}});typeof Dt=="function"&&Dt(lt);typeof Ft=="function"&&Ft(lt);function Rt(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{action:{testOnDevice:{t:0,b:{t:2,i:[{t:3}],s:"Test on device"}},testInBrowser:{t:0,b:{t:2,i:[{t:3}],s:"Test in browser"}}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"There are no matching Submissions."}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"All Submissions are deleted."}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"All Submissions on the page have been deleted."}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Download is unavailable for deleted Submissions"}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"Filtering is unavailable for deleted Submissions"}},deletedSubmission:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"There are no deleted Submissions."}},allRestored:{t:0,b:{t:2,i:[{t:3}],s:"All deleted Submissions are restored."}},allRestoredOnPage:{t:0,b:{t:2,i:[{t:3}],s:"All Submissions on the page have been restored."}}}}}})}function zt(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{cs:{noMatching:{t:0,b:{t:2,i:[{t:3}],s:"Neexistují žádné odpovídající příspěvky."}}},de:{action:{testOnDevice:{t:0,b:{t:2,i:[{t:3}],s:"Test am Gerät"}},testInBrowser:{t:0,b:{t:2,i:[{t:3}],s:"Test im Browser"}}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"Es gibt keine passenden Übermittlungen."}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"Alle Übermittlungen werden gelöscht."}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Alle Übermittlungen auf dieser Seite wurden gelöscht."}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Der Download ist für gelöschte Übermittlungen nicht verfügbar"}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"Filterung ist für gelöschte Übermittlungen nicht verfügbar"}},deletedSubmission:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Es gibt keine gelöschten Übermittlungen."}},allRestored:{t:0,b:{t:2,i:[{t:3}],s:"Alle gelöschten Übermittlungen werden wiederhergestellt."}},allRestoredOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Alle Übermittlungen auf dieser Seite wurden wiederhergestellt."}}}},es:{action:{testOnDevice:{t:0,b:{t:2,i:[{t:3}],s:"Prueba en el dispositivo"}},testInBrowser:{t:0,b:{t:2,i:[{t:3}],s:"Prueba en el navegador"}}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"No hay envíos coincidentes."}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"Todos los envíos se han eliminado."}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Se han eliminado todos los envíos de la página."}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"La descarga no está disponible para los envíos eliminados"}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"El Filtro no está disponible para los Envíos eliminados"}},deletedSubmission:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"No hay envíos eliminados."}},allRestored:{t:0,b:{t:2,i:[{t:3}],s:"Se restablecen todos los envíos eliminados."}},allRestoredOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Se han restablecido todas las Envíos de la página."}}}},fr:{action:{testOnDevice:{t:0,b:{t:2,i:[{t:3}],s:"Tester sur un appareil"}},testInBrowser:{t:0,b:{t:2,i:[{t:3}],s:"Tester dans le naviguateur"}}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"Il n'y a pas de soumission correspondante."}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"Toutes les soumissions sont supprimées."}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Toutes les soumissions de la page ont été supprimées."}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Le téléchargement n'est pas possible pour les Soumissions supprimées."}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"Le filtrage n'est pas possible pour les Soumissions supprimées."}},deletedSubmission:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Il n'y a pas de Soumissions supprimées"}},allRestored:{t:0,b:{t:2,i:[{t:3}],s:"Toutes les Soumissions supprimées ont été restaurées."}},allRestoredOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Toutes les Soumissions de la page ont été restaurées."}}}},id:{noMatching:{t:0,b:{t:2,i:[{t:3}],s:"Tidak ada Pengiriman yang cocok."}}},it:{action:{testOnDevice:{t:0,b:{t:2,i:[{t:3}],s:"Testa sul dispositivo"}},testInBrowser:{t:0,b:{t:2,i:[{t:3}],s:"Testa nel browser"}}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"Non sono presenti invii corrispondenti."}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"Tutti gli invii vengono cancellati."}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Tutti gli invii presenti nella pagina sono stati cancellati."}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Il download non è disponibile per gli invii cancellati"}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"Il filtro non è disponibile per gli invii cancellati."}},deletedSubmission:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Non ci sono invii cancellati."}},allRestored:{t:0,b:{t:2,i:[{t:3}],s:"Tutti gli invii cancellati vengono ripristinati."}},allRestoredOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Tutti i contributi presenti nella pagina sono stati ripristinati."}}}},ja:{noMatching:{t:0,b:{t:2,i:[{t:3}],s:"照合できる提出済フォームはありません。"}}},pt:{action:{testOnDevice:{t:0,b:{t:2,i:[{t:3}],s:"Testar no dispositivo'"}},testInBrowser:{t:0,b:{t:2,i:[{t:3}],s:"Testar no navegador"}}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"Não foram encontradas respostas com esses parâmetros."}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"Todas as Respostas foram excluídas."}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Todas as Respostas nesta página foram excluídas."}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"O download está indisponível para Respostas excluídas"}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"A filtragem está indisponível para Respostas excluídas"}},deletedSubmission:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Não há Respostas excluídas"}}}},sw:{noMatching:{t:0,b:{t:2,i:[{t:3}],s:"Hakuna Mawasilisho yanayolingana."}}},"zh-Hant":{action:{testOnDevice:{t:0,b:{t:2,i:[{t:3}],s:"在設備上測試"}},testInBrowser:{t:0,b:{t:2,i:[{t:3}],s:"在瀏覽器中測試"}}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"沒有符合的提交內容。"}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"所有提交內容都會被刪除。"}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"頁面上的所有提交內容都已刪除。"}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"已刪除的提交內容無法下載"}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"無法對已刪除的提交內容進行過濾"}},deletedSubmission:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"沒有已刪除的提交內容。"}},allRestored:{t:0,b:{t:2,i:[{t:3}],s:"所有已刪除的提交內容都會還原。"}},allRestoredOnPage:{t:0,b:{t:2,i:[{t:3}],s:"頁面上的所有提交內容都已還原。"}}}}}})}const rt={name:"SubmissionList",components:{EnketoFill:Zt,Loading:Kt,OdataLoadingMessage:Jt,Pagination:ue,Spinner:Y,SubmissionDelete:re,SubmissionDownload:$e,SubmissionDownloadButton:Be,SubmissionFieldDropdown:st,SubmissionFilters:Le,SubmissionRestore:lt,SubmissionTable:at,SubmissionUpdateReviewState:le,TeleportIfExists:Yt},inject:["alert"],props:{projectId:{type:String,required:!0},xmlFormId:{type:String,required:!0},draft:Boolean,deleted:{type:Boolean,required:!1}},emits:["fetch-keys","fetch-deleted-count","toggle-qr"],setup(e){const{form:t,keys:s,resourceView:a,odata:i,submitters:o,deletedSubmissionCount:r}=A(),v=e.draft?a("formDraft",h=>h.get()):t,b=de(),c=Q({fromQuery:h=>{const R=dt(h.submitterId,{validator:z=>/^[1-9]\d*$/.test(z)});return R.length!==0?R.map(z=>Number.parseInt(z,10)):o.dataExists?[...o.ids]:[]},toQuery:h=>({submitterId:h.length===o.length?[]:h.map(R=>R.toString())})});J(()=>o.dataExists,()=>{c.value.length===0&&o.length!==0&&(c.value=[...o.ids])});const _=Q({fromQuery:h=>{if(typeof h.start=="string"&&typeof h.end=="string"){const R=j.fromISO(h.start),z=j.fromISO(h.end);if(R.isValid&&z.isValid&&R<=z)return[R.startOf("day"),z.startOf("day")]}return[]},toQuery:h=>h.length!==0?{start:h[0].toISODate(),end:h[1].toISODate()}:{start:null,end:null}}),{reviewStates:p}=Vt(),m=Q({fromQuery:h=>dt(h.reviewState,{validator:R=>p.some(z=>R===Z(z)),default:()=>p.map(Z)}),toQuery:h=>({reviewState:h.length===p.length?[]:h})}),{request:D}=ce();return{form:t,keys:s,fields:b,formVersion:v,odata:i,submitters:o,deletedSubmissionCount:r,submitterIds:c,submissionDateRange:_,reviewStates:m,allReviewStates:p,request:D,pageSizeOptions:[250,500,1e3]}},data(){return{selectedFields:Qt(null),refreshing:!1,downloadModal:P(),reviewModal:P(),deleteModal:P(),restoreModal:P(),confirmDelete:!0,confirmRestore:!0,awaitingResponses:new Set,pagination:{page:0,size:this.pageSizeOptions[0],count:0},now:new Date().toISOString(),snapshotFilter:""}},computed:{filtersOnSubmitterId(){return this.submitterIds.length===0?!1:!(this.submitters.dataExists&&this.submitterIds.length===this.submitters.length&&this.submitterIds.every(t=>this.submitters.ids.has(t)))},odataFilter(){if(this.draft)return null;const e=[];if(this.filtersOnSubmitterId){const t=this.submitterIds.map(s=>`__system/submitterId eq ${s}`).join(" or ");e.push(`(${t})`)}if(this.submissionDateRange.length!==0){const t=this.submissionDateRange[0].toISO(),s=this.submissionDateRange[1].endOf("day").toISO();e.push(`__system/submissionDate ge ${t}`),e.push(`__system/submissionDate le ${s}`)}if(this.reviewStates.length!==this.allReviewStates.length){const t=this.reviewStates.map(s=>`__system/reviewState eq ${s}`).join(" or ");e.push(`(${t})`)}return e.length!==0?e.join(" and "):null},odataSelect(){if(this.selectedFields==null)return null;const e=this.selectedFields.map(({path:t})=>t.replace("/",""));return e.unshift("__id","__system"),e.join(",")},emptyTableMessage(){return!this.odata.dataExists||this.odata.value.length>0?"":this.odata.removedSubmissions.size===this.odata.count&&this.odata.count>0?this.deleted?this.$t("deletedSubmission.allRestored"):this.$t("allDeleted"):this.odata.removedSubmissions.size>0&&this.odata.value.length===0?this.deleted?this.$t("deletedSubmission.allRestoredOnPage"):this.$t("allDeletedOnPage"):this.deleted?this.$t("deletedSubmission.emptyTable"):this.odataFilter?this.$t("noMatching"):this.$t("submission.emptyTable")}},watch:{odataFilter(){this.fetchChunk(!0)},selectedFields(e,t){t!=null&&this.fetchChunk(!0)},deleted(){this.fetchChunk(!0)},"odata.count":{handler(){this.formVersion.dataExists&&this.odata.dataExists&&!this.odataFilter&&(this.formVersion.submissions=this.odata.count)}},"odata.removedSubmissions.size":{handler(e){this.formVersion.dataExists&&this.odata.dataExists&&(this.formVersion.submissions+=this.deleted?e:-e)}}},created(){this.fetchData()},methods:{fetchChunk(e,t=!1){this.refreshing=t;const s=e||t;s&&(this.now=new Date().toISOString(),this.setSnapshotFilter(),this.pagination.page=0);let a=this.snapshotFilter;this.odataFilter&&(a+=` and ${this.odataFilter}`),this.odata.request({url:C.odataSubmissions(this.projectId,this.xmlFormId,this.draft,{$top:this.pagination.size,$skip:this.pagination.page*this.pagination.size,$count:!0,$wkt:!0,$filter:a,$select:this.odataSelect,$orderby:"__system/submissionDate desc"}),clear:e,patch:s?null:i=>this.odata.replaceData(i.data,i.config)}).then(()=>{this.pagination.count=this.odata.count,this.deleted&&(this.deletedSubmissionCount.cancelRequest(),this.deletedSubmissionCount.dataExists||(this.deletedSubmissionCount.data=L({})),this.deletedSubmissionCount.value=this.odata.count)}).finally(()=>{this.refreshing=!1}).catch($),t&&!this.deleted&&!this.draft&&this.$emit("fetch-deleted-count"),t&&this.formVersion.keyId!=null&&this.keys.length===0&&this.$emit("fetch-keys")},fetchData(){this.fields.request({url:C.fields(this.projectId,this.xmlFormId,this.draft,{odata:!0})}).then(()=>{this.selectedFields=this.fields.selectable.length<=11?this.fields.selectable:this.fields.selectable.slice(0,10)}).catch($),this.fetchChunk(!0),this.draft||this.submitters.request({url:C.submitters(this.projectId,this.xmlFormId,this.draft)}).catch($)},setSnapshotFilter(){this.snapshotFilter="",this.deleted?this.snapshotFilter+=`__system/deletedAt le ${this.now}`:(this.snapshotFilter+=`__system/submissionDate le ${this.now} and `,this.snapshotFilter+=`(__system/deletedAt eq null or __system/deletedAt gt ${this.now})`)},afterReview(e,t){this.reviewModal.hide(),this.alert.success(this.$t("alert.updateReviewState"));const s=this.odata.value.findIndex(a=>a.__id===e.__id);s!==-1&&(this.odata.value[s].__system.reviewState=t,this.$refs.table.afterReview(s))},showDelete(e){this.confirmDelete?this.deleteModal.show({submission:e}):this.requestDelete([e,this.confirmDelete])},showRestore(e){this.confirmRestore?this.restoreModal.show({submission:e}):this.requestRestore([e,this.confirmRestore])},requestDelete(e){const[{__id:t},s]=e;this.awaitingResponses.add(t),this.request({method:"DELETE",url:C.submission(this.projectId,this.xmlFormId,t)}).then(()=>{this.deleteModal.hide(),this.deletedSubmissionCount.dataExists&&(this.deletedSubmissionCount.value+=1),this.alert.success(this.$t("alert.submissionDeleted")),s!=null&&(this.confirmDelete=s),this.odata.removedSubmissions.add(t);const a=this.odata.dataExists?this.odata.value.findIndex(i=>i.__id===t):-1;a!==-1&&(this.$refs.table.afterDelete(a),this.odata.value.splice(a,1))}).catch($).finally(()=>{this.awaitingResponses.delete(t)})},requestRestore(e){const[{__id:t},s]=e;this.awaitingResponses.add(t),this.request({method:"POST",url:C.restoreSubmission(this.projectId,this.xmlFormId,t)}).then(()=>{this.restoreModal.hide(),this.deletedSubmissionCount.dataExists&&this.deletedSubmissionCount.value>0&&(this.deletedSubmissionCount.value-=1),this.alert.success(this.$t("alert.submissionRestored")),s!=null&&(this.confirmRestore=s),this.odata.removedSubmissions.add(t);const a=this.odata.dataExists?this.odata.value.findIndex(i=>i.__id===t):-1;a!==-1&&(this.$refs.table.afterDelete(a),this.odata.value.splice(a,1))}).catch($).finally(()=>{this.awaitingResponses.delete(t)})},handlePageChange(){this.odata.count<this.pageSizeOptions[0]||this.fetchChunk(!1)},showDownloadModal(e=!1){this.downloadModal.odataFilter=e?this.odataFilter:null,this.downloadModal.show()}}},As={id:"submission-list"},Cs={id:"submission-list-actions",class:"table-actions-bar"},Ms=["aria-disabled"];function Vs(e,t,s,a,i,o){const r=g("loading"),v=g("enketo-fill"),b=g("submission-filters"),c=g("submission-field-dropdown"),_=g("spinner"),p=g("submission-download-button"),m=g("teleport-if-exists"),D=g("submission-table"),M=g("odata-loading-message"),h=g("pagination"),R=g("submission-download"),z=g("submission-update-review-state"),Ot=g("submission-delete"),qt=g("submission-restore"),$t=x("tooltip");return l(),u("div",As,[k(r,{state:a.fields.initiallyLoading},null,8,["state"]),S(n("div",null,[n("div",Cs,[s.draft?(l(),u(I,{key:0},[n("button",{id:"submission-list-test-on-device",type:"button",class:"btn btn-outlined",onClick:t[0]||(t[0]=w=>e.$emit("toggle-qr",w.target))},[t[17]||(t[17]=n("span",{class:"icon-qrcode"},null,-1)),y(d(e.$t("action.testOnDevice")),1)]),a.formVersion.dataExists?(l(),T(v,{key:0,id:"submission-list-test-in-browser","form-version":a.formVersion},{default:F(()=>[t[18]||(t[18]=n("span",{class:"icon-desktop"},null,-1)),y(d(e.$t("action.testInBrowser")),1)]),_:1,__:[18]},8,["form-version"])):f("",!0)],64)):f("",!0),s.draft?f("",!0):(l(),u("form",{key:1,class:"form-inline",onSubmit:t[4]||(t[4]=W(()=>{},["prevent"]))},[k(b,{submitterId:a.submitterIds,"onUpdate:submitterId":t[1]||(t[1]=w=>a.submitterIds=w),submissionDate:a.submissionDateRange,"onUpdate:submissionDate":t[2]||(t[2]=w=>a.submissionDateRange=w),reviewState:a.reviewStates,"onUpdate:reviewState":t[3]||(t[3]=w=>a.reviewStates=w),disabled:s.deleted,"disabled-message":s.deleted?e.$t("filterDisabledMessage"):null},null,8,["submitterId","submissionDate","reviewState","disabled","disabled-message"])],32)),s.draft?f("",!0):(l(),u("form",{key:2,class:"form-inline field-dropdown-form",onSubmit:t[6]||(t[6]=W(()=>{},["prevent"]))},[i.selectedFields!=null&&a.fields.selectable.length>11?(l(),T(c,{key:0,modelValue:i.selectedFields,"onUpdate:modelValue":t[5]||(t[5]=w=>i.selectedFields=w)},null,8,["modelValue"])):f("",!0)],32)),n("button",{id:"submission-list-refresh-button",type:"button",class:"btn btn-outlined move-right","aria-disabled":i.refreshing,onClick:t[7]||(t[7]=w=>o.fetchChunk(!1,!0))},[t[19]||(t[19]=n("span",{class:"icon-refresh"},null,-1)),y(d(e.$t("action.refresh"))+" ",1),k(_,{state:i.refreshing},null,8,["state"])],8,Ms),a.formVersion.dataExists&&a.odata.dataExists?(l(),T(m,{key:3,to:".form-submissions-heading-row"},{default:F(()=>[S(k(p,{"form-version":a.formVersion,"aria-disabled":s.deleted,filtered:o.odataFilter!=null&&!s.deleted,onDownload:o.showDownloadModal,onDownloadFiltered:t[8]||(t[8]=w=>o.showDownloadModal(!0))},null,8,["form-version","aria-disabled","filtered","onDownload"]),[[$t,s.deleted?e.$t("downloadDisabled"):null,void 0,{"aria-describedby":!0}]])]),_:1})):f("",!0)]),S(k(D,{ref:"table","project-id":s.projectId,"xml-form-id":s.xmlFormId,draft:s.draft,fields:i.selectedFields,deleted:s.deleted,"awaiting-deleted-responses":i.awaitingResponses,onReview:t[9]||(t[9]=w=>i.reviewModal.show({submission:w})),onDelete:o.showDelete,onRestore:o.showRestore},null,8,["project-id","xml-form-id","draft","fields","deleted","awaiting-deleted-responses","onDelete","onRestore"]),[[B,a.odata.dataExists]]),S(n("p",{class:"empty-table-message"},d(o.emptyTableMessage),513),[[B,o.emptyTableMessage]]),k(M,{type:"submission",top:i.pagination.size,odata:a.odata,filter:!!o.odataFilter,refreshing:i.refreshing,"total-count":a.formVersion.dataExists?a.formVersion.submissions:0},null,8,["top","odata","filter","refreshing","total-count"]),i.pagination.count>0?(l(),T(h,{key:0,page:i.pagination.page,"onUpdate:page":[t[10]||(t[10]=w=>i.pagination.page=w),t[12]||(t[12]=w=>o.handlePageChange())],size:i.pagination.size,"onUpdate:size":t[11]||(t[11]=w=>i.pagination.size=w),count:i.pagination.count,"size-options":a.pageSizeOptions,spinner:a.odata.awaitingResponse},null,8,["page","size","count","size-options","spinner"])):f("",!0)],512),[[B,i.selectedFields!=null]]),k(R,E(i.downloadModal,{"form-version":a.formVersion,onHide:t[13]||(t[13]=w=>i.downloadModal.hide(!1))}),null,16,["form-version"]),k(z,E(i.reviewModal,{"project-id":s.projectId,"xml-form-id":s.xmlFormId,onHide:t[14]||(t[14]=w=>i.reviewModal.hide()),onSuccess:o.afterReview}),null,16,["project-id","xml-form-id","onSuccess"]),k(Ot,E(i.deleteModal,{checkbox:"","awaiting-response":i.deleteModal.state&&i.awaitingResponses.has(i.deleteModal.submission.__id),onHide:t[15]||(t[15]=w=>i.deleteModal.hide()),onDelete:o.requestDelete}),null,16,["awaiting-response","onDelete"]),k(qt,E(i.restoreModal,{checkbox:"","awaiting-response":i.restoreModal.state&&i.awaitingResponses.has(i.restoreModal.submission.__id),onHide:t[16]||(t[16]=w=>i.restoreModal.hide()),onRestore:o.requestRestore}),null,16,["awaiting-response","onRestore"])])}typeof Rt=="function"&&Rt(rt);typeof zt=="function"&&zt(rt);const Ws=q(rt,[["render",Vs]]),Tt=(e,t)=>{const{searchParams:s}=new URL(t.url,window.location.origin),a=s.get("$skip")??0,i=e["@odata.count"];return e.value.map((o,r)=>({...o,__system:L({...o.__system,rowNumber:i-a-r})}))},Zs=()=>{const{createResource:e}=A(),t=e("odata",()=>({transformResponse:({data:i,config:o})=>K({value:K(Tt(i,o)),count:i["@odata.count"],removedSubmissions:L(new Set)}),replaceData(i,o){t.count=i["@odata.count"],t.value=K(Tt({...i,value:i.value.filter(r=>!t.removedSubmissions.has(r.__id))},o))}})),s=e("submitters",()=>({ids:Wt(()=>s.reduce((i,{id:o})=>i.add(o),new Set))})),a=e("deletedSubmissionCount",()=>({transformResponse:({data:i})=>L({value:i["@odata.count"]})}));return{odata:t,submitters:s,deletedSubmissionCount:a}};export{Ws as S,Zs as u};
