import{aa as ht,J as C,A as D,g as I,o as n,i as T,d as i,c as r,p as O,t as u,q as j,f as E,T as vt,e as N,a as it,a4 as L,k as x,ab as B,ac as st,W as nt,H as R,l as ot,h as A,ad as mt,ae as ft,K as lt,u as W,w as pt,F as q,j as H,D as gt,n as kt,z as yt,G as M,r as _t,af as Vt,ag as zt}from"./index-BJJ6YbMy.js";import{_ as rt}from"./modal-BMSEXbZM.js";import{u as wt}from"./request--gXHIWga.js";var U=ht(function(t,l,a){if(t>l)throw new Error("min must not be greater than max in clamp(min, max, value)");return a<t?t:a>l?l:a});function P(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{title:{t:0,b:{t:2,i:[{t:3,v:"Delete "},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:"Are you sure you want to delete “"},{t:4,k:"label"},{t:3,v:"”?"}]}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Delete immediately without confirmation until I leave the page"}}}}}})}function F(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{de:{title:{t:0,b:{t:2,i:[{t:3,v:"Löschen "},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:"Sind Sie sicher, dass Sie “"},{t:4,k:"label"},{t:3,v:"” löschen wollen?"}]}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Sofortiges Löschen ohne Bestätigung, bis ich die Seite verlasse"}}}},es:{title:{t:0,b:{t:2,i:[{t:3,v:"Borrar "},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:"¿Estás seguro de que quieres borrar “"},{t:4,k:"label"},{t:3,v:"”?"}]}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Borrar inmediatamente sin confirmación hasta que salga de la página"}}}},fr:{title:{t:0,b:{t:2,i:[{t:3,v:"Supprimer "},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:'Êtes vous sûr de vouloir supprimer "'},{t:4,k:"label"},{t:3,v:'" ?'}]}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Supprimer immédiatement sans confirmation jusqu'à ce que je quitte la page"}}}},it:{title:{t:0,b:{t:2,i:[{t:3,v:"Elimina "},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:'Sei sicuro di voler eliminare "'},{t:4,k:"label"},{t:3,v:'"?'}]}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Elimina immediatamente senza conferma finché non lascio la pagina"}}}},pt:{title:{t:0,b:{t:2,i:[{t:3,v:"Excluir "},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:"Tem certeza de que deseja excluir “"},{t:4,k:"label"},{t:3,v:"”?"}]}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Excluir imediatamente sem confirmação até que eu saia da página"}}}},"zh-Hant":{title:{t:0,b:{t:2,i:[{t:3,v:"刪除"},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:"您確定要刪除「"},{t:4,k:"label"},{t:3,v:"」？"}]}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"立即刪除，無需確認，直到我離開頁面"}}}}}})}const Ct={class:"modal-introduction"},$t={key:0},qt={class:"checkbox"},St={class:"modal-actions"},jt=["aria-disabled"],Et=["aria-disabled"],ut=Object.assign({name:"EntityDelete"},{__name:"delete",props:{state:Boolean,checkbox:Boolean,entity:Object,awaitingResponse:Boolean},emits:["hide","delete"],setup(e,{emit:t}){const l=e,a=t,c=C(!1);D(()=>l.state,b=>{b||(c.value=!1)});const p=C(null),m=()=>{l.checkbox&&p.value.focus()},y=()=>{l.checkbox?a("delete",[l.entity,!c.value]):a("delete",[l.entity])};return(b,h)=>(n(),I(rt,{id:"entity-delete",state:e.state,hideable:!e.awaitingResponse,backdrop:"",onHide:h[2]||(h[2]=z=>b.$emit("hide")),onShown:m},{title:T(()=>[E(u(b.$t("title",{label:e.entity?.label})),1)]),body:T(()=>[i("p",Ct,[i("span",null,u(b.$t("introduction[0]",{label:e.entity?.label})),1)]),e.checkbox?(n(),r("form",$t,[i("div",qt,[i("label",null,[j(i("input",{ref_key:"input",ref:p,"onUpdate:modelValue":h[0]||(h[0]=z=>c.value=z),type:"checkbox"},null,512),[[vt,c.value]]),E(" "+u(b.$t("field.noConfirm")),1)])])])):O("",!0),i("div",St,[i("button",{type:"button",class:"btn btn-link","aria-disabled":e.awaitingResponse,onClick:h[1]||(h[1]=z=>b.$emit("hide"))},u(b.$t("action.cancel")),9,jt),i("button",{type:"button",class:"btn btn-danger","aria-disabled":e.awaitingResponse,onClick:y},[E(u(b.$t("action.delete"))+" ",1),N(it,{state:e.awaitingResponse},null,8,["state"])],8,Et)])]),_:1},8,["state","hideable"]))}});typeof P=="function"&&P(ut);typeof F=="function"&&F(ut);const Bt=["value"],Ht={__name:"textarea-autosize",props:{modelValue:{type:String,required:!0},minHeight:{type:Number,default:0},mockUserResized:Boolean},emits:["update:modelValue"],setup(e,{expose:t}){const l=e,a=C(null),c=C(!1),p=()=>{if(c.value)return;const f=a.value.getBoundingClientRect().height,{style:V}=a.value,w=V.minHeight;V.minHeight=B(0);const s=V.height;V.height=B(f);const _=()=>{if(document.removeEventListener("mouseup",_),a.value==null)return;const v=a.value.getBoundingClientRect().height;c.value=v!==f||l.mockUserResized,c.value||(V.height=s,V.minHeight=w)};document.addEventListener("mouseup",_)};let m=!1;const y=()=>{const{style:f}=a.value;f.height=B(0);const{minHeight:V}=f;f.minHeight=B(0);const{scrollHeight:w}=a.value;if(f.minHeight=V,w!==0){const s=st(getComputedStyle(a.value));f.height=B(w+s.borderTop+s.borderBottom),m=!1}else f.height="",m=!0};L(y),D(()=>l.modelValue,()=>{c.value||nt(y)});const b=()=>{a.value.style.minHeight=B(l.minHeight)};return L(b),D(()=>l.minHeight,()=>{c.value||b()}),t({el:a,resize:()=>{(m||c.value)&&y(),c.value&&(b(),c.value=!1)},focus:()=>a.value.focus()}),(f,V)=>(n(),r("textarea",{ref_key:"el",ref:a,class:x(["textarea-autosize form-control",{"user-resized":c.value}]),value:l.modelValue,onInput:V[0]||(V[0]=w=>f.$emit("update:modelValue",w.target.value)),onMousedown:p},"  ",42,Bt))}},Rt={class:"label-cell"},At={class:"new-value"},Ot={class:"form-group"};let Q=0;const K=Object.assign({name:"EntityUpdateRow"},{__name:"row",props:{modelValue:String,oldValue:String,label:{type:String,required:!0},required:Boolean},emits:["update:modelValue"],setup(e,{expose:t,emit:l}){const a=e,c=l,p=R(()=>a.oldValue==null||a.oldValue==="");Q+=1;const m=`entity-update-row-textarea${Q}`,y=C(0);let b=!0;const h=C(null),z=()=>{y.value=h.value.getBoundingClientRect().height,b=!1};D(()=>a.oldValue,()=>{b=!0});const f=s=>{c("update:modelValue",s!==(a.oldValue??"")?s:void 0)},V=C(null),w=()=>{V.value.resize(),b&&z()};return t({textarea:R(()=>({...V.value,resize:w}))}),(s,_)=>{const v=ot("tooltip");return n(),r("tr",{class:x(["entity-update-row",{"uncommitted-change":e.modelValue!=null}])},[i("td",Rt,[j((n(),r("label",{for:m},[E(u(A(mt)(e.label,e.required)),1)])),[[v,void 0,void 0,{text:!0}]])]),i("td",{class:x(["old-value",{empty:p.value}])},[i("div",{ref_key:"oldValueContainer",ref:h},u(p.value?s.$t("common.emptyValue"):e.oldValue),513)],2),i("td",At,[i("div",Ot,[N(Ht,{id:m,ref_key:"textarea",ref:V,"model-value":e.modelValue??e.oldValue??"","min-height":y.value,required:e.required,"onUpdate:modelValue":f},null,8,["model-value","min-height","required"])])])],2)}}}),Dt=(e,t)=>{const l=()=>{e.value.style.width="";const a=e.value.getBoundingClientRect().width;if(a===0)return;const c=e.value.closest("table");c.style.width="auto";const p=e.value.getBoundingClientRect().width;p>a&&(e.value.style.width=B(Math.min(p,t*a))),c.style.width=""};return ft(e,()=>{e.value!=null&&l()}),{resize:l}};function J(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{title:{t:0,b:{t:2,i:[{t:3,v:"Update "},{t:4,k:"label"}]}},header:{currentValue:{t:0,b:{t:2,i:[{t:3}],s:"Current Value"}},updatedValue:{t:0,b:{t:2,i:[{t:3}],s:"Updated Value"}}},problem:{"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Data has been modified by another user. Please refresh to see the updated data."}}}}}})}function Z(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{cs:{title:{t:0,b:{t:2,i:[{t:3,v:"Aktualizace "},{t:4,k:"label"}]}},header:{currentValue:{t:0,b:{t:2,i:[{t:3}],s:"Aktuální hodnota"}},updatedValue:{t:0,b:{t:2,i:[{t:3}],s:"Aktualizovaná hodnota"}}},problem:{"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Data byla upravena jiným uživatelem. Aktualizujte prosím stránku, abyste viděli aktualizovaná data."}}}},de:{title:{t:0,b:{t:2,i:[{t:3,v:"Aktualisieren "},{t:4,k:"label"}]}},header:{currentValue:{t:0,b:{t:2,i:[{t:3}],s:"Aktueller Wert"}},updatedValue:{t:0,b:{t:2,i:[{t:3}],s:"Aktualisierter Wert"}}},problem:{"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Die Daten wurden von einem anderen Benutzer geändert. Bitte aktualisieren Sie die Seite, um die aktualisierten Daten anzuzeigen."}}}},es:{title:{t:0,b:{t:2,i:[{t:3,v:"Actualizar "},{t:4,k:"label"}]}},header:{currentValue:{t:0,b:{t:2,i:[{t:3}],s:"Valor actual"}},updatedValue:{t:0,b:{t:2,i:[{t:3}],s:"Valor actualizado"}}},problem:{"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Los datos han sido modificados por otro usuario. Actualice para ver los datos actualizados."}}}},fr:{title:{t:0,b:{t:2,i:[{t:3,v:"Mise à jour "},{t:4,k:"label"}]}},header:{currentValue:{t:0,b:{t:2,i:[{t:3}],s:"Valeur actuelle"}},updatedValue:{t:0,b:{t:2,i:[{t:3}],s:"Valeur Mise à jour"}}},problem:{"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Les données ont été modifiées par un autre utilisateur. Merci de rafraîchir pour voir les données mises à jour."}}}},it:{title:{t:0,b:{t:2,i:[{t:3,v:"Aggiorna "},{t:4,k:"label"}]}},header:{currentValue:{t:0,b:{t:2,i:[{t:3}],s:"Valore corrente"}},updatedValue:{t:0,b:{t:2,i:[{t:3}],s:"Valore aggiornato"}}},problem:{"409_15":{t:0,b:{t:2,i:[{t:3}],s:"I dati sono stati modificati da un altro utente. Aggiornare per vedere i dati aggiornati."}}}},pt:{title:{t:0,b:{t:2,i:[{t:3,v:"Atualizar "},{t:4,k:"label"}]}},header:{currentValue:{t:0,b:{t:2,i:[{t:3}],s:"Valor Atual"}},updatedValue:{t:0,b:{t:2,i:[{t:3}],s:"Valor Atualizado"}}},problem:{"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Os dados foram modificados por outro usuário. Por favor, atualize a página para ver os dados atualizados."}}}},sw:{title:{t:0,b:{t:2,i:[{t:3,v:"Sasisha "},{t:4,k:"label"}]}},header:{currentValue:{t:0,b:{t:2,i:[{t:3}],s:"Thamani ya Sasa"}},updatedValue:{t:0,b:{t:2,i:[{t:3}],s:"Thamani Iliyosasishwa"}}},problem:{"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Data imerekebishwa na mtumiaji mwingine. Tafadhali onyesha upya ili kuona data iliyosasishwa."}}}},"zh-Hant":{title:{t:0,b:{t:2,i:[{t:3,v:"更新"},{t:4,k:"label"}]}},header:{currentValue:{t:0,b:{t:2,i:[{t:3}],s:"目前數值"}},updatedValue:{t:0,b:{t:2,i:[{t:3}],s:"更新數值"}}},problem:{"409_15":{t:0,b:{t:2,i:[{t:3}],s:"資料已被另一用戶修改。請重新整理查看更新後的資料。"}}}}}})}const Tt={class:"table-scroll"},Nt={class:"table"},xt={class:"sr-only"},It={class:"new-value"},Lt={class:"modal-actions"},Wt=["aria-disabled"],Gt=["aria-disabled"],ct=Object.assign({name:"EntityUpdate"},{__name:"update",props:{state:Boolean,entity:Object},emits:["hide","success"],setup(e,{emit:t}){const{t:l}=lt(),a=e,c=t,{dataset:p}=W(),m=C(void 0),y=C(Object.create(null));D(()=>a.state,d=>{d||(m.value=void 0,y.value=Object.create(null))});const{request:b,awaitingResponse:h}=wt(),z=()=>{const{entity:d}=a,S=gt.entity(p.projectId,p.name,d.uuid,{baseVersion:d.currentVersion.version});b.patch(S,{label:m.value,data:y.value},{problemToAlert:({code:$})=>$===409.15?l("problem.409_15"):null}).then($=>{c("success",$.data)}).catch(kt)},f=C(null),{resize:V}=Dt(f,1.5),w=C(null),s=C(null),_=()=>{w.value.style.width="";const{width:d}=w.value.getBoundingClientRect(),S=st(getComputedStyle(s.value.textarea.el)),$=S.paddingLeft+S.paddingRight+S.borderLeft+S.borderRight;w.value.style.width=B(d-$/2)},v=C([]),o=()=>{s.value.textarea.focus(),nt(()=>{V(),_(),s.value.textarea.resize();for(const d of v.value)d.textarea.resize()})},g={currentVersion:{label:"",data:{}}},k=R(()=>(a.entity??g).currentVersion);return(d,S)=>(n(),I(rt,{id:"entity-update",state:e.state,hideable:!A(h),size:"large",backdrop:"",onShown:o,onHide:S[2]||(S[2]=$=>d.$emit("hide"))},{title:T(()=>[E(u(d.$t("title",k.value)),1)]),body:T(()=>[i("form",{onSubmit:pt(z,["prevent"])},[i("div",Tt,[i("table",Nt,[i("thead",null,[i("tr",null,[i("th",{ref_key:"labelCellHeader",ref:f,class:"label-cell"},[i("span",xt,u(d.$t("resource.property")),1)],512),i("th",{ref_key:"oldValueHeader",ref:w,class:"old-value"},u(d.$t("header.currentValue")),513),i("th",It,u(d.$t("header.updatedValue")),1)])]),i("tbody",null,[N(K,{ref_key:"labelRow",ref:s,modelValue:m.value,"onUpdate:modelValue":S[0]||(S[0]=$=>m.value=$),"old-value":k.value.label,label:d.$t("entity.entityLabel"),required:""},null,8,["modelValue","old-value","label"]),A(p).dataExists?(n(!0),r(q,{key:0},H(A(p).properties,({name:$})=>(n(),I(K,{key:$,ref_for:!0,ref_key:"propertyRows",ref:v,modelValue:y.value[$],"onUpdate:modelValue":bt=>y.value[$]=bt,"old-value":k.value.data[$],label:$},null,8,["modelValue","onUpdate:modelValue","old-value","label"]))),128)):O("",!0)])])]),i("div",Lt,[i("button",{type:"button",class:"btn btn-link","aria-disabled":A(h),onClick:S[1]||(S[1]=$=>d.$emit("hide"))},u(d.$t("action.neverMind")),9,Wt),i("button",{type:"submit",class:"btn btn-primary","aria-disabled":A(h)},[E(u(d.$t("action.update"))+" ",1),N(it,{state:A(h)},null,8,["state"])],8,Gt)])],32)]),_:1},8,["state","hideable"]))}});typeof J=="function"&&J(ct);typeof Z=="function"&&Z(ct);function X(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{submission:{t:0,b:{t:2,i:[{t:3,v:"Submission "},{t:4,k:"instanceName"}]}},api:{t:0,b:{t:2,i:[{t:3,v:"Update by "},{t:4,k:"name"}]}},bulk:{t:0,b:{t:2,i:[{t:3,v:"File "},{t:4,k:"filename"},{t:3,v:" upload by "},{t:4,k:"name"}]}}}}})}function Y(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{cs:{submission:{t:0,b:{t:2,i:[{t:3,v:"Odeslání "},{t:4,k:"instanceName"}]}},api:{t:0,b:{t:2,i:[{t:3,v:"Aktualizace od "},{t:4,k:"name"}]}}},de:{submission:{t:0,b:{t:2,i:[{t:3,v:"Übermittlung "},{t:4,k:"instanceName"}]}},api:{t:0,b:{t:2,i:[{t:3,v:"Update von "},{t:4,k:"name"}]}},bulk:{t:0,b:{t:2,i:[{t:3,v:"Datei "},{t:4,k:"filename"},{t:3,v:" hochgeladen von "},{t:4,k:"name"}]}}},es:{submission:{t:0,b:{t:2,i:[{t:3,v:"Envío "},{t:4,k:"instanceName"}]}},api:{t:0,b:{t:2,i:[{t:3,v:"Actualizar por "},{t:4,k:"name"}]}},bulk:{t:0,b:{t:2,i:[{t:3,v:"Archivo "},{t:4,k:"filename"},{t:3,v:" subido por "},{t:4,k:"name"}]}}},fr:{submission:{t:0,b:{t:2,i:[{t:3,v:"Soumission "},{t:4,k:"instanceName"}]}},api:{t:0,b:{t:2,i:[{t:3,v:"Mise à jour par "},{t:4,k:"name"}]}},bulk:{t:0,b:{t:2,i:[{t:3,v:"Envoi du fichier "},{t:4,k:"filename"},{t:3,v:" par "},{t:4,k:"name"}]}}},it:{submission:{t:0,b:{t:2,i:[{t:3,v:"Invio "},{t:4,k:"instanceName"}]}},api:{t:0,b:{t:2,i:[{t:3,v:"Aggiornato da "},{t:4,k:"name"}]}},bulk:{t:0,b:{t:2,i:[{t:3,v:"File "},{t:4,k:"filename"},{t:3,v:" caricato da "},{t:4,k:"name"}]}}},pt:{submission:{t:0,b:{t:2,i:[{t:3,v:"Resposta "},{t:4,k:"instanceName"}]}},api:{t:0,b:{t:2,i:[{t:3,v:"Atualização por "},{t:4,k:"name"}]}},bulk:{t:0,b:{t:2,i:[{t:3,v:"Arquivo "},{t:4,k:"filename"},{t:3,v:" carregado por "},{t:4,k:"name"}]}}},"zh-Hant":{submission:{t:0,b:{t:2,i:[{t:3,v:"提交"},{t:4,k:"instanceName"}]}},api:{t:0,b:{t:2,i:[{t:3,v:"由 "},{t:4,k:"name"},{t:3,v:"更新"}]}},bulk:{t:0,b:{t:2,i:[{t:3,v:"檔案"},{t:4,k:"filename"},{t:3,v:" 由 2"},{t:4,k:"name"},{t:3,v:"上傳"}]}}}}})}const G=Object.assign({name:"EntityVersionLink"},{__name:"version-link",props:{uuid:{type:String,required:!0},version:{type:Object,required:!0}},setup(e){const t=e,{entityPath:l}=yt(),a=M("projectId"),c=M("datasetName"),p=R(()=>`${l(a,c,t.uuid)}#v${t.version.version}`),{t:m}=lt(),y=R(()=>{const{source:b}=t.version,{submission:h,name:z}=b;if(h!=null){const f=h.currentVersion?.instanceName??h.instanceId;return m("submission",{instanceName:f})}return z!=null?m("bulk",{filename:z,name:t.version.creator.displayName}):m("api",{name:t.version.creator.displayName})});return(b,h)=>{const z=_t("router-link");return n(),I(z,{to:p.value},{default:T(()=>[E(u(y.value),1)]),_:1},8,["to"])}}});typeof X=="function"&&X(G);typeof Y=="function"&&Y(G);function tt(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{noConflicts:{t:0,b:{t:2,i:[{t:3}],s:"There are no conflicts to show."}},basedOn:{label:{t:0,b:{t:2,i:[{t:3}],s:"Based on"}},description:{t:0,b:{t:2,i:[{t:3}],s:"The version of this Entity that the author saw when they made their changes"}}},source:{label:{t:0,b:{t:2,i:[{t:3}],s:"Source"}},description:{t:0,b:{t:2,i:[{t:3}],s:"The update that generated this version"}}},status:{historical:{t:0,b:{t:2,i:[{t:3}],s:"This historical version is included because a recent parallel update was made based on this version of this Entity."}},lastGoodVersion:{t:0,b:{t:2,i:[{t:3}],s:"This is the most recent version in good agreement. After this update, potentially conflicting updates have been made in parallel."}},softConflict:{t:0,b:{t:2,i:[{t:3}],s:"This version may have been made based on old data."}},hardConflict:{t:0,b:{t:2,i:[{t:3}],s:"This version was made in parallel with other updates, some of which attempt to write to the same properties as this update."}}},branch:{t:0,b:{t:2,i:[{t:3}],s:"Offline update chain"}}}}})}function et(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{cs:{noConflicts:{t:0,b:{t:2,i:[{t:3}],s:"Nejsou žádné konflikty k zobrazení."}},source:{label:{t:0,b:{t:2,i:[{t:3}],s:"Zdroj"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Aktualizace, která vygenerovala tuto verzi"}}},status:{historical:{t:0,b:{t:2,i:[{t:3}],s:"Tato historická verze je zahrnuta, protože nedávná paralelní aktualizace byla provedena na základě této verze této Entity."}},lastGoodVersion:{t:0,b:{t:2,i:[{t:3}],s:"Toto je nejnovější verze v dobré shodě. Po této aktualizaci byly provedeny potenciálně konfliktní aktualizace paralelně."}},softConflict:{t:0,b:{t:2,i:[{t:3}],s:"Tato verze může být vytvořena na základě starých dat."}},hardConflict:{t:0,b:{t:2,i:[{t:3}],s:"Tato verze byla vytvořena paralelně s dalšími aktualizacemi, z nichž některé se snaží zapisovat do stejných vlastností jako tato aktualizace."}}}},de:{noConflicts:{t:0,b:{t:2,i:[{t:3}],s:"Es gibt keine Konflikte anzuzeigen."}},basedOn:{label:{t:0,b:{t:2,i:[{t:3}],s:"Basierend auf"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Die Version dieses Objekts, die der Autor gesehen hat, als er seine Änderungen vorgenommen hat."}}},source:{label:{t:0,b:{t:2,i:[{t:3}],s:"Quelle"}},description:{t:0,b:{t:2,i:[{t:3}],s:"Die Aktualisierung, die diese Version generiert hat."}}},status:{historical:{t:0,b:{t:2,i:[{t:3}],s:"Diese historische Version ist enthalten, weil ein kürzlich durchgeführtes paralleles Update auf dieser Version dieses Objekts basierte."}},lastGoodVersion:{t:0,b:{t:2,i:[{t:3}],s:"Dies ist die aktuellste Version in guter Übereinstimmung. Nach diesem Update wurden potenziell widersprüchliche Updates parallel durchgeführt."}},softConflict:{t:0,b:{t:2,i:[{t:3}],s:"Diese Version könnte auf alten Daten basieren."}},hardConflict:{t:0,b:{t:2,i:[{t:3}],s:"Diese Version wurde parallel zu anderen Updates erstellt, von denen einige versuchen, auf dieselben Eigenschaften wie dieses Update zu schreiben."}}},branch:{t:0,b:{t:2,i:[{t:3}],s:"Offline-Aktualisierungskette"}}},es:{noConflicts:{t:0,b:{t:2,i:[{t:3}],s:"No hay conflictos para mostrar."}},basedOn:{label:{t:0,b:{t:2,i:[{t:3}],s:"Basado en"}},description:{t:0,b:{t:2,i:[{t:3}],s:"La versión de esta Entidad que el autor vio cuando hizo sus cambios"}}},source:{label:{t:0,b:{t:2,i:[{t:3}],s:"Fuente"}},description:{t:0,b:{t:2,i:[{t:3}],s:"La actualización que generó esta versión"}}},status:{historical:{t:0,b:{t:2,i:[{t:3}],s:"Esta versión histórica se incluye porque se realizó una actualización paralela reciente basada en esta versión de esta Entidad."}},lastGoodVersion:{t:0,b:{t:2,i:[{t:3}],s:"Esta es la versión más reciente en buen acuerdo. Después de esta actualización, se han realizado actualizaciones potencialmente conflictivas en paralelo."}},softConflict:{t:0,b:{t:2,i:[{t:3}],s:"Esta versión puede haber sido creada en base a datos antiguos."}},hardConflict:{t:0,b:{t:2,i:[{t:3}],s:"Esta versión se realizó en paralelo con otras actualizaciones, algunas de las cuales intentan escribir en las mismas propiedades que esta actualización."}}},branch:{t:0,b:{t:2,i:[{t:3}],s:"Cadena de actualización offline"}}},fr:{noConflicts:{t:0,b:{t:2,i:[{t:3}],s:"Il n'y a pas de conflit à afficher."}},basedOn:{label:{t:0,b:{t:2,i:[{t:3}],s:"Basé sur"}},description:{t:0,b:{t:2,i:[{t:3}],s:"La version de cette Entité vue par les auteurs quand ils ont fait leurs changements."}}},source:{label:{t:0,b:{t:2,i:[{t:3}],s:"Source"}},description:{t:0,b:{t:2,i:[{t:3}],s:"La mise à jour qui a généré cette version"}}},status:{historical:{t:0,b:{t:2,i:[{t:3}],s:"Cette version historique est inclues parce qu'une récente mise à jour parallèle a été faite sur la base de cette version de l'Entité."}},lastGoodVersion:{t:0,b:{t:2,i:[{t:3}],s:"Ceci est la version cohérente la plus récente. Après cette mise à jour, des mises à jour potentiellement contradictoires ont été effectuées en parallèle."}},softConflict:{t:0,b:{t:2,i:[{t:3}],s:"Cette version pourrait avoir été faite sur la base d'une vieille donnée."}},hardConflict:{t:0,b:{t:2,i:[{t:3}],s:"Cette version a été faite en parallèle avec d'autres, certaines tentent d'écrire les mêmes propriétés que cette mise à jour."}}},branch:{t:0,b:{t:2,i:[{t:3}],s:"Chaîne de mise à jour hors ligne"}}},it:{noConflicts:{t:0,b:{t:2,i:[{t:3}],s:"Non ci sono conflitti da mostrare."}},basedOn:{label:{t:0,b:{t:2,i:[{t:3}],s:"Basato su"}},description:{t:0,b:{t:2,i:[{t:3}],s:"La versione di questa Entità che l'autore ha visto quando ha apportato le sue modifiche"}}},source:{label:{t:0,b:{t:2,i:[{t:3}],s:"Sorgente"}},description:{t:0,b:{t:2,i:[{t:3}],s:"L'aggiornamento che ha generato questa versione"}}},status:{historical:{t:0,b:{t:2,i:[{t:3}],s:"Questa versione storica è inclusa perché è stata effettuata un'aggiornamento parallelo recente basato su questa versione di questa Entità."}},lastGoodVersion:{t:0,b:{t:2,i:[{t:3}],s:"Questa è la versione più recente in buon accordo. Dopo questo aggiornamento, sono state effettuate aggiornamenti potenzialmente in contrasto in parallelo."}},softConflict:{t:0,b:{t:2,i:[{t:3}],s:"Questa versione potrebbe essere stata creata basandosi su dati vecchi."}},hardConflict:{t:0,b:{t:2,i:[{t:3}],s:"Questa versione è stata realizzata parallelamente ad altri aggiornamenti, alcuni dei quali cercano di scrivere sulle stesse proprietà di questo aggiornamento."}}},branch:{t:0,b:{t:2,i:[{t:3}],s:"Catena di aggiornamento offline"}}},pt:{noConflicts:{t:0,b:{t:2,i:[{t:3}],s:"Não há conflitos para mostrar."}},basedOn:{label:{t:0,b:{t:2,i:[{t:3}],s:"Com base em"}},description:{t:0,b:{t:2,i:[{t:3}],s:"A versão desta Entidade que o autor viu quando fez suas alterações"}}},source:{label:{t:0,b:{t:2,i:[{t:3}],s:"Fonte"}},description:{t:0,b:{t:2,i:[{t:3}],s:"A atualização que gerou esta versão"}}},status:{historical:{t:0,b:{t:2,i:[{t:3}],s:"Esta versão histórica está incluída porque uma atualização paralela recente foi feita com base nesta versão desta Entidade."}},lastGoodVersion:{t:0,b:{t:2,i:[{t:3}],s:"Esta é a versão consensual mais recente. Após essa atualização, atualizações potencialmente conflitantes foram feitas em paralelo."}},softConflict:{t:0,b:{t:2,i:[{t:3}],s:"Esta versão pode ter sido feita com base em dados antigos."}},hardConflict:{t:0,b:{t:2,i:[{t:3}],s:"Esta versão foi feita em paralelo com outras atualizações, algumas das quais tentam gravar nas mesmas propriedades desta atualização."}}},branch:{t:0,b:{t:2,i:[{t:3}],s:"Cadeia de atualização offline"}}},"zh-Hant":{noConflicts:{t:0,b:{t:2,i:[{t:3}],s:"沒有可顯示的衝突。"}},basedOn:{label:{t:0,b:{t:2,i:[{t:3}],s:"基於"}},description:{t:0,b:{t:2,i:[{t:3}],s:"作者在進行更改時看到的該實體的版本"}}},source:{label:{t:0,b:{t:2,i:[{t:3}],s:"來源"}},description:{t:0,b:{t:2,i:[{t:3}],s:"產生此版本的更新"}}},status:{historical:{t:0,b:{t:2,i:[{t:3}],s:"包含此歷史版本是因為最近基於該實體的此版本進行了平行更新。"}},lastGoodVersion:{t:0,b:{t:2,i:[{t:3}],s:"這是吻合良好的最新版本。在此更新之後，同時進行了可能存在衝突的更新。"}},softConflict:{t:0,b:{t:2,i:[{t:3}],s:"這個版本可能是根據舊數據製作的。"}},hardConflict:{t:0,b:{t:2,i:[{t:3}],s:"此版本是與其他更新並行進行的，其中一些更新嘗試寫入與此更新相同的屬性。"}}},branch:{t:0,b:{t:2,i:[{t:3}],s:"離線更新鏈"}}}}})}const Mt={key:0,class:"empty-table-message"},Ut={"aria-hidden":"true"},Pt={class:"dfn"},Ft={class:"sr-only"},Qt={class:"dfn"},Kt={class:"sr-only"},Jt={key:0},Zt={class:"label-header"},Xt={class:"property-name"},Yt={id:"entity-conflict-table-status-row"},te={class:"icon-history"},ee={class:"sr-only"},ae={class:"icon-check-circle"},ie={class:"sr-only"},se={class:"icon-question-circle"},ne={class:"sr-only"},oe={class:"icon-warning"},le={class:"sr-only"},re={key:1,id:"entity-conflict-table-branch-row"},ue={key:0},ce=["colspan"],at=50,de=250,dt=Object.assign({name:"EntityConflictTable"},{__name:"conflict-table",props:{uuid:{type:String,required:!0},versions:{type:Array,required:!0},linkTarget:String},setup(e,{expose:t}){const l=e,a=R(()=>{let s;const _=new Set,v=new Set;for(const[o,g]of l.versions.entries()){if(g.lastGoodVersion&&(s=g.version),g.conflict!=null&&!g.resolved)for(const d of Object.keys(g.dataReceived))_.add(d);const{branch:k}=g;if(k!=null&&g===k.first&&k.length!==1&&k.last.version===k.first.version+k.length-1){const d=o+k.length-1;d<l.versions.length&&l.versions[d]===k.last&&v.add(k)}}return{lastGoodVersion:s,allReceived:_,branches:v}}),c=R(()=>a.value.lastGoodVersion),p=R(()=>a.value.branches),{dataset:m}=W(),y=R(()=>{const s=[],{allReceived:_}=a.value;for(const{name:o}of m.properties)_.has(o)&&s.push(o);const v=_.has("label")?_.size-1:_.size;if(s.length!==v){const o=new Set(m.properties);for(const g of _)g!=="label"&&!o.has(g)&&s.push(g)}return s}),b=C(null),h=C(null),z=C(null),f=C([]),V=U(at,de),w=()=>{if(l.versions.length===0)return;const s=b.value.getBoundingClientRect().width;if(s===0)return;z.value.style.width="";for(const k of f.value)k.style.width="";h.value.style.width="auto";const _=V(z.value.getBoundingClientRect().width);z.value.style.width=B(_);const v=V(f.value.reduce((k,d)=>Math.max(k,d.getBoundingClientRect().width),0)),o=U(at,v,(s-_)/l.versions.length),g=B(o);for(const k of f.value)k.style.width=g;s>_+l.versions.length*o?(h.value.style.width="100%",zt(f.value).style.width=""):h.value.style.width=""};return L(w),Vt(window,"resize",w),t({resize:w}),(s,_)=>{const v=ot("tooltip");return n(),r("div",{id:"entity-conflict-table",ref_key:"el",ref:b},[e.versions.length===0?(n(),r("p",Mt,u(s.$t("noConflicts")),1)):(n(),r("table",{key:1,ref_key:"table",ref:h,class:"table"},[i("thead",null,[i("tr",null,[i("th",{ref_key:"firstHeader",ref:z},[i("span",Ut,u(s.$t("common.version")),1)],512),(n(!0),r(q,null,H(e.versions,o=>(n(),r("th",{ref_for:!0,ref_key:"versionHeaders",ref:f,key:o.version},u(s.$t("common.versionShort",o)),1))),128))])]),i("tbody",null,[i("tr",null,[i("th",null,[j((n(),r("span",Pt,[E(u(s.$t("basedOn.label")),1)])),[[v,void 0,void 0,{"sr-only":!0}]]),i("span",Ft," "+u(s.$t("basedOn.description")),1)]),(n(!0),r(q,null,H(e.versions,({version:o,baseVersion:g})=>(n(),r("td",{key:o},u(g==null?"":s.$t("common.versionShort",{version:g})),1))),128))]),i("tr",null,[i("th",null,[j((n(),r("span",Qt,[E(u(s.$t("source.label")),1)])),[[v,void 0,void 0,{"sr-only":!0}]]),i("span",Kt," "+u(s.$t("source.description")),1)]),(n(!0),r(q,null,H(e.versions,o=>j((n(),r("td",{key:o.version},[N(G,{uuid:e.uuid,version:o,target:e.linkTarget},null,8,["uuid","version","target"])])),[[v,void 0,void 0,{text:!0}]])),128))]),a.value.allReceived.has("label")?(n(),r("tr",Jt,[i("th",Zt,u(s.$t("entity.label")),1),(n(!0),r(q,null,H(e.versions,({version:o,label:g,baseDiff:k})=>j((n(),r("td",{key:o,class:x(o===1||k.has("label")?null:"unchanged")},[E(u(g),1)],2)),[[v,void 0,void 0,{text:!0}]])),128))])):O("",!0),(n(!0),r(q,null,H(y.value,o=>(n(),r("tr",{key:o},[j((n(),r("th",Xt,[E(u(o),1)])),[[v,void 0,void 0,{text:!0}]]),(n(!0),r(q,null,H(e.versions,({version:g,data:k,baseDiff:d})=>j((n(),r("td",{key:g,class:x(g===1||d.has(o)?null:"unchanged")},[E(u(k[o]),1)],2)),[[v,void 0,void 0,{text:!0}]])),128))]))),128)),i("tr",Yt,[i("th",null,u(s.$t("common.status")),1),(n(!0),r(q,null,H(e.versions,o=>(n(),r("td",{key:o.version},[o.version<c.value?(n(),r(q,{key:0},[j(i("span",te,null,512),[[v,void 0,void 0,{"sr-only":!0}]]),i("span",ee,u(s.$t("status.historical")),1)],64)):o.lastGoodVersion?(n(),r(q,{key:1},[j(i("span",ae,null,512),[[v,void 0,void 0,{"sr-only":!0}]]),i("span",ie,u(s.$t("status.lastGoodVersion")),1)],64)):o.conflict==="soft"?(n(),r(q,{key:2},[j(i("span",se,null,512),[[v,void 0,void 0,{"sr-only":!0}]]),i("span",ne,u(s.$t("status.softConflict")),1)],64)):o.conflict==="hard"?(n(),r(q,{key:3},[j(i("span",oe,null,512),[[v,void 0,void 0,{"sr-only":!0}]]),i("span",le,u(s.$t("status.hardConflict")),1)],64)):O("",!0)]))),128))]),p.value.size!==0?(n(),r("tr",re,[_[0]||(_[0]=i("th",null,null,-1)),(n(!0),r(q,null,H(e.versions,o=>(n(),r(q,{key:o.version},[p.value.has(o.branch)?o===o.branch.first?(n(),r("td",{key:1,colspan:o.branch.length},[j((n(),r("div",null,[E(u(s.$t("branch")),1)])),[[v,void 0,void 0,{text:!0}]])],8,ce)):O("",!0):(n(),r("td",ue))],64))),128))])):O("",!0)])],512))],512)}}});typeof tt=="function"&&tt(dt);typeof et=="function"&&et(dt);class be{constructor(t,l){if(t.trunkVersion!=null){this.first=t,this.length=1;const{trunkVersion:a}=t;this.firstInOrder=t.branchBaseVersion===a,this.lastContiguousWithTrunk=t.version===a+1?t.version:0}else this.first=l,this.length=t.version===1?1:2,this.firstInOrder=this.length===2,this.lastContiguousWithTrunk=t.version===2?2:1;this.id=t.branchId,this.last=t}add(t){this.length+=1,this.last=t,t.baseVersion===this.lastContiguousWithTrunk&&t.version===t.baseVersion+1&&(this.lastContiguousWithTrunk=t.version)}}const fe=()=>{const{createResource:e}=W();return e("entityVersions",()=>({transformResponse:({data:t})=>{const l=new Map;for(const a of t){const{branchId:c}=a;if(c!=null&&a.branchBaseVersion!=null){const m=l.get(c);if(m==null){const y=new be(a,t[0]);l.set(c,y),a.branch=y,y.first.branch=y}else m.add(a),a.branch=m}a.baseDiff=new Set(a.baseDiff),a.serverDiff=new Set(a.serverDiff);const{conflictingProperties:p}=a;a.conflictingProperties=p!=null?new Set(p):new Set}for(const a of l.values())a.length===1&&a.firstInOrder&&delete a.first.branch;return t}}))};export{dt as _,ct as a,ut as b,G as c,fe as u};
