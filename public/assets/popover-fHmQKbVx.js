import{_ as p,bm as f,c as m,p as u,o as g,d as h,R as $,bn as v,bo as w,bp as b,bq as k,br as E}from"./index-BJJ6YbMy.js";const x={name:"Popover",props:{target:HTMLElement,placement:{type:String,default:"right"}},emits:["hide"],watch:{target(t){t!=null&&this.$nextTick(this.show)}},mounted(){this.target!=null&&this.$nextTick(this.show),document.addEventListener("click",this.hideAfterClick,!0),window.addEventListener("resize",this.hideAfterResize),document.addEventListener("keydown",this.hideAfterEsc)},beforeUnmount(){document.removeEventListener("click",this.hideAfterClick,!0),window.removeEventListener("resize",this.hideAfterResize),document.removeEventListener("keydown",this.hideAfterEsc)},methods:{show(){const t=this.$el.querySelector(".arrow");f(this.target,this.$el,{placement:this.placement,middleware:[v(0),w({padding:5}),b(),k({fallbackPlacements:["bottom","left","right","top"]}),E({element:t})]}).then(({x:e,y:s,placement:i,strategy:l,middlewareData:o})=>{const{style:r}=this.$el;r.top=`${s}px`,r.left=`${e}px`,this.$el.classList.remove("top","right","bottom","left"),this.$el.classList.add(i),r.position=l;const c=i.split("-")[0],d={top:"bottom",right:"left",bottom:"top",left:"right"}[c];if(o.arrow){const{x:a,y:n}=o.arrow;Object.assign(t.style,{left:a!=null?`${a+10}px`:"",top:n!=null?`${n+10}px`:"",[d]:n!=null?`${-t.offsetWidth}px`:`${-t.offsetHeight}px`})}})},hideAfterClick(t){this.target!=null&&(t.target.closest(".popover")==null&&!this.target.contains(t.target)||t.target.hasAttribute("data-closes-popover"))&&this.$emit("hide")},hideAfterResize(){this.target!=null&&this.$emit("hide")},hideAfterEsc({key:t}){this.target!=null&&t==="Escape"&&this.$emit("hide")}}},A={key:0,class:"popover"},_={class:"popover-content"};function L(t,e,s,i,l,o){return s.target!=null?(g(),m("div",A,[h("div",_,[$(t.$slots,"default")]),e[0]||(e[0]=h("div",{class:"arrow"},null,-1))])):u("",!0)}const z=p(x,[["render",L]]);export{z as P};
