import{u as g,J as P,G as S,H as R,K as I,c as b,o as m,d as o,t as p,w as $,e as r,b as w,h as c,f as _,a as A,D as y,N as T,n as k,_ as K,r as D,Z as H,aw as L,a7 as Z,a9 as O,q as V,C as B,ap as Y,i as j,L as G,g as Q,p as F,Q as J}from"./index-BJJ6YbMy.js";import{_ as W}from"./head-DeISpnNl.js";import{u as X}from"./request--gXHIWga.js";function q(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{title:{t:0,b:{t:2,i:[{t:3}],s:"Basic Details"}},emailDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Your email address cannot be changed. It is used between Central and your login server to ensure your identity."}},action:{update:{t:0,b:{t:2,i:[{t:3}],s:"Update details"}}},problem:{"409_3":{t:0,b:{t:2,i:[{t:3,v:"You cannot change your email to "},{t:4,k:"email"},{t:3,v:" because this account already exists. Please try another email address."}]}}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"User details saved!"}}}}}})}function E(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{cs:{title:{t:0,b:{t:2,i:[{t:3}],s:"Základní podrobnosti"}},emailDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Vaši e-mailovou adresu nelze změnit. Používá se mezi serverem Central a přihlašovacím serverem k zajištění vaší identity."}},action:{update:{t:0,b:{t:2,i:[{t:3}],s:"Aktualizovat podrobnosti"}}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"Detaily uživatele uloženy!"}}}},de:{title:{t:0,b:{t:2,i:[{t:3}],s:"Basisinformationen"}},emailDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Ihre E-Mail-Adresse kann nicht geändert werden. Sie wird zwischen Central und Ihrem Anmeldeserver verwendet, um Ihre Identität sicherzustellen."}},action:{update:{t:0,b:{t:2,i:[{t:3}],s:"Details aktualisieren"}}},problem:{"409_3":{t:0,b:{t:2,i:[{t:3,v:"Sie können Ihre E-Mail-Adresse nicht in "},{t:4,k:"email"},{t:3,v:" ändern, da dieses Konto bereits existiert. Bitte versuchen Sie eine andere E-Mailadresse."}]}}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"Benutzerinformationen gespeichert!"}}}},es:{title:{t:0,b:{t:2,i:[{t:3}],s:"Información básica"}},emailDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Su dirección de correo electrónico no se puede cambiar. Se utiliza entre Central y su servidor de inicio de sesión para garantizar su identidad."}},action:{update:{t:0,b:{t:2,i:[{t:3}],s:"Actualizar información"}}},problem:{"409_3":{t:0,b:{t:2,i:[{t:3,v:"No puede cambiar su correo electrónico a "},{t:4,k:"email"},{t:3,v:" porque esta cuenta ya existe. Por favor, intente con otra dirección de correo electrónico."}]}}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"Información de usuario guardada!"}}}},fr:{title:{t:0,b:{t:2,i:[{t:3}],s:"Détails de base"}},emailDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Votre adresse de courriel ne peut être changée. Elle est utilisée entre Central et votre serveur de connexion pour vérifier votre identité."}},action:{update:{t:0,b:{t:2,i:[{t:3}],s:"Mettre à jour les détails"}}},problem:{"409_3":{t:0,b:{t:2,i:[{t:3,v:"Vous ne pouvez pas changer votre adresse de courriel pour "},{t:4,k:"email"},{t:3,v:" car ce compte existe déjà. Merci d'essayer une autre adresse."}]}}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"Détails de l'utilisateur sauvegardées !"}}}},id:{title:{t:0,b:{t:2,i:[{t:3}],s:"Rincian Dasar"}},action:{update:{t:0,b:{t:2,i:[{t:3}],s:"Rincian Pembaruan"}}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"Rincian pengguna tersimpan!"}}}},it:{title:{t:0,b:{t:2,i:[{t:3}],s:"Dettagli di base"}},emailDisabled:{t:0,b:{t:2,i:[{t:3}],s:"L'indirizzo e-mail non può essere modificato. Viene utilizzato tra Central e il server di login per garantire l'identità dell'utente."}},action:{update:{t:0,b:{t:2,i:[{t:3}],s:"Aggiornare dettagli"}}},problem:{"409_3":{t:0,b:{t:2,i:[{t:3,v:"Non puoi cambiare la tua email in "},{t:4,k:"email"},{t:3,v:" perché questo account esiste già. Per favore, prova un altro indirizzo email."}]}}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"Dettagli utente salvati!"}}}},ja:{title:{t:0,b:{t:2,i:[{t:3}],s:"基本詳細"}},action:{update:{t:0,b:{t:2,i:[{t:3}],s:"詳細の更新"}}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"ユーザー詳細の保存完了！"}}}},pt:{title:{t:0,b:{t:2,i:[{t:3}],s:"Detalhes básicos"}},emailDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Seu endereço de e-mail não pode ser alterado. Ele é usado entre o Central e seu servidor de login para garantir sua identidade."}},action:{update:{t:0,b:{t:2,i:[{t:3}],s:"Atualizar detalhes"}}},problem:{"409_3":{t:0,b:{t:2,i:[{t:3,v:"Você não pode alterar seu e-mail para "},{t:4,k:"email"},{t:3,v:" porque essa conta já existe. Tente outro endereço de e-mail."}]}}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"Detalhes do usuário gravados!"}}}},sw:{title:{t:0,b:{t:2,i:[{t:3}],s:"Maelezo ya Msingi"}},emailDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Anwani yako ya barua pepe haiwezi kubadilishwa. Inatumika kati ya Central na seva yako ya kuingia ili kuhakikisha utambulisho wako."}},action:{update:{t:0,b:{t:2,i:[{t:3}],s:"Sasisha maelezo"}}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"Maelezo ya mtumiaji yamehifadhiwa!"}}}},"zh-Hant":{title:{t:0,b:{t:2,i:[{t:3}],s:"基本訊息"}},emailDisabled:{t:0,b:{t:2,i:[{t:3}],s:"您的電子郵件地址無法變更。它在 Central 和您的登入伺服器之間使用，以確保您的身分。"}},action:{update:{t:0,b:{t:2,i:[{t:3}],s:"更新詳情"}}},problem:{"409_3":{t:0,b:{t:2,i:[{t:3,v:"您無法將電子郵件變更為 "},{t:4,k:"email"},{t:3,v:"，因為此帳戶已存在。請嘗試其他電子郵件地址。"}]}}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"用戶詳細資料已儲存！"}}}}}})}const ee={id:"user-edit-basic-details",class:"panel panel-simple"},te={class:"panel-heading"},ae={class:"panel-title"},se={class:"panel-body"},ie=["aria-disabled"],C=Object.assign({name:"UserEditBasicDetails"},{__name:"basic-details",setup(t){const{currentUser:e,user:a}=g(),{awaitingResponse:s}=a.toRefs(),i=P(a.email),d=P(a.displayName),h=S("config"),f=R(()=>h.oidcEnabled&&!e.can("user.update")),{t:l}=I(),x=S("alert"),M=()=>{a.request({method:"PATCH",url:y.user(a.id),data:{email:i.value,displayName:d.value},patch:({data:n})=>{a.email=n.email,a.displayName=n.displayName,a.updatedAt=n.updatedAt},problemToAlert:({code:n,details:u})=>n===409.3&&T(u.fields,["email","deleted"])?l("problem.409_3",{email:u.values[0]}):null}).then(()=>{x.success(l("alert.success"))}).catch(k)};return(n,u)=>(m(),b("div",ee,[o("div",te,[o("h1",ae,p(n.$t("title")),1)]),o("div",se,[o("form",{onSubmit:$(M,["prevent"])},[r(w,{modelValue:i.value,"onUpdate:modelValue":u[0]||(u[0]=v=>i.value=v),modelModifiers:{trim:!0},type:"email",placeholder:n.$t("field.email"),required:"","aria-disabled":f.value,tooltip:f.value?n.$t("emailDisabled"):null,autocomplete:"off"},null,8,["modelValue","placeholder","aria-disabled","tooltip"]),r(w,{modelValue:d.value,"onUpdate:modelValue":u[1]||(u[1]=v=>d.value=v),modelModifiers:{trim:!0},type:"text",placeholder:n.$t("field.displayName"),required:"",autocomplete:"off"},null,8,["modelValue","placeholder"]),o("button",{type:"submit",class:"btn btn-primary","aria-disabled":c(s)},[_(p(n.$t("action.update")),1),r(A,{state:c(s)},null,8,["state"])],8,ie)],32)])]))}});typeof q=="function"&&q(C);typeof E=="function"&&E(C);function U(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{title:{t:0,b:{t:2,i:[{t:3}],s:"Change Password"}},oidcBody:{t:0,b:{t:2,i:[{t:3}],s:"This Central server does not manage any login passwords."}},action:{change:{t:0,b:{t:2,i:[{t:3}],s:"Change password"}}},cannotChange:{t:0,b:{t:2,i:[{t:3}],s:"Only the owner of the account may directly set their own password."}},alert:{mismatch:{t:0,b:{t:2,i:[{t:3}],s:"Please check that your new passwords match."}},success:{t:0,b:{t:2,i:[{t:3}],s:"Success! Your password has been updated."}}}}}})}function N(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{cs:{title:{t:0,b:{t:2,i:[{t:3}],s:"Změnit heslo"}},oidcBody:{t:0,b:{t:2,i:[{t:3}],s:"Tento centrální server nespravuje žádná přihlašovací hesla."}},action:{change:{t:0,b:{t:2,i:[{t:3}],s:"Změnit heslo"}}},cannotChange:{t:0,b:{t:2,i:[{t:3}],s:"Pouze majitel účtu si může přímo nastavit vlastní heslo."}},alert:{mismatch:{t:0,b:{t:2,i:[{t:3}],s:"Zkontrolujte, zda se vaše nová hesla shodují."}},success:{t:0,b:{t:2,i:[{t:3}],s:"Úspěch! Vaše heslo bylo aktualizováno."}}}},de:{title:{t:0,b:{t:2,i:[{t:3}],s:"Passwort ändern"}},oidcBody:{t:0,b:{t:2,i:[{t:3}],s:"Dieser Central-Server verwaltet keine Anmeldepasswörter."}},action:{change:{t:0,b:{t:2,i:[{t:3}],s:"Passwort ändern"}}},cannotChange:{t:0,b:{t:2,i:[{t:3}],s:"Nur der Besitzer des Kontos kann sein eigenes Passwort direkt setzen."}},alert:{mismatch:{t:0,b:{t:2,i:[{t:3}],s:"Bitte prüfen Sie, dass ihre neuen Passwörter übereinstimmen."}},success:{t:0,b:{t:2,i:[{t:3}],s:"Ihr Passwort wurde erfolgreich aktualisiert."}}}},es:{title:{t:0,b:{t:2,i:[{t:3}],s:"Cambiar contraseña"}},oidcBody:{t:0,b:{t:2,i:[{t:3}],s:"Este servidor central no gestiona ninguna contraseña de inicio de sesión."}},action:{change:{t:0,b:{t:2,i:[{t:3}],s:"Cambiar contraseña"}}},cannotChange:{t:0,b:{t:2,i:[{t:3}],s:"Solo el propietario de la cuenta puede establecer directamente su contraseña."}},alert:{mismatch:{t:0,b:{t:2,i:[{t:3}],s:"Verifique que sus nuevas credenciales coincidan."}},success:{t:0,b:{t:2,i:[{t:3}],s:"¡Éxito! Su contraseña ha sido actualizada."}}}},fr:{title:{t:0,b:{t:2,i:[{t:3}],s:"Changer le mot de passe"}},oidcBody:{t:0,b:{t:2,i:[{t:3}],s:"Ce serveur Central ne gère aucun mot de passe de connexion."}},action:{change:{t:0,b:{t:2,i:[{t:3}],s:"Changer le mot de passe"}}},cannotChange:{t:0,b:{t:2,i:[{t:3}],s:"Seul le propriétaire du compte peut directement définir son propre mot de passe."}},alert:{mismatch:{t:0,b:{t:2,i:[{t:3}],s:"Veuillez vérifier que vos nouveaux mots de passe correspondent."}},success:{t:0,b:{t:2,i:[{t:3}],s:"Succès ! Votre mot de passe a été mis à jour."}}}},id:{title:{t:0,b:{t:2,i:[{t:3}],s:"Ubah Kata Sandi"}},action:{change:{t:0,b:{t:2,i:[{t:3}],s:"Ubah Kata Sandi"}}},cannotChange:{t:0,b:{t:2,i:[{t:3}],s:"Hanya pemilik akun yang bisa mengatur kata sandi."}},alert:{mismatch:{t:0,b:{t:2,i:[{t:3}],s:"Harap periksa kesamaan kata sandi baru Anda."}},success:{t:0,b:{t:2,i:[{t:3}],s:"Berhasil! Kata sandi telah diperbarui."}}}},it:{title:{t:0,b:{t:2,i:[{t:3}],s:"Cambiare la password"}},oidcBody:{t:0,b:{t:2,i:[{t:3}],s:"Questo Central server non gestisce alcuna password di accesso."}},action:{change:{t:0,b:{t:2,i:[{t:3}],s:"Cambiare la password"}}},cannotChange:{t:0,b:{t:2,i:[{t:3}],s:"Solo il titolare dell'account può impostare direttamente la propria password."}},alert:{mismatch:{t:0,b:{t:2,i:[{t:3}],s:"Per favore verifica che le tue nuove password corrispondano."}},success:{t:0,b:{t:2,i:[{t:3}],s:"L'operazione è riuscita con successo! La tua password è stata aggiornata."}}}},ja:{title:{t:0,b:{t:2,i:[{t:3}],s:"パスワードの変更"}},action:{change:{t:0,b:{t:2,i:[{t:3}],s:"パスワードの変更"}}},cannotChange:{t:0,b:{t:2,i:[{t:3}],s:"アカウントオーナーのみがパスワードを設定できます。"}},alert:{mismatch:{t:0,b:{t:2,i:[{t:3}],s:"新しいパスワードが一致することを確認して下さい。"}},success:{t:0,b:{t:2,i:[{t:3}],s:"成功です！パスワードが更新されました。"}}}},pt:{title:{t:0,b:{t:2,i:[{t:3}],s:"Mudar senha"}},oidcBody:{t:0,b:{t:2,i:[{t:3}],s:"Este servidor Central não gerencia nenhuma senha de login."}},action:{change:{t:0,b:{t:2,i:[{t:3}],s:"Mudar senha"}}},cannotChange:{t:0,b:{t:2,i:[{t:3}],s:"Apenas o proprietário da conta pode definir sua própria senha."}},alert:{mismatch:{t:0,b:{t:2,i:[{t:3}],s:"Por favor, certifique-se de que a suas novas senhas sejam iguais."}},success:{t:0,b:{t:2,i:[{t:3}],s:"Sua senha foi atualizada com sucesso!"}}}},sw:{title:{t:0,b:{t:2,i:[{t:3}],s:"Badilisha neno la siri"}},oidcBody:{t:0,b:{t:2,i:[{t:3}],s:"Seva hii ya Kati haidhibiti manenosiri yoyote ya kuingia."}},action:{change:{t:0,b:{t:2,i:[{t:3}],s:"Badilisha neno la siri"}}},cannotChange:{t:0,b:{t:2,i:[{t:3}],s:"Ni mmiliki wa akaunti pekee ndiye anayeweza kuweka nenosiri lake moja kwa moja."}},alert:{mismatch:{t:0,b:{t:2,i:[{t:3}],s:"Ni mmiliki wa akaunti pekee ndiye anayeweza kuweka nenosiri lake moja kwa moja."}},success:{t:0,b:{t:2,i:[{t:3}],s:"Mafanikio! Nenosiri lako limesasishwa."}}}},"zh-Hant":{title:{t:0,b:{t:2,i:[{t:3}],s:"變更密碼"}},oidcBody:{t:0,b:{t:2,i:[{t:3}],s:"此 Central 服器不管理任何登入密碼。"}},action:{change:{t:0,b:{t:2,i:[{t:3}],s:"變更密碼"}}},cannotChange:{t:0,b:{t:2,i:[{t:3}],s:"只有帳戶所有者可以直接設定自己的密碼。"}},alert:{mismatch:{t:0,b:{t:2,i:[{t:3}],s:"請檢查您的新密碼是否符合。"}},success:{t:0,b:{t:2,i:[{t:3}],s:"成功！您的密碼已更新。"}}}}}})}const z={name:"UserEditPassword",components:{FormGroup:w,Spinner:A},inject:["alert","config"],setup(){const{currentUser:t,user:e}=g(),{request:a,awaitingResponse:s}=X();return{currentUser:t,user:e,request:a,awaitingResponse:s}},data(){return{oldPassword:"",newPassword:"",tooShort:!1,confirm:"",mismatch:!1}},methods:{validate(){return this.tooShort=!1,this.mismatch=!1,this.newPassword.length<10?(this.alert.danger(this.$t("alert.passwordTooShort")),this.tooShort=!0,!1):this.confirm!==this.newPassword?(this.alert.danger(this.$t("alert.mismatch")),this.mismatch=!0,!1):!0},submit(){if(!this.validate())return;const t={old:this.oldPassword,new:this.newPassword};this.request({method:"PUT",url:y.password(this.user.id),data:t}).then(()=>{this.alert.success(this.$t("alert.success"))}).catch(k)}}},oe={id:"user-edit-password",class:"panel panel-simple"},ne={class:"panel-heading"},re={class:"panel-title"},le={class:"panel-body"},de={key:0},ce=["value"],ue=["aria-disabled"],me={key:2};function pe(t,e,a,s,i,d){const h=D("form-group"),f=D("spinner");return m(),b("div",oe,[o("div",ne,[o("h1",re,p(t.$t("title")),1)]),o("div",le,[d.config.oidcEnabled?(m(),b("p",de,p(t.$t("oidcBody")),1)):s.user.dataExists&&s.user.id===s.currentUser.id?(m(),b("form",{key:1,onSubmit:e[3]||(e[3]=$((...l)=>d.submit&&d.submit(...l),["prevent"]))},[o("input",{value:s.currentUser.email,autocomplete:"username"},null,8,ce),r(h,{id:"user-edit-password-old-password",modelValue:i.oldPassword,"onUpdate:modelValue":e[0]||(e[0]=l=>i.oldPassword=l),type:"password",placeholder:t.$t("field.oldPassword"),required:"",autocomplete:"current-password"},null,8,["modelValue","placeholder"]),r(h,{id:"user-edit-password-new-password",modelValue:i.newPassword,"onUpdate:modelValue":e[1]||(e[1]=l=>i.newPassword=l),type:"password",placeholder:t.$t("field.newPassword"),required:"","has-error":i.tooShort||i.mismatch,autocomplete:"new-password"},null,8,["modelValue","placeholder","has-error"]),r(h,{id:"user-edit-password-confirm",modelValue:i.confirm,"onUpdate:modelValue":e[2]||(e[2]=l=>i.confirm=l),type:"password",placeholder:t.$t("field.passwordConfirm"),required:"","has-error":i.mismatch,autocomplete:"new-password"},null,8,["modelValue","placeholder","has-error"]),o("button",{type:"submit",class:"btn btn-primary","aria-disabled":s.awaitingResponse},[_(p(t.$t("action.change"))+" ",1),r(f,{state:s.awaitingResponse},null,8,["state"])],8,ue)],32)):(m(),b("p",me,p(t.$t("cannotChange")),1))])])}typeof U=="function"&&U(z);typeof N=="function"&&N(z);const be=K(z,[["render",pe]]),he=()=>{const{currentUser:t,createResource:e}=g(),a=e("user",()=>({transformResponse:({data:s})=>H(s)}));return L(()=>{a.dataExists&&t.dataExists&&a.id===t.id&&Object.assign(t.data,a.data)}),a},fe={class:"row"},ve={class:"col-xs-7"},we={class:"col-xs-5"},ke=Object.assign({name:"UserEdit"},{__name:"edit",props:{id:{type:String,required:!0}},setup(t){const e=t,a=he();return a.request({url:y.user(e.id)}).catch(k),Z().meta.title==null&&O(()=>[a.displayName]),(i,d)=>(m(),b("div",null,[V(r(W,null,Y({_:2},[c(a).dataExists?{name:"title",fn:j(()=>[_(p(c(a).displayName),1)]),key:"0"}:void 0]),1536),[[B,c(a).dataExists]]),r(J,null,{default:j(()=>[r(G,{state:c(a).initiallyLoading},null,8,["state"]),V(o("div",fe,[o("div",ve,[c(a).dataExists?(m(),Q(C,{key:0})):F("",!0)]),o("div",we,[r(be)])],512),[[B,c(a).dataExists]])]),_:1})]))}});export{ke as default};
