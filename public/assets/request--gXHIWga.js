import{G as p,J as g,bs as w,A as v,b6 as b,a3 as q,bt as R,I as x}from"./index-BJJ6YbMy.js";const A=(r,n)=>l=>{const{router:e,i18n:a,alert:u,http:f,logger:d}=r,{fulfillProblem:o=void 0,problemToAlert:h=void 0,alert:m=!0,...i}=l,{data:s}=i;if(s!=null&&s instanceof File&&s.size>1e8)return u.danger(a.t("mixin.request.alert.fileSize",{name:s.name})),Promise.reject(new Error("file size exceeds limit"));n.value=!0;const c=e!=null?e.currentRoute.value:null;return f.request(i).catch(t=>{if(e!=null&&e.currentRoute.value!==c)throw new Error("route change");if(o!=null&&t.response!=null&&q(t.response.data)&&o(t.response.data))return t.response;throw n.value=!1,m&&(R(d,t),u.danger(x(a,t,h))),t}).then(t=>{if(e!=null&&e.currentRoute.value!==c)throw new Error("route change");return n.value=!1,t})},z=()=>{const r=p("container"),n=g(!1),l=w(A(r,n)),{router:e}=r;return e!=null&&v(e.currentRoute,()=>{n.value=!1}),{request:l,awaitingResponse:b(n)}};export{z as u};
