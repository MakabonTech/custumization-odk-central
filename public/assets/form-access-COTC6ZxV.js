import{_ as y,r as h,g as E,o as l,i as p,d as o,e as b,t as n,f as w,u as j,l as O,c,F as v,q as _,p as g,k,j as M,a as L,L as N,M as H,v as R,D as T,n as W,P as G}from"./index-BJJ6YbMy.js";import{_ as V}from"./modal-BMSEXbZM.js";import{_ as Z}from"./link-CVIq4c0k.js";import{_ as J}from"./freeze-CDRjGwqt.js";import{_ as Q}from"./sentence-separator-DdZUROGk.js";import{u as Y}from"./request--gXHIWga.js";import"./link-if-can-B5zC8OjL.js";import"./hover-card-hXE3Fll1.js";function $(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{title:{t:0,b:{t:2,i:[{t:3}],s:"Form States"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Form States control the lifecycle state of each Form. Usually, but not always, a Form will start Open and proceed through Closing to Closed when it is no longer needed."}},{full:{t:0,b:{t:2,i:[{t:4,k:"open"},{t:3,v:" Forms are available to download and will accept new Submissions."}]}},open:{t:0,b:{t:2,i:[{t:3}],s:"Open"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closing"},{t:3,v:" Forms will accept new Submissions, but are "},{t:4,k:"not"},{t:3,v:" available to download."}]}},closing:{t:0,b:{t:2,i:[{t:3}],s:"Closing"}},not:{t:0,b:{t:2,i:[{t:3}],s:"not"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closed"},{t:3,v:" Forms are "},{t:4,k:"not1"},{t:3,v:" available to download and will "},{t:4,k:"not2"},{t:3,v:" accept new Submissions."}]}},closed:{t:0,b:{t:2,i:[{t:3}],s:"Closed"}},not1:{t:0,b:{t:2,i:[{t:3}],s:"not"}},not2:{t:0,b:{t:2,i:[{t:3}],s:"not"}}}]}}})}function U(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{cs:{title:{t:0,b:{t:2,i:[{t:3}],s:"Stavy formuláře"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Stavy formuláře kontrolují stav životního cyklu každého formuláře. Obvykle, ale ne vždy, bude formulář otevřen a bude pokračovat přes Uzavření až do Uzavřeno, pokud již nebude potřeba."}},{full:{t:0,b:{t:2,i:[{t:4,k:"open"},{t:3,v:" Formuláře jsou k dispozici ke stažení a přijímají nová podání."}]}},open:{t:0,b:{t:2,i:[{t:3}],s:"Otevřené"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closing"},{t:3,v:" Formuláře přijímají nová podání, ale "},{t:4,k:"not"},{t:3,v:"jsou k dispozici ke stažení."}]}},closing:{t:0,b:{t:2,i:[{t:3}],s:"Uzavřené"}},not:{t:0,b:{t:2,i:[{t:3}],s:"nejsou"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closed"},{t:3,v:" Formuláře "},{t:4,k:"not1"},{t:3,v:"jsou k dispozici ke stažení a "},{t:4,k:"not2"},{t:3,v:"přijímají nová podání."}]}},closed:{t:0,b:{t:2,i:[{t:3}],s:"Uzavřené"}},not1:{t:0,b:{t:2,i:[{t:3}],s:"ne"}},not2:{t:0,b:{t:2,i:[{t:3}],s:"ne"}}}]},de:{title:{t:0,b:{t:2,i:[{t:3}],s:"Formular-Status"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Formular-Status steuern den Lebenszyklusstatus eines jeden Formulars. Normalerweise, aber nicht immer, beginnt ein Formular im Status Offen und geht weiter über Schließen nach Geschlossen, wenn es nicht mehr benötigt wird."}},{full:{t:0,b:{t:2,i:[{t:4,k:"open"},{t:3,v:" Formulare sind bereit zum Download und akzeptieren neue Einreichungen."}]}},open:{t:0,b:{t:2,i:[{t:3}],s:"Offen"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closing"},{t:3,v:" Formulare akzeptieren neue Einreichungen, aber "},{t:4,k:"not"},{t:3,v:" sind nicht zum Download bereit."}]}},closing:{t:0,b:{t:2,i:[{t:3}],s:"Schließen"}},not:{t:0,b:{t:2,i:[{t:3}],s:"nicht"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closed"},{t:3,v:" Formulare können "},{t:4,k:"not1"},{t:3,v:" heruntergeladen werden und akzeptieren "},{t:4,k:"not2"},{t:3,v:" neuen Übermittlungen."}]}},closed:{t:0,b:{t:2,i:[{t:3}],s:"Geschlossene"}},not1:{t:0,b:{t:2,i:[{t:3}],s:"nicht"}},not2:{t:0,b:{t:2,i:[{t:3}],s:"nicht"}}}]},es:{title:{t:0,b:{t:2,i:[{t:3}],s:"Estado del formulario"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"El estado del formulario controla el ciclo de vida de cada formulario. Por lo general, pero en algunas ocasiones no será de este modo, el formulario comenzará abierto y luego procederá a cerrarse cuando ya no sea necesario."}},{full:{t:0,b:{t:2,i:[{t:4,k:"open"},{t:3,v:" Formularios disponibles para descarga y aceptáran nuevos envíos."}]}},open:{t:0,b:{t:2,i:[{t:3}],s:"abiertos"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closing"},{t:3,v:" Formularios aceptáran nuevos envíos, pero "},{t:4,k:"not"},{t:3,v:" están disponibles para descarga."}]}},closing:{t:0,b:{t:2,i:[{t:3}],s:"cerrando"}},not:{t:0,b:{t:2,i:[{t:3}],s:"no"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closed"},{t:3,v:" Formularios están "},{t:4,k:"not1"},{t:3,v:" disponibles para descarga y "},{t:4,k:"not2"},{t:3,v:" aceptáran nuevos envíos."}]}},closed:{t:0,b:{t:2,i:[{t:3}],s:"cerrados"}},not1:{t:0,b:{t:2,i:[{t:3}],s:"no"}},not2:{t:0,b:{t:2,i:[{t:3}],s:"no"}}}]},fr:{title:{t:0,b:{t:2,i:[{t:3}],s:"États des formulaires"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:`Les États de formulaire contrôlent le cycle de vie de chaque formulaire. Généralement, mais pas toujours, un formulaire démarrera "Ouvert", sera utilisé jusqu'à sa "Fermeture", et sera "Fermé" quand il ne sera plus utile.`}},{full:{t:0,b:{t:2,i:[{t:4,k:"open"},{t:3,v:" formulaires sont disponibles pour le téléchargement et prêts à accepter des soumissions."}]}},open:{t:0,b:{t:2,i:[{t:3}],s:"Ouvert"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closing"},{t:3,v:" Les formulaires acceptent des soumissions, mais ne sont "},{t:4,k:"not"},{t:3,v:" disponibles au téléchargement."}]}},closing:{t:0,b:{t:2,i:[{t:3}],s:"Fermeture"}},not:{t:0,b:{t:2,i:[{t:3}],s:"pas"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closed"},{t:3,v:" Les formulaires ne sont "},{t:4,k:"not1"},{t:3,v:" disponibles au téléchargement et n'acceptent "},{t:4,k:"not2"},{t:3,v:" de nouvelles soumissions."}]}},closed:{t:0,b:{t:2,i:[{t:3}],s:"Fermé"}},not1:{t:0,b:{t:2,i:[{t:3}],s:"pas"}},not2:{t:0,b:{t:2,i:[{t:3}],s:"pas"}}}]},id:{title:{t:0,b:{t:2,i:[{t:3}],s:"Status Formulir"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Status Formulir mengontrol keadaan lingkar keaktifan setiap formulir. Biasanya, tidak selalu, sebuah formulir akan dimulai dengan status Terbuka, kemudian Penutupan, hingga Ditutup, ketika sudah tidak diperlukan lagi."}},{},{},{}]},it:{title:{t:0,b:{t:2,i:[{t:3}],s:"Stato del Formulario"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:'Gli stati del formulario controllano lo stato del ciclo di vita di ogni formulario. Di solito, ma non sempre, un formulario inizia nello stato "aperto" e procede negli stati da "in chiusura" a "chiuso" quando non è più necessario.'}},{full:{t:0,b:{t:2,i:[{t:4,k:"open"},{t:3,v:" Formulari sono disponibili per il download e accetteranno nuovi Invii."}]}},open:{t:0,b:{t:2,i:[{t:3}],s:"Aperto"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closing"},{t:3,v:" Formulari accetteranno nuovi Invii, ma sono "},{t:4,k:"not"},{t:3,v:" disponibili per il download."}]}},closing:{t:0,b:{t:2,i:[{t:3}],s:"In fase di chiusura"}},not:{t:0,b:{t:2,i:[{t:3}],s:"non"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closed"},{t:3,v:" Formulari sono "},{t:4,k:"not1"},{t:3,v:" disponibili per il download e "},{t:4,k:"not2"},{t:3,v:" accetteranno nuovi invii."}]}},closed:{t:0,b:{t:2,i:[{t:3}],s:"Chiuso"}},not1:{t:0,b:{t:2,i:[{t:3}],s:"non"}},not2:{t:0,b:{t:2,i:[{t:3}],s:"non"}}}]},ja:{title:{t:0,b:{t:2,i:[{t:3}],s:"フォームの状態"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"フォームの状態では、各フォームのライフサイクルにおける状態を制御します。例外もありますが、通常、フォームは「公開」から始まり、「クロージング状態」を経て、不要になったら「終了」となります。"}},{full:{t:0,b:{t:2,i:[{t:4,k:"open"},{t:3,v:"のフォームはダウンロードでき、新規のフォームの提出も受け付けます。"}]}},open:{t:0,b:{t:2,i:[{t:3}],s:"公開中"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closing"},{t:3,v:"のフォームは新規のフォームの提出を受け付けますが、ダウンロードはでき"},{t:4,k:"not"},{t:3,v:"。"}]}},closing:{t:0,b:{t:2,i:[{t:3}],s:"クロージング状態"}},not:{t:0,b:{t:2,i:[{t:3}],s:"ません"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closed"},{t:3,v:"したフォームはダウンロードでき"},{t:4,k:"not1"},{t:3,v:"。また新規のフォームの提出も受け付け"},{t:4,k:"not2"},{t:3,v:"。"}]}},closed:{t:0,b:{t:2,i:[{t:3}],s:"終了"}},not1:{t:0,b:{t:2,i:[{t:3}],s:"ません"}},not2:{t:0,b:{t:2,i:[{t:3}],s:"ません"}}}]},pt:{title:{t:0,b:{t:2,i:[{t:3}],s:"Status de formulário"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Os status do formulário controlam o ciclo de vida de cada formulário. Normalmente, mas nem sempre, um formulário começará como Aberto, em seguida Em fechamento, e mudará para Fechado quando não precisar mais ser usado."}},{full:{t:0,b:{t:2,i:[{t:3,v:"Formulários com status "},{t:4,k:"open"},{t:3,v:" ficam disponíveis para baixar e aceitarão novas respostas."}]}},open:{t:0,b:{t:2,i:[{t:3}],s:"Aberto"}}},{full:{t:0,b:{t:2,i:[{t:3,v:"Formulários com o status "},{t:4,k:"closing"},{t:3,v:" aceitarão novas respostas, mas "},{t:4,k:"not"},{t:3,v:" estarão disponíveis para baixar."}]}},closing:{t:0,b:{t:2,i:[{t:3}],s:"Em fechamento"}},not:{t:0,b:{t:2,i:[{t:3}],s:"não"}}},{full:{t:0,b:{t:2,i:[{t:3,v:"Formulários com o status "},{t:4,k:"closed"},{t:3,v:" "},{t:4,k:"not1"},{t:3,v:" estão disponíveis para baixar e "},{t:4,k:"not2"},{t:3,v:" aceitam novas respostas."}]}},closed:{t:0,b:{t:2,i:[{t:3}],s:"Fechado"}},not1:{t:0,b:{t:2,i:[{t:3}],s:"não"}},not2:{t:0,b:{t:2,i:[{t:3}],s:"não"}}}]},sw:{title:{t:0,b:{t:2,i:[{t:3}],s:"Hali ya fomu"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"Hali ya Fomu hudhibiti hali ya mzunguko wa maisha ya kila Fomu. Kwa kawaida, lakini si mara zote, Fomu itaanza Fungua na kuendelea na Kufunga hadi Kufungwa wakati haihitajiki tena."}},{full:{t:0,b:{t:2,i:[{t:4,k:"open"},{t:3,v:" Fomu zinapatikana kwa kupakuliwa na zitakubali Mawasilisho mapya."}]}},open:{t:0,b:{t:2,i:[{t:3}],s:"Fungua"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closing"},{t:3,v:" Fomu zitakubali Mawasilisho mapya, lakini si "},{t:4,k:"not"},{t:3,v:" kupakuliwa."}]}},closing:{t:0,b:{t:2,i:[{t:3}],s:"Kufunga"}},not:{t:0,b:{t:2,i:[{t:3}],s:"sivyo"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closed"},{t:3,v:" Fomu "},{t:4,k:"not1"},{t:3,v:" kupakuliwa na "},{t:4,k:"not2"},{t:3,v:" hazitakubali Mawasilisho mapya"}]}},closed:{t:0,b:{t:2,i:[{t:3}],s:"Imefungwa"}},not1:{t:0,b:{t:2,i:[{t:3}],s:"Sivyo"}},not2:{t:0,b:{t:2,i:[{t:3}],s:"Sivyo"}}}]},"zh-Hant":{title:{t:0,b:{t:2,i:[{t:3}],s:"表單狀態"}},introduction:[{t:0,b:{t:2,i:[{t:3}],s:"表單狀態，可控制每個表單的生命週期狀態。 通常，但不總是，表單會從「公開」（Open）狀態開始，當表單不再需要時，經過「結案中」（Closing）狀態，最後變為「已結案」（Closed）狀態。"}},{full:{t:0,b:{t:2,i:[{t:4,k:"open"},{t:3,v:"表格可供下載，並將接受新的提交。"}]}},open:{t:0,b:{t:2,i:[{t:3}],s:"公開"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closing"},{t:3,v:" 表格將接受新的提交，但"},{t:4,k:"not"},{t:3,v:"可供下載。"}]}},closing:{t:0,b:{t:2,i:[{t:3}],s:"結案中"}},not:{t:0,b:{t:2,i:[{t:3}],s:"不"}}},{full:{t:0,b:{t:2,i:[{t:4,k:"closed"},{t:3,v:"表格"},{t:4,k:"not1"},{t:3,v:"可供下載，並且"},{t:4,k:"not2"},{t:3,v:"接受新的提交。"}]}},closed:{t:0,b:{t:2,i:[{t:3}],s:"已結案"}},not1:{t:0,b:{t:2,i:[{t:3}],s:"不"}},not2:{t:0,b:{t:2,i:[{t:3}],s:"不"}}}]}}})}const z={name:"ProjectFormAccessStates",components:{Modal:V},props:{state:{type:Boolean,default:!1}},emits:["hide"]},X={class:"modal-introduction"},tt={class:"modal-actions"};function et(e,t,s,a,r,i){const d=h("i18n-t"),f=h("modal");return l(),E(f,{id:"project-form-access-states",state:s.state,hideable:"",backdrop:"",onHide:t[1]||(t[1]=m=>e.$emit("hide"))},{title:p(()=>[w(n(e.$t("title")),1)]),body:p(()=>[o("div",X,[o("p",null,n(e.$t("introduction[0]")),1),b(d,{tag:"p",keypath:"introduction[1].full"},{open:p(()=>[o("strong",null,n(e.$t("introduction[1].open")),1)]),_:1}),b(d,{tag:"p",keypath:"introduction[2].full"},{closing:p(()=>[o("strong",null,n(e.$t("introduction[2].closing")),1)]),not:p(()=>[o("em",null,n(e.$t("introduction[2].not")),1)]),_:1}),b(d,{tag:"p",keypath:"introduction[3].full"},{closed:p(()=>[o("strong",null,n(e.$t("introduction[3].closed")),1)]),not1:p(()=>[o("em",null,n(e.$t("introduction[3].not1")),1)]),not2:p(()=>[o("em",null,n(e.$t("introduction[3].not2")),1)]),_:1})]),o("div",tt,[o("button",{type:"button",class:"btn btn-primary",onClick:t[0]||(t[0]=m=>e.$emit("hide"))},n(e.$t("action.ok")),1)])]),_:1},8,["state"])}typeof $=="function"&&$(z);typeof U=="function"&&U(z);const st=y(z,[["render",et]]);function K(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{draftTitle:{t:0,b:{t:2,i:[{t:3}],s:"This Form does not yet have a published version. It will not appear on devices until a Draft is published. Once you publish the Form, the settings shown here will be used."}},field:{state:{t:0,b:{t:2,i:[{t:3}],s:"State"}},appUserAccess:{t:0,b:{t:2,i:[{t:3}],s:"App User Access"}}}}}})}function q(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{cs:{draftTitle:{t:0,b:{t:2,i:[{t:3}],s:"Tento formulář zatím nemá publikovanou verzi. Dokud nebude publikován koncept, na zařízeních se nezobrazí. Jakmile formulář publikujete, použijí se zde uvedená nastavení."}},field:{state:{t:0,b:{t:2,i:[{t:3}],s:"Stav"}},appUserAccess:{t:0,b:{t:2,i:[{t:3}],s:"Přístup uživatelů aplikace"}}}},de:{draftTitle:{t:0,b:{t:2,i:[{t:3}],s:"Für dieses Formular gibt es noch keine veröffentlichte Version. Auf den Endgeräten wird es erst dann erscheinen, wenn der Entwurf publiziert ist. Sobald Sie das Formular publizieren, werden die hier gezeigten Einstellungen verwendet."}},field:{state:{t:0,b:{t:2,i:[{t:3}],s:"Status"}},appUserAccess:{t:0,b:{t:2,i:[{t:3}],s:"Benutzerzugriff"}}}},es:{draftTitle:{t:0,b:{t:2,i:[{t:3}],s:"Este formulario aún no posee una versión publicada. No aparecerá en los dispositivos hasta que un borrador sea publicado. Una vez sea publicado el formulario, los ajustes mostrados aquí serán utilizados."}},field:{state:{t:0,b:{t:2,i:[{t:3}],s:"Estado"}},appUserAccess:{t:0,b:{t:2,i:[{t:3}],s:"Acceso de los usuarios móviles"}}}},fr:{draftTitle:{t:0,b:{t:2,i:[{t:3}],s:"Ce formulaire n'a pas encore de version publiée. Il n’apparaîtra pas sur les appareils tant qu'une ébauche ne sera pas publié. Une fois que vous aurez publié le formulaire, les paramètres ci-dessous seront utilisés."}},field:{state:{t:0,b:{t:2,i:[{t:3}],s:"État"}},appUserAccess:{t:0,b:{t:2,i:[{t:3}],s:"Accès d'utilisateurs mobiles"}}}},id:{draftTitle:{t:0,b:{t:2,i:[{t:3}],s:"Formulir ini belum memiliki versi terbit. Formulir tidak akan muncul pada perangkat sampai draf diterbitkan. Setelah Anda menerbitkan formulir, Anda dapat menggunakan pengaturan yang ada di sini."}},field:{state:{t:0,b:{t:2,i:[{t:3}],s:"Status"}},appUserAccess:{t:0,b:{t:2,i:[{t:3}],s:"Akses Pengguna Aplikasi"}}}},it:{draftTitle:{t:0,b:{t:2,i:[{t:3}],s:"Questo formulario non ha ancora una versione pubblicata. Non apparirà sui dispositivi finché non viene pubblicata una bozza. Una volta pubblicato il formulario, verranno utilizzate le impostazioni mostrate qui."}},field:{state:{t:0,b:{t:2,i:[{t:3}],s:"Stato"}},appUserAccess:{t:0,b:{t:2,i:[{t:3}],s:"Accesso utente applicazione"}}}},ja:{draftTitle:{t:0,b:{t:2,i:[{t:3}],s:"このフォームには公開バージョンがまだありません。下書きが公開されるまで、端末上には表示されません。フォームを公開すると、ここで示される設定が適応されます。"}},field:{state:{t:0,b:{t:2,i:[{t:3}],s:"状態"}},appUserAccess:{t:0,b:{t:2,i:[{t:3}],s:"アプリユーザーのアクセス"}}}},pt:{draftTitle:{t:0,b:{t:2,i:[{t:3}],s:"Este formulário ainda não possui uma versão publicada. Ele não aparecerá nos dispositivos até que um rascunho seja publicado. Depois de publicar o formulário, as configurações exibidas aqui serão usadas."}},field:{state:{t:0,b:{t:2,i:[{t:3}],s:"Status"}},appUserAccess:{t:0,b:{t:2,i:[{t:3}],s:"Acesso de usuários de aplicativo"}}}},sw:{draftTitle:{t:0,b:{t:2,i:[{t:3}],s:"Fomu hii bado haina toleo lililochapishwa. Haitaonekana kwenye vifaa hadi Rasimu itakapochapishwa. Ukishachapisha Fomu, mipangilio iliyoonyeshwa hapa itatumika"}},field:{state:{t:0,b:{t:2,i:[{t:3}],s:"Hali"}},appUserAccess:{t:0,b:{t:2,i:[{t:3}],s:"Ufikiaji wa Mtumiaji wa Programu"}}}},"zh-Hant":{draftTitle:{t:0,b:{t:2,i:[{t:3}],s:"該表單尚無發布版本。在草稿發布之前，它不會出現在裝置上。發布表單後，將使用此處顯示的設定。"}},field:{state:{t:0,b:{t:2,i:[{t:3}],s:"狀態"}},appUserAccess:{t:0,b:{t:2,i:[{t:3}],s:"APP使用者存取"}}}}}})}const A={name:"ProjectFormAccessRow",components:{FormLink:Z},props:{form:{type:Object,required:!0},changes:{type:Object,required:!0},frozen:{type:Boolean,default:!1}},emits:["update:state","update:fieldKeyAccess"],setup(){const{fieldKeys:e}=j();return{fieldKeys:e}},computed:{htmlClass(){return{"project-form-access-row":!0,"project-form-access-row-draft":this.form.publishedAt==null}},stateChanged(){return this.changes.current.state!==this.changes.previous.state}},methods:{fieldKeyAccessChanged(e){return this.changes.current.fieldKeyAccess[e.id]!==this.changes.previous.fieldKeyAccess[e.id]},updateState(e){this.$emit("update:state",this.form,e)},updateFieldKeyAccess(e,t){this.$emit("update:fieldKeyAccess",this.form,e,t)}}},ot={class:"project-form-access-row-form-name"},at={key:0,class:"icon-edit"},it={key:1,class:"sr-only"},nt={class:"form-group"},rt=["value","aria-label"],lt={value:"open"},ut={value:"closing"},ct={value:"closed"},dt={class:"checkbox"},mt=["checked","aria-label","onChange"];function pt(e,t,s,a,r,i){const d=h("form-link"),f=O("tooltip");return l(),c("tr",{class:k(i.htmlClass)},[s.frozen?(l(),c(v,{key:0},[o("td",ot,[s.form.publishedAt==null?_((l(),c("span",at,null,512)),[[f,void 0,void 0,{"sr-only":!0}]]):g("",!0),_(b(d,{form:s.form},null,8,["form"]),[[f,void 0,void 0,{text:!0}]]),s.form.publishedAt==null?(l(),c("span",it," "+n(e.$t("draftTitle")),1)):g("",!0)]),o("td",null,[o("div",nt,[o("select",{class:k(["form-control",{"uncommitted-change":i.stateChanged}]),value:s.changes.current.state,"aria-label":e.$t("field.state"),onChange:t[0]||(t[0]=m=>i.updateState(m.target.value))},[o("option",lt,n(e.$t("formState.open")),1),o("option",ut,n(e.$t("formState.closing")),1),o("option",ct,n(e.$t("formState.closed")),1)],42,rt)])])],64)):(l(),c(v,{key:1},[t[1]||(t[1]=o("td",null,null,-1)),(l(!0),c(v,null,M(a.fieldKeys.withToken,m=>(l(),c("td",{key:m.id,class:"project-form-access-row-access"},[o("div",dt,[o("label",null,[o("input",{type:"checkbox",class:k({"uncommitted-change":i.fieldKeyAccessChanged(m)}),checked:s.changes.current.fieldKeyAccess[m.id],"aria-label":e.$t("field.appUserAccess"),onChange:u=>i.updateFieldKeyAccess(m,u.target.checked)},null,42,mt)])])]))),128)),t[2]||(t[2]=o("td",null,null,-1))],64))],2)}typeof K=="function"&&K(A);typeof q=="function"&&q(A);const bt=y(A,[["render",pt]]);function P(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{header:{form:{t:0,b:{t:2,i:[{t:3}],s:"Form"}},state:{t:0,b:{t:2,i:[{t:3}],s:"State"}}}}}})}function I(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{cs:{header:{form:{t:0,b:{t:2,i:[{t:3}],s:"Formulář"}},state:{t:0,b:{t:2,i:[{t:3}],s:"Stav"}}}},de:{header:{form:{t:0,b:{t:2,i:[{t:3}],s:"Formular"}},state:{t:0,b:{t:2,i:[{t:3}],s:"Status"}}}},es:{header:{form:{t:0,b:{t:2,i:[{t:3}],s:"Formulario"}},state:{t:0,b:{t:2,i:[{t:3}],s:"Estado"}}}},fr:{header:{form:{t:0,b:{t:2,i:[{t:3}],s:"Formulaire"}},state:{t:0,b:{t:2,i:[{t:3}],s:"État"}}}},id:{header:{form:{t:0,b:{t:2,i:[{t:3}],s:"Formulir"}},state:{t:0,b:{t:2,i:[{t:3}],s:"Status"}}}},it:{header:{form:{t:0,b:{t:2,i:[{t:3}],s:"Formulario"}},state:{t:0,b:{t:2,i:[{t:3}],s:"Stato"}}}},ja:{header:{form:{t:0,b:{t:2,i:[{t:3}],s:"フォーム"}},state:{t:0,b:{t:2,i:[{t:3}],s:"状態"}}}},pt:{header:{form:{t:0,b:{t:2,i:[{t:3}],s:"Formulário"}},state:{t:0,b:{t:2,i:[{t:3}],s:"Status"}}}},sw:{header:{form:{t:0,b:{t:2,i:[{t:3}],s:"fomu"}},state:{t:0,b:{t:2,i:[{t:3}],s:"hali"}}}},"zh-Hant":{header:{form:{t:0,b:{t:2,i:[{t:3}],s:"表單"}},state:{t:0,b:{t:2,i:[{t:3}],s:"狀態"}}}}}})}const S={name:"ProjectFormAccessTable",components:{ProjectFormAccessRow:bt,TableFreeze:J},props:{changesByForm:{type:Object,required:!0}},emits:["show-states","update:state","update:fieldKeyAccess"],setup(){const{forms:e,fieldKeys:t}=j();return{forms:e,fieldKeys:t}},computed:{noFieldKeys(){return this.fieldKeys.dataExists&&this.fieldKeys.withToken.length===0}},methods:{updateState(e,t){this.$emit("update:state",e,t)},updateFieldKeyAccess(e,t,s){this.$emit("update:fieldKeyAccess",e,t,s)}}};function ft(e,t,s,a,r,i){const d=h("project-form-access-row"),f=h("table-freeze"),m=O("tooltip");return l(),E(f,{id:"project-form-access-table",class:k({"no-field-keys":i.noFieldKeys}),data:a.forms.data,"key-prop":"xmlFormId","frozen-only":i.noFieldKeys},{"head-frozen":p(()=>[o("th",null,n(e.$t("header.form")),1),o("th",null,[o("span",null,n(e.$t("header.state")),1),o("button",{type:"button",class:"btn btn-link",onClick:t[0]||(t[0]=u=>e.$emit("show-states"))},t[1]||(t[1]=[o("span",{class:"icon-question-circle"},null,-1)]))])]),"head-scrolling":p(()=>[o("th",null,[o("div",null,n(e.$t("resource.appUsers")),1)]),(l(!0),c(v,null,M(a.fieldKeys.withToken,u=>(l(),c("th",{key:u.id},[o("div",null,[_((l(),c("span",null,[w(n(u.displayName),1)])),[[m,void 0,void 0,{text:!0}]])])]))),128)),t[2]||(t[2]=o("th",null,null,-1))]),"data-frozen":p(({data:u})=>[b(d,{form:u,changes:s.changesByForm[u.xmlFormId],frozen:"","onUpdate:state":i.updateState},null,8,["form","changes","onUpdate:state"])]),"data-scrolling":p(({data:u})=>[b(d,{form:u,changes:s.changesByForm[u.xmlFormId],"onUpdate:fieldKeyAccess":i.updateFieldKeyAccess},null,8,["form","changes","onUpdate:fieldKeyAccess"])]),_:1},8,["class","data","frozen-only"])}typeof P=="function"&&P(S);typeof I=="function"&&I(S);const ht=y(S,[["render",ft]]);function B(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{en:{heading:[{t:0,b:{t:2,i:[{t:3}],s:"App Users can only see and fill the Forms that they are explicity given access to in the table below. Project Managers and Data Collectors can use a web browser to fill out any Form in the Project that is in the Open state."}}],emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"There are no Forms to show."}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"Your changes have been successfully saved."}}}}}})}function D(e){const t=e;t.__i18n=t.__i18n||[],t.__i18n.push({locale:"",resource:{cs:{heading:[{t:0,b:{t:2,i:[{t:3}],s:"Uživatelé aplikace mohou vidět a vyplnit pouze formuláře, k nimž mají výslovný přístup v níže uvedené tabulce. Projektoví manažeři a sběratelé dat mohou pomocí webového prohlížeče vyplnit jakýkoli formulář v projektu, který je ve stavu Otevřený."}}],emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Nejsou k dispozici žádné formuláře."}}},de:{heading:[{t:0,b:{t:2,i:[{t:3}],s:"Benutzer der App können nur diejenigen Formulare ansehen oder ausfüllen, für die sie expliziten Zugriff haben. Projekt-Manager und Datensammler können einen Browser benutzen, um beliebige Formulare im Projekt, die sich noch im offenen Zustand befinden, auszufüllen."}}],emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Es gibt keine Formulare zum Anzeigen."}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"Ihre Änderungen wurden erfolgreich gespeichert."}}}},es:{heading:[{t:0,b:{t:2,i:[{t:3}],s:"Los usuarios móviles solo pueden ver y llenar los formularios a los que explícitamente se les ha dado acceso en la tabla siguiente. Los administradores de proyecto y recolectores de datos puede utilizar un navegador web para llenar cualquier formulario del proyecto que está en estado abierto."}}],emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"No existen formularios para mostrar."}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"¡Sus modificaciones han sido guardadas correctamente!"}}}},fr:{heading:[{t:0,b:{t:2,i:[{t:3}],s:`Les utilisateurs mobiles peuvent seulement voir et remplir les formulaires auxquels un accès leur a été donné dans le tableau ci-dessous. Les gestionnaires de projet et collecteurs de données peuvent utiliser leurs navigateurs pour remplir tous les formulaires de ce projet dans l'état "ouvert".`}}],emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Il n'y a pas de formulaire à afficher."}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"Vos modifications ont été enregistrées."}}}},id:{heading:[{t:0,b:{t:2,i:[{t:3}],s:"Pengguna Aplikasi hanya bisa melihat dan mengisi formulir yang aksesnya telah diberikan kepada mereka pada tabel di bawah ini. Manajer Proyek dan pengumpul data dapat menggunakan web browser untuk mengisi formulir apapun dalam Proyek yang statusnya adalah Terbuka."}}],emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Tidak ada formulir untuk ditampilkan."}}},it:{heading:[{t:0,b:{t:2,i:[{t:3}],s:"Gli utenti app possono visualizzare e compilare solo i formulari a cui hanno esplicito accesso nella tabella sottostante. I project manager e i raccoglitori di dati possono utilizzare un browser Web per compilare qualsiasi formulario nel progetto che si trova nello stato Aperto."}}],emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Non ci sono formulari da mostrare."}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"I tuoi cambi sono stati salvati con successo!"}}}},ja:{heading:[{t:0,b:{t:2,i:[{t:3}],s:"アプリユーザーは、以下の表で明示的にアクセス権限を与えられたフォームに対してのみ、閲覧・記入ができます。プロジェクト・マネージャーとデータ収集者は、Webブラウザを使って、公開状態のプロジェクト内のどのフォームにも、記入できます。"}}],emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"表示できるフォームはありません。"}}},pt:{heading:[{t:0,b:{t:2,i:[{t:3}],s:"Usuários de aplicativo somente podem ver e preencher os formulários para os quais receberem autorização explícita na tabela abaixo. Gerentes de projeto e coletores de dados podem usar um navegador de internet para preencher qualquer formulário no projeto que esteja com status Aberto."}}],emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Não há formulários para exibir."}}},sw:{heading:[{t:0,b:{t:2,i:[{t:3}],s:"Watumiaji wa Programu wanaweza tu kuona na kujaza Fomu ambazo wamepewa ufikiaji wa uwazi katika jedwali lililo hapa chini. Wasimamizi wa Miradi na Wakusanyaji Data wanaweza kutumia kivinjari cha wavuti kujaza Fomu yoyote katika Mradi ambayo iko katika hali ya Wazi."}}],emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Hakuna Fomu za kuonyesha."}}},"zh-Hant":{heading:[{t:0,b:{t:2,i:[{t:3}],s:"於下表中，明確授予 APP使用者 只能查看並填寫表格的存取權限。專案管理員和資料收集者可以使用 Web 瀏覽器填寫，於專案處於公開狀態的任何表格。"}}],emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"沒有可顯示的表格。"}},alert:{success:{t:0,b:{t:2,i:[{t:3}],s:"您的變更已成功儲存。"}}}}}})}const C={name:"ProjectFormAccess",components:{DocLink:H,Loading:N,ProjectFormAccessStates:st,ProjectFormAccessTable:ht,SentenceSeparator:Q,Spinner:L},inject:["alert","unsavedChanges"],props:{projectId:{type:String,required:!0}},emits:["fetch-forms","fetch-field-keys"],setup(){const{roles:e,project:t,forms:s,formSummaryAssignments:a,fieldKeys:r,resourceStates:i}=j(),{request:d,awaitingResponse:f}=Y();return{roles:e,project:t,forms:s,fieldKeys:r,formSummaryAssignments:a,...i([e,t,s,r,a]),request:d,awaitingResponse:f}},data(){return{changesByForm:null,changeCount:0,statesModal:G()}},computed:{saveDisabled(){return!this.dataExists||this.changeCount===0||this.awaitingResponse},fieldKeyAccessByForm(){const e={};for(const s of this.fieldKeys.withToken)e[s.id]=!1;const t=Object.create(null);for(const s of this.forms)t[s.xmlFormId]={...e};for(const s of this.formSummaryAssignments){const a=t[s.xmlFormId];a!=null&&a[s.actorId]!=null&&(a[s.actorId]=!0)}return t},projectToSave(){return{name:this.project.name,description:this.project.description,archived:this.project.archived,forms:this.forms.map(e=>{const t=this.changesByForm[e.xmlFormId],s=[],a=this.roles.bySystem["app-user"].id;for(const r of this.fieldKeys.withToken)t.current.fieldKeyAccess[r.id]&&s.push({actorId:r.id,roleId:a});return{xmlFormId:e.xmlFormId,state:t.current.state,assignments:s}})}}},watch:{dataExists:{handler(e){e&&this.initChangesByForm()},immediate:!0},changeCount(e,t){this.unsavedChanges.plus(e-t)}},created(){this.fetchData(!1)},methods:{fetchData(e){this.$emit("fetch-forms",e),this.$emit("fetch-field-keys",e),Promise.allSettled([this.roles.request({url:"/v1/roles",resend:!1}),this.formSummaryAssignments.request({url:T.formSummaryAssignments(this.projectId,"app-user"),resend:e})])},initChangesByForm(){this.changesByForm=Object.create(null);for(const e of this.forms){const t=this.fieldKeyAccessByForm[e.xmlFormId];this.changesByForm[e.xmlFormId]={previous:{state:e.state,fieldKeyAccess:t},current:{state:e.state,fieldKeyAccess:{...t}}}}},updateState(e,t){const s=this.changesByForm[e.xmlFormId],a=s.current.state!==s.previous.state;s.current.state=t;const r=s.current.state!==s.previous.state;r!==a&&(this.changeCount+=r?1:-1)},updateFieldKeyAccess(e,t,s){const a=this.changesByForm[e.xmlFormId],r=a.current.fieldKeyAccess[t.id]!==a.previous.fieldKeyAccess[t.id];a.current.fieldKeyAccess[t.id]=s;const i=s!==a.previous.fieldKeyAccess[t.id];i!==r&&(this.changeCount+=i?1:-1)},save(){this.request({method:"PUT",url:T.project(this.projectId),data:this.projectToSave}).then(()=>{this.fetchData(!0),this.alert.success(this.$t("alert.success")),this.changesByForm=null,this.changeCount=0}).catch(W)}}},vt={class:"heading-with-button"},kt=["aria-disabled"],gt={key:0,class:"empty-table-message"};function yt(e,t,s,a,r,i){const d=h("spinner"),f=h("sentence-separator"),m=h("loading"),u=h("project-form-access-table"),x=h("project-form-access-states");return l(),c("div",null,[o("div",vt,[o("button",{id:"project-form-access-save-button",type:"button",class:k(["btn btn-primary",{"uncommitted-change":r.changeCount!==0}]),"aria-disabled":i.saveDisabled,onClick:t[0]||(t[0]=(...F)=>i.save&&i.save(...F))},[t[3]||(t[3]=o("span",{class:"icon-floppy-o"},null,-1)),w(n(e.$t("action.save"))+" ",1),b(d,{state:a.awaitingResponse},null,8,["state"])],10,kt),o("p",null,[o("span",null,n(e.$t("heading[0]")),1),b(f)])]),b(m,{state:e.initiallyLoading},null,8,["state"]),e.dataExists?(l(),c(v,{key:0},[b(u,{"changes-by-form":r.changesByForm,"onUpdate:state":i.updateState,"onUpdate:fieldKeyAccess":i.updateFieldKeyAccess,onShowStates:t[1]||(t[1]=F=>r.statesModal.show())},null,8,["changes-by-form","onUpdate:state","onUpdate:fieldKeyAccess"]),a.forms.length===0?(l(),c("p",gt,n(e.$t("emptyTable")),1)):g("",!0)],64)):g("",!0),b(x,R(r.statesModal,{onHide:t[2]||(t[2]=F=>r.statesModal.hide())}),null,16)])}typeof B=="function"&&B(C);typeof D=="function"&&D(C);const Tt=y(C,[["render",yt]]);export{Tt as default};
