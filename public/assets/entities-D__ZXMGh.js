import{G as M,H as T,D as C,u as P,K as G,S as Ct,c as u,o as l,d as a,t as d,k as J,p as E,h as f,J as N,A as kt,g as S,i as R,q as D,f as A,T as $t,e as p,a as L,l as H,F as j,j as _t,z as wt,r as g,U as Mt,V as St,L as Tt,C as V,w as Dt,W as jt,n as I,_ as At,X as qt,Y as F,P as O,v as x,Z as Ot,$ as xt,O as Nt,a0 as It,a1 as Pt}from"./index-BJJ6YbMy.js";import{u as Ut,_ as Ft,a as Lt,b as Vt}from"./entity-versions-JXwrZI5Y.js";import{_ as zt,a as Ht}from"./modal-BMSEXbZM.js";import{_ as Bt,a as Kt}from"./odata-loading-message-C4DiRpoY.js";import{D as Z}from"./date-time-CEONMtaY.js";import{_ as Qt}from"./freeze-CDRjGwqt.js";import{u as Rt}from"./request--gXHIWga.js";import{_ as Zt}from"./pagination-DLInApQo.js";import{_ as Wt}from"./search-textbox-BnGh0h4l.js";import{u as W}from"./query-ref-D9qdbv9b.js";import{_ as Gt,O as Jt}from"./data-access-IUfhukHl.js";import{_ as Yt}from"./section-EpBA88m2.js";import"./datetime-3JD3bssD.js";import"./selectable-DuI9cV1N.js";function ot(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{action:{download:{unfiltered:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Download "},{t:4,k:"count"},{t:3,v:" Entity"}]},{t:2,i:[{t:3,v:"Download all "},{t:4,k:"count"},{t:3,v:" Entities"}]}]}},filtered:{withCount:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Download "},{t:4,k:"count"},{t:3,v:" Entity matching the filter"}]},{t:2,i:[{t:3,v:"Download "},{t:4,k:"count"},{t:3,v:" Entities matching the filter"}]}]}},withoutCount:{t:0,b:{t:2,i:[{t:3}],s:"Download all Entities matching the filter"}}}}}}}})}function lt(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{de:{action:{download:{unfiltered:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" Entität herunterladen"}]},{t:2,i:[{t:3,v:"Alle "},{t:4,k:"count"},{t:3,v:" Entitäten herunterladen"}]}]}},filtered:{withCount:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" Entität herunterladen, die dem Filter entsprechen"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" Entitäten herunterladen, die dem Filter entsprechen"}]}]}},withoutCount:{t:0,b:{t:2,i:[{t:3}],s:"Alle Entitäten herunterladen, die dem Filter entsprechen"}}}}}},es:{action:{download:{unfiltered:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Descargar "},{t:4,k:"count"},{t:3,v:" Entidad"}]},{t:2,i:[{t:3,v:"Descargar todas las "},{t:4,k:"count"},{t:3,v:" Entidades"}]},{t:2,i:[{t:3,v:"Descargar todas las "},{t:4,k:"count"},{t:3,v:" Entidades"}]}]}},filtered:{withCount:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Descargar "},{t:4,k:"count"},{t:3,v:" Entidad que coincide con el filtro"}]},{t:2,i:[{t:3,v:"Descargar "},{t:4,k:"count"},{t:3,v:" entidades que coincidan con el filtro"}]},{t:2,i:[{t:3,v:"Descargar "},{t:4,k:"count"},{t:3,v:" entidades que coincidan con el filtro"}]}]}},withoutCount:{t:0,b:{t:2,i:[{t:3}],s:"Descargar todas las entidades que coincidan con el filtro"}}}}}},fr:{action:{download:{unfiltered:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Télécharger "},{t:4,k:"count"},{t:3,v:" entité (toutes)"}]},{t:2,i:[{t:3,v:"Télécharger "},{t:4,k:"count"},{t:3,v:" entités (toutes)"}]},{t:2,i:[{t:3,v:"Télécharger "},{t:4,k:"count"},{t:3,v:" entités (toutes)"}]}]}},filtered:{withCount:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Télécharger "},{t:4,k:"count"},{t:3,v:" entité filtrée"}]},{t:2,i:[{t:3,v:"Télécharger "},{t:4,k:"count"},{t:3,v:" entités filtrées"}]},{t:2,i:[{t:3,v:"Télécharger "},{t:4,k:"count"},{t:3,v:" entités filtrées"}]}]}},withoutCount:{t:0,b:{t:2,i:[{t:3}],s:"Télécharger toutes les entitées filtrées"}}}}}},it:{action:{download:{unfiltered:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Scarica "},{t:4,k:"count"},{t:3,v:" entità"}]},{t:2,i:[{t:3,v:"Scarica tutte le "},{t:4,k:"count"},{t:3,v:" entità"}]},{t:2,i:[{t:3,v:"Scarica tutte le "},{t:4,k:"count"},{t:3,v:" entità"}]}]}},filtered:{withCount:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Scaricare la "},{t:4,k:"count"},{t:3,v:" Entità che corrisponde al filtro"}]},{t:2,i:[{t:3,v:"Scaricare le "},{t:4,k:"count"},{t:3,v:" Entità che corrispondono al filtro"}]},{t:2,i:[{t:3,v:"Scaricare le "},{t:4,k:"count"},{t:3,v:" Entità che corrispondono al filtro"}]}]}},withoutCount:{t:0,b:{t:2,i:[{t:3}],s:"Scaricare tutte le Entità che corrispondono al filtro"}}}}}},pt:{action:{download:{unfiltered:{t:0,b:{t:1,c:[{t:2,i:[{t:3,v:"Baixar "},{t:4,k:"count"},{t:3,v:" Entidade"}]},{t:2,i:[{t:3,v:"Baixar todas as "},{t:4,k:"count"},{t:3,v:" Entidades"}]},{t:2,i:[{t:3,v:"Baixar todas as "},{t:4,k:"count"},{t:3,v:" Entidades"}]}]}},filtered:{withoutCount:{t:0,b:{t:2,i:[{t:3}],s:"Baixar todas as Entidades correspondentes"}}}}}},"zh-Hant":{action:{download:{unfiltered:{t:0,b:{t:2,i:[{t:3,v:"下載所有"},{t:4,k:"count"},{t:3,v:"個實體"}]}},filtered:{withCount:{t:0,b:{t:2,i:[{t:3,v:"下載符合篩選條件的"},{t:4,k:"count"},{t:3,v:"個實體"}]}},withoutCount:{t:0,b:{t:2,i:[{t:3}],s:"下載符合篩選條件的所有實體"}}}}}}}})}const Xt={id:"entity-download-button",class:"dropdown"},te=["href","data-toggle"],ee={class:"dropdown-menu dropdown-menu-right"},ie=["href"],se={key:0},ae=["href"],Y={__name:"download-button",props:{odataFilter:String,disabled:Boolean},setup(t){const e=t,o=M("projectId"),s=M("datasetName"),i=T(()=>C.entities(o,s,".csv")),n=T(()=>C.entities(o,s,".csv",{$filter:e.odataFilter})),{dataset:h,odataEntities:c}=P(),{t:r}=G(),{tn:k}=Ct(),b=T(()=>c.dataExists?k("action.download.filtered.withCount",c.count):r("action.download.filtered.withoutCount"));return(y,w)=>(l(),u("div",Xt,[a("a",{class:J(["btn btn-primary",{disabled:t.disabled}]),href:i.value,"data-toggle":t.odataFilter?"dropdown":null},[w[0]||(w[0]=a("span",{class:"icon-arrow-circle-down"},null,-1)),a("span",null,d(y.$t("action.download")),1)],10,te),a("ul",ee,[a("li",null,[a("a",{class:"btn btn-link dropdown-item",href:n.value},[a("span",null,d(b.value),1)],8,ie)]),f(h).dataExists?(l(),u("li",se,[a("a",{class:"btn btn-link dropdown-item",href:i.value},[a("span",null,d(y.$tcn("action.download.unfiltered",f(h).entities)),1)],8,ae)])):E("",!0)])]))}};typeof ot=="function"&&ot(Y);typeof lt=="function"&&lt(Y);function dt(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{title:{t:0,b:{t:2,i:[{t:3,v:"Restore "},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:"Are you sure you want to restore “"},{t:4,k:"label"},{t:3,v:"”?"}]}},{t:0,b:{t:2,i:[{t:3}],s:"The Entity will be restored to its previous state."}},{t:0,b:{t:2,i:[{t:3}],s:"If the Entity is deleted again, it will be another 30 days before it is removed."}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Restore immediately without confirmation until I leave the page"}}}}}})}function rt(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{de:{title:{t:0,b:{t:2,i:[{t:3,v:"Wiederherstellen "},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:"Sind Sie sicher, dass Sie “"},{t:4,k:"label"},{t:3,v:"” wiederherstellen wollen?"}]}},{t:0,b:{t:2,i:[{t:3}],s:"Die Entität wird in ihrem vorherigen Zustand wiederhergestellt."}},{t:0,b:{t:2,i:[{t:3}],s:"Wenn die Entität erneut gelöscht wird, dauert es 30 Tage bis es entfernt wird."}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Sofortige Wiederherstellen ohne Bestätigung, bis ich die Seite verlasse"}}}},es:{title:{t:0,b:{t:2,i:[{t:3,v:"Restablecer "},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:"¿Está seguro que desea restablecer “"},{t:4,k:"label"},{t:3,v:"”?"}]}},{t:0,b:{t:2,i:[{t:3}],s:"La Entidad volverá a su estado anterior."}},{t:0,b:{t:2,i:[{t:3}],s:"Si la Entidad se elimina nuevamente, pasarán otros 30 días antes de que se elimine."}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Restablecer inmediatamente sin confirmación hasta que salga de la página"}}}},fr:{title:{t:0,b:{t:2,i:[{t:3,v:"Restaurer "},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:'Êtes vous certain(e) de vouloir restaurer "'},{t:4,k:"label"},{t:3,v:'" ?'}]}},{t:0,b:{t:2,i:[{t:3}],s:"L'Entité sera restaurée dans son état précédent."}},{t:0,b:{t:2,i:[{t:3}],s:"Si l'entité est à nouveau mise à la corbeille, il faudra à nouveau 30 jours avant sa suppression."}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Restaurer immédiatement sans confirmation jusqu'à ce que je quitte la page"}}}},it:{title:{t:0,b:{t:2,i:[{t:3,v:"Ripristina "},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:'Sei sicuro di voler ripristinare "'},{t:4,k:"label"},{t:3,v:'"?'}]}},{t:0,b:{t:2,i:[{t:3}],s:"L'Entità verrà ripristinata al suo stato precedente."}},{t:0,b:{t:2,i:[{t:3}],s:"Se L'Entità viene nuovamente eliminata, ci vorranno altri 30 giorni prima che venga rimossa."}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Ripristino immediato senza conferma fino a quando non lascio la pagina"}}}},pt:{title:{t:0,b:{t:2,i:[{t:3,v:"Recuperar "},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:'Tem certeza que deseja recuperar "'},{t:4,k:"label"},{t:3,v:'"?'}]}},{t:0,b:{t:2,i:[{t:3}],s:"A Entidade vai ser restaurada ao seu estado anterior."}},{t:0,b:{t:2,i:[{t:3}],s:"Se a Entidade for excluída novamente, serão mais 30 dias até que ela seja removida."}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"Recuperar imediatamente sem pedir confirmação até que eu saia desta página"}}}},"zh-Hant":{title:{t:0,b:{t:2,i:[{t:3,v:"恢復"},{t:4,k:"label"}]}},introduction:[{t:0,b:{t:2,i:[{t:3,v:"您確定要恢復「"},{t:4,k:"label"},{t:3,v:"」嗎？"}]}},{t:0,b:{t:2,i:[{t:3}],s:"實體將恢復到先前的狀態。"}},{t:0,b:{t:2,i:[{t:3}],s:"如果實體再次被刪除，將再過 30 天才能移除。"}}],field:{noConfirm:{t:0,b:{t:2,i:[{t:3}],s:"立即還原，無需確認，直到我離開頁面"}}}}}})}const ne={class:"modal-introduction"},oe={key:0},le={class:"checkbox"},de={class:"modal-actions"},re=["aria-disabled"],ue=["aria-disabled"],X=Object.assign({name:"EntityRestore"},{__name:"restore",props:{state:Boolean,checkbox:Boolean,awaitingResponse:Boolean,entity:Object},emits:["hide","restore"],setup(t,{emit:e}){const o=t,s=e,i=N(!1);kt(()=>o.state,r=>{r||(i.value=!1)});const n=N(null),h=()=>{o.checkbox&&n.value.focus()},c=()=>{o.checkbox?s("restore",[o.entity,!i.value]):s("restore",[o.entity])};return(r,k)=>(l(),S(zt,{id:"entity-restore",state:t.state,hideable:!t.awaitingResponse,backdrop:"",onHide:k[2]||(k[2]=b=>r.$emit("hide")),onShown:h},{title:R(()=>[A(d(r.$t("title",{label:t.entity?.label})),1)]),body:R(()=>[a("div",ne,[a("p",null,d(r.$t("introduction[0]",{label:t.entity?.label})),1),a("p",null,d(r.$t("introduction[1]")),1),a("p",null,d(r.$t("introduction[2]")),1)]),t.checkbox?(l(),u("form",oe,[a("div",le,[a("label",null,[D(a("input",{ref_key:"input",ref:n,"onUpdate:modelValue":k[0]||(k[0]=b=>i.value=b),type:"checkbox"},null,512),[[$t,i.value]]),A(" "+d(r.$t("field.noConfirm")),1)])])])):E("",!0),a("div",de,[a("button",{type:"button",class:"btn btn-link","aria-disabled":t.awaitingResponse,onClick:k[1]||(k[1]=b=>r.$emit("hide"))},d(r.$t("action.cancel")),9,re),a("button",{type:"button",class:"btn btn-danger","aria-disabled":t.awaitingResponse,onClick:c},[A(d(r.$t("action.restore"))+" ",1),p(L,{state:t.awaitingResponse},null,8,["state"])],8,ue)])]),_:1},8,["state","hideable"]))}});typeof dt=="function"&&dt(X);typeof rt=="function"&&rt(X);function ut(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{conflict:{true:{t:0,b:{t:2,i:[{t:3}],s:"Possible conflict"}},false:{t:0,b:{t:2,i:[{t:3}],s:"No conflict"}}},field:{conflict:{t:0,b:{t:2,i:[{t:3}],s:"Conflict status"}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"All"}},none:{t:0,b:{t:2,i:[{t:3}],s:"None"}}}}}})}function ct(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{cs:{conflict:{true:{t:0,b:{t:2,i:[{t:3}],s:"Možný konflikt"}},false:{t:0,b:{t:2,i:[{t:3}],s:"Žádný konflikt"}}},field:{conflict:{t:0,b:{t:2,i:[{t:3}],s:"Stav konfliktu"}}}},de:{conflict:{true:{t:0,b:{t:2,i:[{t:3}],s:"Mögliche Konflikte"}},false:{t:0,b:{t:2,i:[{t:3}],s:"Kein Konflikt"}}},field:{conflict:{t:0,b:{t:2,i:[{t:3}],s:"Konfliktstatus"}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Alle"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Keine"}}}},es:{conflict:{true:{t:0,b:{t:2,i:[{t:3}],s:"Posible conflicto"}},false:{t:0,b:{t:2,i:[{t:3}],s:"Sin conflicto"}}},field:{conflict:{t:0,b:{t:2,i:[{t:3}],s:"Estado de conflicto"}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Todos"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Ninguno"}}}},fr:{conflict:{true:{t:0,b:{t:2,i:[{t:3}],s:"Conflit possible"}},false:{t:0,b:{t:2,i:[{t:3}],s:"Aucun conflit"}}},field:{conflict:{t:0,b:{t:2,i:[{t:3}],s:"Statut du conflit"}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Tous"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Aucun"}}}},it:{conflict:{true:{t:0,b:{t:2,i:[{t:3}],s:"Possibilie conflitto"}},false:{t:0,b:{t:2,i:[{t:3}],s:"Nessun conflitto"}}},field:{conflict:{t:0,b:{t:2,i:[{t:3}],s:"Stato sui conflitti"}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"Tutto"}},none:{t:0,b:{t:2,i:[{t:3}],s:"Nessuno/a"}}}},pt:{conflict:{true:{t:0,b:{t:2,i:[{t:3}],s:"Possível conflito"}},false:{t:0,b:{t:2,i:[{t:3}],s:"Nenhum conflito"}}},field:{conflict:{t:0,b:{t:2,i:[{t:3}],s:"Status de conflitos"}}}},sw:{conflict:{true:{t:0,b:{t:2,i:[{t:3}],s:"Mzozo unaowezekana"}},false:{t:0,b:{t:2,i:[{t:3}],s:"Hakuna mgongano"}}},field:{conflict:{t:0,b:{t:2,i:[{t:3}],s:"Hali ya migogoro"}}}},"zh-Hant":{conflict:{true:{t:0,b:{t:2,i:[{t:3}],s:"可能發生衝突"}},false:{t:0,b:{t:2,i:[{t:3}],s:"沒有衝突"}}},field:{conflict:{t:0,b:{t:2,i:[{t:3}],s:"衝突狀態"}}},action:{all:{t:0,b:{t:2,i:[{t:3}],s:"全部"}},none:{t:0,b:{t:2,i:[{t:3}],s:"無"}}}}}})}const tt=Object.assign({name:"EntityFiltersConflict"},{__name:"conflict",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(t){const{t:e}=G(),o=T(()=>[!0,!1].map(i=>({value:i,text:e(`conflict.${i}`)}))),s=i=>i.total===i.selected?e("action.all"):i.selected;return(i,n)=>(l(),S(Bt,{id:"entity-filters-conflict","model-value":t.modelValue,options:o.value,"default-to-all":"",label:i.$t("field.conflict"),placeholder:s,all:i.$t("action.all"),none:i.$t("action.none"),"onUpdate:modelValue":n[0]||(n[0]=h=>i.$emit("update:modelValue",h))},null,8,["model-value","options","label","all","none"]))}});typeof ut=="function"&&ut(tt);typeof ct=="function"&&ct(tt);const ce={id:"entity-filters"},be=Object.assign({name:"EntityFilters"},{__name:"filters",props:{conflict:{type:Array,required:!0},disabled:{type:Boolean,required:!0},disabledMessage:{type:String,required:!1}},emits:["update:conflict"],setup(t){return(e,o)=>(l(),u("span",ce,[p(tt,{"model-value":t.conflict,disabled:t.disabled,"disabled-message":t.disabledMessage,"onUpdate:modelValue":o[0]||(o[0]=s=>e.$emit("update:conflict",s))},null,8,["model-value","disabled","disabled-message"])]))}}),he={class:"entity-data-row"},pe=Object.assign({name:"EntityDataRow"},{__name:"data-row",props:{entity:{type:Object,required:!0},properties:{type:Array,required:!0}},setup(t){return(e,o)=>{const s=H("tooltip");return l(),u("tr",he,[(l(!0),u(j,null,_t(t.properties,i=>(l(),u("td",{key:i.name},[D((l(),u("span",null,[A(d(t.entity[i.odataName]),1)])),[[s,void 0,void 0,{text:!0}]])]))),128)),a("td",null,[D((l(),u("span",null,[A(d(t.entity.label),1)])),[[s,void 0,void 0,{text:!0}]])]),a("td",null,d(t.entity.__id),1)])}}}),me={class:"entity-metadata-row"},fe={class:"row-number"},ve={class:"creator-name"},ge={key:0,class:"action-cell"},ye={class:"col-content"},Ee={class:"updates"},ke={key:0,class:"wrap-circle"},_e={class:"btn-group"},we=["aria-label"],De=["aria-label"],Ae=["aria-label"],ze=["href"],Re={key:1,class:"action-cell"},Ce={class:"col-content col-deleted-at"},$e={key:0,class:"btn-group"},Me=["aria-disabled","aria-label"],Se=Object.assign({name:"EntityMetadataRow"},{__name:"metadata-row",props:{entity:{type:Object,required:!0},rowNumber:{type:Number,required:!0},verbs:{type:Set,required:!0},deleted:{type:Boolean,default:!1},awaitingResponse:Boolean},setup(t){const e=t,o=M("projectId"),s=M("datasetName"),{i18n:i}=M("container"),n=T(()=>i.t("submission.action.edit",{count:i.n(e.entity.__system.updates,"default")})),{entityPath:h}=wt();return(c,r)=>{const k=g("router-link"),b=H("tooltip");return l(),u("tr",me,[a("td",fe,d(c.$n(t.rowNumber,"noGrouping")),1),a("td",ve,[D((l(),u("span",null,[A(d(t.entity.__system.creatorName),1)])),[[b,void 0,void 0,{text:!0}]])]),a("td",null,[p(Z,{iso:t.entity.__system.createdAt},null,8,["iso"])]),t.deleted?(l(),u("td",Re,[a("div",Ce,[p(Z,{iso:t.entity.__system.deletedAt},null,8,["iso"])]),t.verbs.has("entity.restore")?(l(),u("div",$e,[D((l(),u("button",{type:"button",class:"restore-button btn btn-default","aria-disabled":t.awaitingResponse,"aria-label":c.$t("action.restore")},[r[7]||(r[7]=a("span",{class:"icon-recycle"},null,-1)),p(L,{state:t.awaitingResponse},null,8,["state"])],8,Me)),[[b,void 0,void 0,{"aria-label":!0}]])])):E("",!0)])):(l(),u("td",ge,[a("div",ye,[p(Z,{iso:t.entity.__system.updatedAt,class:"updated-at"},null,8,["iso"]),a("span",Ee,[t.entity.__system.conflict?(l(),u("span",ke,r[0]||(r[0]=[a("span",{class:"icon-warning"},null,-1)]))):t.entity.__system.updates!==0?(l(),u(j,{key:1},[r[1]||(r[1]=a("span",{class:"icon-pencil"},null,-1)),a("span",null,d(c.$n(t.entity.__system.updates,"default")),1)],64)):E("",!0)]),r[2]||(r[2]=a("span",{class:"icon-angle-right"},null,-1))]),a("div",_e,[t.verbs.has("entity.delete")?D((l(),u("button",{key:0,type:"button",class:"delete-button btn btn-default","aria-label":c.$t("action.delete")},[r[3]||(r[3]=a("span",{class:"icon-trash"},null,-1)),p(L,{state:t.awaitingResponse},null,8,["state"])],8,we)),[[b,void 0,void 0,{"aria-label":!0}]]):E("",!0),t.verbs.has("entity.update")?D((l(),u("button",{key:1,type:"button",class:"update-button btn btn-default","aria-label":n.value},r[4]||(r[4]=[a("span",{class:"icon-pencil"},null,-1)]),8,De)),[[b,void 0,void 0,{"aria-label":!0}]]):E("",!0),t.entity.__system.conflict?D((l(),u("button",{key:2,type:"button",class:"resolve-button btn btn-danger","aria-label":c.$t("action.reviewParallelUpdates")},r[5]||(r[5]=[a("span",{class:"icon-random"},null,-1)]),8,Ae)),[[b,void 0,void 0,{"aria-label":!0}]]):E("",!0),p(k,{to:f(h)(f(o),f(s),t.entity.__id),custom:""},{default:R(({href:y})=>[a("a",{class:"more-button btn btn-default",href:y,target:"_blank"},[a("span",null,d(c.$t("action.more")),1),r[6]||(r[6]=a("span",{class:"icon-angle-right"},null,-1))],8,ze)]),_:1},8,["to"])])]))])}}});function bt(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{header:{updatedAtAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Last Updated / Actions"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"Deleted at"}}}}}})}function ht(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{cs:{header:{updatedAtAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Poslední aktualizace / Akce"}}}},de:{header:{updatedAtAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Letzte Aktualisierung / Aktionen"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"Gelöscht am"}}}},es:{header:{updatedAtAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Última actualización / Acciones"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"Suprimida el"}}}},fr:{header:{updatedAtAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Dernières mises à jour / Actions"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"Supprimée le"}}}},it:{header:{updatedAtAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Ultimo aggiornamento/ azioni"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"Eliminato il"}}}},pt:{header:{updatedAtAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Última Atualização / Ações"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"Excluída em"}}}},sw:{header:{updatedAtAndActions:{t:0,b:{t:2,i:[{t:3}],s:"Ilisasishwa Mwisho / Vitendo"}}}},"zh-Hant":{header:{updatedAtAndActions:{t:0,b:{t:2,i:[{t:3}],s:"最後更新/操作"}},deletedAt:{t:0,b:{t:2,i:[{t:3}],s:"刪除於"}}}}}})}const Te={class:"sr-only"},je={key:0},qe={key:1,class:"col-deleted-at"},et=Object.assign({name:"EntityTable"},{__name:"table",props:{properties:Array,deleted:{type:Boolean,default:!1},awaitingDeletedResponses:{type:Set,required:!0}},emits:["update","resolve","delete","restore"],setup(t,{expose:e,emit:o}){const s=o,{project:i,odataEntities:n}=P(),h=({target:b,data:y,index:w})=>{const{classList:_}=b;_.contains("delete-button")?s("delete",y):_.contains("update-button")?s("update",w):_.contains("resolve-button")?s("resolve",w):b.classList.contains("restore-button")&&s("restore",y)},c=N(null);return e({afterUpdate:b=>{St(c.value.getRowPair(b))},afterDelete:b=>{Mt(c.value.getRowPair(b))}}),(b,y)=>{const w=H("tooltip");return f(i).dataExists?(l(),S(Qt,{key:0,id:"entity-table",ref_key:"table",ref:c,data:f(n).value,"key-prop":"__id","frozen-only":t.properties==null,divider:"",onAction:h},{"head-frozen":R(()=>[a("th",null,[a("span",Te,d(b.$t("common.rowNumber")),1)]),a("th",null,d(b.$t("header.createdBy")),1),a("th",null,d(b.$t("header.createdAt")),1),t.deleted?(l(),u("th",qe,d(b.$t("header.deletedAt")),1)):(l(),u("th",je,d(b.$t("header.updatedAtAndActions")),1))]),"head-scrolling":R(()=>[t.properties!=null?(l(!0),u(j,{key:0},_t(t.properties,_=>(l(),u("th",{key:_.name},[D((l(),u("span",null,[A(d(_.name),1)])),[[w,void 0,void 0,{text:!0}]])]))),128)):E("",!0),a("th",null,d(b.$t("entity.label")),1),a("th",null,d(b.$t("entity.entityId")),1)]),"data-frozen":R(({data:_})=>[p(Se,{entity:_,"row-number":_.__system.rowNumber,verbs:f(i).verbs,deleted:t.deleted,"awaiting-response":t.awaitingDeletedResponses.has(_.__id)},null,8,["entity","row-number","verbs","deleted","awaiting-response"])]),"data-scrolling":R(({data:_})=>[p(pe,{entity:_,properties:t.properties},null,8,["entity","properties"])]),_:1},8,["data","frozen-only"])):E("",!0)}}});typeof bt=="function"&&bt(et);typeof ht=="function"&&ht(et);function pt(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{title:{t:0,b:{t:2,i:[{t:3,v:"Parallel updates to “"},{t:4,k:"label"},{t:3,v:"”"}]}},instructions:[{t:0,b:{t:2,i:[{t:3,v:"Updates were made to “"},{t:4,k:"label"},{t:3,v:"” in parallel. This means changes may be in conflict with each other, as they were authored against older data than they were eventually applied to by Central."}]}},{t:0,b:{t:2,i:[{t:3}],s:"Review the updates, make any edits you need to, and if you are sure this Entity data is correct press “Mark as resolved” to clear this warning message."}}],action:{table:{show:{t:0,b:{t:2,i:[{t:3}],s:"Show summary table"}},hide:{t:0,b:{t:2,i:[{t:3}],s:"Hide summary table"}}},seeMoreDetails:{t:0,b:{t:2,i:[{t:3}],s:"See more details"}},editEntity:{t:0,b:{t:2,i:[{t:3}],s:"Edit Entity"}},markAsResolved:{t:0,b:{t:2,i:[{t:3}],s:"Mark as resolved"}}},successMessage:{t:0,b:{t:2,i:[{t:3}],s:"The conflict warning has been cleared from the Entity."}},problem:{"400_32":{t:0,b:{t:2,i:[{t:3}],s:"Another user has already marked the conflict as resolved. Please refresh to see the updated data."}},"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Data has been modified by another user. Please refresh to see the updated data."}}}}}})}function mt(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{cs:{action:{table:{show:{t:0,b:{t:2,i:[{t:3}],s:"Zobrazit souhrnnou tabulku"}},hide:{t:0,b:{t:2,i:[{t:3}],s:"Skrýt souhrnnou tabulku"}}},seeMoreDetails:{t:0,b:{t:2,i:[{t:3}],s:"Více podrobností"}},editEntity:{t:0,b:{t:2,i:[{t:3}],s:"Upravit entitu"}},markAsResolved:{t:0,b:{t:2,i:[{t:3}],s:"Označit jako vyřešeno"}}},successMessage:{t:0,b:{t:2,i:[{t:3}],s:"Varování konfliktu bylo odstraněno z Entity."}},problem:{"400_32":{t:0,b:{t:2,i:[{t:3}],s:"Jiný uživatel již označil konflikt jako vyřešený. Aktualizujte prosím, abyste viděli aktualizovaná data."}},"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Data byla upravena jiným uživatelem. Aktualizujte prosím stránku, abyste viděli aktualizovaná data."}}}},de:{title:{t:0,b:{t:2,i:[{t:3,v:'Parallele Update zu "'},{t:4,k:"label"},{t:3,v:'"'}]}},instructions:[{t:0,b:{t:2,i:[{t:3,v:"Updates wurden parallel zu ''"},{t:4,k:"label"},{t:3,v:'" durchgeführt. Dies bedeutet, dass Änderungen möglicherweise im Konflikt miteinander stehen, da sie zu älteren Daten erstellt wurden, als sie schließlich von Central angewendet wurden.'}]}},{t:0,b:{t:2,i:[{t:3}],s:"Überprüfen Sie die Updates, nehmen Sie die erforderlichen Bearbeitungen vor, und wenn Sie sicher sind, dass die Entitätsdaten korrekt sind, drücken Sie 'Als behoben markieren', um diese Warnmeldung zu löschen."}}],action:{table:{show:{t:0,b:{t:2,i:[{t:3}],s:"Zusammenfassungstabelle anzeigen"}},hide:{t:0,b:{t:2,i:[{t:3}],s:"Zusammenfassungstabelle ausblenden"}}},seeMoreDetails:{t:0,b:{t:2,i:[{t:3}],s:"Mehr Details anzeigen"}},editEntity:{t:0,b:{t:2,i:[{t:3}],s:"Entität bearbeiten"}},markAsResolved:{t:0,b:{t:2,i:[{t:3}],s:"Als gelöst markieren"}}},successMessage:{t:0,b:{t:2,i:[{t:3}],s:"Die Konfliktwarnung wurde von der Entität entfernt."}},problem:{"400_32":{t:0,b:{t:2,i:[{t:3}],s:"Ein anderer Benutzer hat den Konflikt bereits als gelöst markiert. Bitte aktualisieren Sie, um die aktualisierten Daten zu sehen."}},"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Die Daten wurden von einem anderen Benutzer geändert. Bitte aktualisieren Sie die Seite, um die aktualisierten Daten anzuzeigen."}}}},es:{title:{t:0,b:{t:2,i:[{t:3,v:"Actualizaciones paralelas a “"},{t:4,k:"label"},{t:3,v:"”"}]}},instructions:[{t:0,b:{t:2,i:[{t:3,v:"Se realizaron actualizaciones en “"},{t:4,k:"label"},{t:3,v:"” en paralelo. Esto significa que los cambios pueden entrar en conflicto entre sí, ya que se crearon con datos más antiguos de los que finalmente aplicó Central."}]}},{t:0,b:{t:2,i:[{t:3}],s:'Revise las actualizaciones, realice las modificaciones necesarias y, si está seguro de que los datos de esta entidad son correctos, presione "Marcar como resuelto" para borrar este mensaje de advertencia.'}}],action:{table:{show:{t:0,b:{t:2,i:[{t:3}],s:"Mostrar tabla de resumen"}},hide:{t:0,b:{t:2,i:[{t:3}],s:"Ocultar tabla de resumen"}}},seeMoreDetails:{t:0,b:{t:2,i:[{t:3}],s:"Ver más detalles"}},editEntity:{t:0,b:{t:2,i:[{t:3}],s:"Editar entidad"}},markAsResolved:{t:0,b:{t:2,i:[{t:3}],s:"Marcar como resuelto"}}},successMessage:{t:0,b:{t:2,i:[{t:3}],s:"El aviso de conflicto ha sido eliminado de la Entidad."}},problem:{"400_32":{t:0,b:{t:2,i:[{t:3}],s:"Otro usuario ya ha marcado el conflicto como resuelto. Por favor, actualice para ver los datos actualizados."}},"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Los datos han sido modificados por otro usuario. Actualice para ver los datos actualizados."}}}},fr:{title:{t:0,b:{t:2,i:[{t:3,v:'Mises à jour parallèles de "'},{t:4,k:"label"},{t:3,v:'"'}]}},instructions:[{t:0,b:{t:2,i:[{t:3,v:'Des mises à jour de "'},{t:4,k:"label"},{t:3,v:'" ont été effectuées en parallèle. Cela signifie que les modifications peuvent être en conflit les unes avec les autres, car elles ont été créées sur des données plus anciennes que celles sur lesquelles Central pourrait les appliquer.'}]}},{t:0,b:{t:2,i:[{t:3}],s:`Passez en revue les mises à jour, faites les modifications nécessaires, et si vous êtes certains que les données de cette Entité sont correctes, cliquez "Marquer comme résolu" pour supprimer le message d'avertissement.`}}],action:{table:{show:{t:0,b:{t:2,i:[{t:3}],s:"Voir la table de résumé"}},hide:{t:0,b:{t:2,i:[{t:3}],s:"Cacher la table de résumé"}}},seeMoreDetails:{t:0,b:{t:2,i:[{t:3}],s:"Voir plus de détails"}},editEntity:{t:0,b:{t:2,i:[{t:3}],s:"Éditer l'Entité"}},markAsResolved:{t:0,b:{t:2,i:[{t:3}],s:"Marquer comme résolu"}}},successMessage:{t:0,b:{t:2,i:[{t:3}],s:"L'avertissement de conflit a été supprimé de l'entité."}},problem:{"400_32":{t:0,b:{t:2,i:[{t:3}],s:"Un autre utilisateur à déjà marqué ce conflit comme résolu. Merci de rafraîchir pour voir les données mises à jour."}},"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Les données ont été modifiées par un autre utilisateur. Merci de rafraîchir pour voir les données mises à jour."}}}},it:{title:{t:0,b:{t:2,i:[{t:3,v:"Aggiornamenti paralleli a “"},{t:4,k:"label"},{t:3,v:"”"}]}},instructions:[{t:0,b:{t:2,i:[{t:3,v:"Sono stati apportati aggiornamenti a “"},{t:4,k:"label"},{t:3,v:"” in parallelo. Ciò significa che le modifiche potrebbero essere in conflitto tra loro, poiché sono state create rispetto a dati più vecchi di quelli a cui sono stati applicati da Central."}]}},{t:0,b:{t:2,i:[{t:3}],s:`Rivedi gli aggiornamenti, apporta le modifiche necessarie e, se sei sicuro che i dati dell'entità siano corretti, premi "Segna come risolto" per cancellare questo messaggio di avviso.`}}],action:{table:{show:{t:0,b:{t:2,i:[{t:3}],s:"Mostra tabella di riepilogo"}},hide:{t:0,b:{t:2,i:[{t:3}],s:"Nascondi tabella di riepilogo"}}},seeMoreDetails:{t:0,b:{t:2,i:[{t:3}],s:"Vedi maggiori dettagli"}},editEntity:{t:0,b:{t:2,i:[{t:3}],s:"Modifica Entità"}},markAsResolved:{t:0,b:{t:2,i:[{t:3}],s:"Segna come risolto"}}},successMessage:{t:0,b:{t:2,i:[{t:3}],s:"L'avviso di conflitto è stato cancellato dall'Entità."}},problem:{"400_32":{t:0,b:{t:2,i:[{t:3}],s:"Un altro utente ha già segnato il conflitto come risolto. Aggiorna la pagina per vedere i dati aggiornati."}},"409_15":{t:0,b:{t:2,i:[{t:3}],s:"I dati sono stati modificati da un altro utente. Aggiornare per vedere i dati aggiornati."}}}},pt:{title:{t:0,b:{t:2,i:[{t:3,v:'Atualizações paralelas para "'},{t:4,k:"label"},{t:3,v:'"'}]}},instructions:[{t:0,b:{t:2,i:[{t:3,v:'Atualizações foram feitas para "'},{t:4,k:"label"},{t:3,v:'" em paralelo. Isso significa que as alterações podem estar em conflito entre si, pois foram criadas com base em dados mais antigos do que os que foram eventualmente aplicados pelo Central.'}]}},{t:0,b:{t:2,i:[{t:3}],s:'Revise as atualizações, faça as alterações necessárias e, se tiver certeza de que os dados desta Entidade estão corretos, pressione "Marcar como resolvido" para limpar esta mensagem de aviso.'}}],action:{table:{show:{t:0,b:{t:2,i:[{t:3}],s:"Mostrar tabela de resumo"}},hide:{t:0,b:{t:2,i:[{t:3}],s:"Ocultar tabela de resumo"}}},seeMoreDetails:{t:0,b:{t:2,i:[{t:3}],s:"Ver mais detalhes"}},editEntity:{t:0,b:{t:2,i:[{t:3}],s:"Editar Entidade"}},markAsResolved:{t:0,b:{t:2,i:[{t:3}],s:"Marcar como resolvido"}}},successMessage:{t:0,b:{t:2,i:[{t:3}],s:"O aviso de conflito foi limpo da Entidade."}},problem:{"400_32":{t:0,b:{t:2,i:[{t:3}],s:"Outro usuário já marcou o conflito como resolvido. Por favor, atualize a página para ver os dados atualizados."}},"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Os dados foram modificados por outro usuário. Por favor, atualize a página para ver os dados atualizados."}}}},sw:{title:{t:0,b:{t:2,i:[{t:3,v:"Masasisho sambamba ya “"},{t:4,k:"label"},{t:3,v:"”"}]}},instructions:[{t:0,b:{t:2,i:[{t:3,v:"Masasisho yalifanywa kwa “"},{t:4,k:"label"},{t:3,v:"” kwa sambamba. Hii inamaanisha kuwa mabadiliko yanaweza kuwa yanakinzana, kwa vile yaliandikwa dhidi ya data ya zamani kuliko yalivyotumiwa na Central."}]}},{t:0,b:{t:2,i:[{t:3}],s:"Kagua masasisho, fanya mabadiliko yoyote unayohitaji, na ikiwa una uhakika kwamba data hii ya Huluki ni sahihi bonyeza“Mark as resolved” ili kufuta ujumbe huu wa onyo."}}],action:{seeMoreDetails:{t:0,b:{t:2,i:[{t:3}],s:"Tazama maelezo zaidi"}},editEntity:{t:0,b:{t:2,i:[{t:3}],s:"Hariri Huluki"}},markAsResolved:{t:0,b:{t:2,i:[{t:3}],s:"Tia alama kuwa imesuluhishwa"}}},successMessage:{t:0,b:{t:2,i:[{t:3}],s:"Onyo la migogoro limeondolewa kwenye Shirika."}},problem:{"409_15":{t:0,b:{t:2,i:[{t:3}],s:"Data imerekebishwa na mtumiaji mwingine. Tafadhali onyesha upya ili kuona data iliyosasishwa."}}}},"zh-Hant":{title:{t:0,b:{t:2,i:[{t:3,v:"並行更新「1"},{t:4,k:"label"},{t:3,v:"」"}]}},instructions:[{t:0,b:{t:2,i:[{t:3,v:"並行更新了「1"},{t:4,k:"label"},{t:3,v:"」。這意味著更改可能會相互衝突，因為它們是根據較舊的資料編寫的，而不是 Central 最終應用的資料。"}]}},{t:0,b:{t:2,i:[{t:3}],s:"查看更新，進行所需的任何編輯，如果您確定該實體資料正確，請按「標記為已解決」以清除此警告訊息。"}}],action:{table:{show:{t:0,b:{t:2,i:[{t:3}],s:"顯示總計表"}},hide:{t:0,b:{t:2,i:[{t:3}],s:"隱藏統計表"}}},seeMoreDetails:{t:0,b:{t:2,i:[{t:3}],s:"顯示更多細節"}},editEntity:{t:0,b:{t:2,i:[{t:3}],s:"編輯實體"}},markAsResolved:{t:0,b:{t:2,i:[{t:3}],s:"標記為已解決"}}},successMessage:{t:0,b:{t:2,i:[{t:3}],s:"實體中的衝突警告已清除。"}},problem:{"400_32":{t:0,b:{t:2,i:[{t:3}],s:"另一位用戶已將衝突標記為已解決。請重新整理查看更新後的資料。"}},"409_15":{t:0,b:{t:2,i:[{t:3}],s:"資料已被另一用戶修改。請重新整理查看更新後的資料。"}}}}}})}const Oe={key:0},xe={class:"modal-introduction"},Ne={key:0},Ie={id:"entity-resolve-table-container"},Pe={id:"entity-resolve-table-toggle"},Ue=["aria-disabled"],Fe=["aria-disabled"],Le={key:1,class:"success-msg"},Ve={class:"modal-actions"},He=["aria-disabled"],it=Object.assign({name:"EntityResolve"},{__name:"resolve",props:{state:Boolean,entity:Object},emits:["hide","success"],setup(t,{emit:e}){const o=t,s=e,{project:i}=P(),n=Ut(),h=T(()=>i.dataExists&&i.permits("entity.update")),c=M("projectId"),r=M("datasetName"),k=M("alert"),{t:b}=G(),y=()=>{n.request({url:C.entityVersions(c,r,o.entity.__id,{relevantToConflict:!0}),extended:!0}).then(()=>{n.length===0&&k.danger(b("problem.400_32"))}).catch(I)},w=N(!1),_=N(null),B=()=>{w.value=!w.value,w.value&&jt(()=>{_.value.resize()})},{entityPath:K}=wt(),{request:Q,awaitingResponse:$}=Rt(),U=N(!1),z=()=>{const{entity:v}=o,m=C.entity(c,r,v.__id,{resolve:!0,baseVersion:v.__system.version});Q.patch(m,null,{problemToAlert:({code:q})=>q===400.32?b("problem.400_32"):q===409.15?b("problem.409_15"):null}).then(q=>{s("success",q.data),U.value=!0}).catch(I)};return kt(()=>o.entity,v=>{v!=null?y():(n.reset(),w.value=!1,U.value=!1)}),(v,m)=>{const q=g("router-link");return l(),S(zt,{id:"entity-resolve",state:t.state,hideable:!f($),size:"large",backdrop:"",onHide:m[2]||(m[2]=nt=>v.$emit("hide"))},{title:R(()=>[A(d(v.$t("title",t.entity)),1)]),body:R(()=>[U.value?(l(),u("div",Le,[m[8]||(m[8]=a("span",{class:"icon-check-circle success"},null,-1)),A(" "+d(v.$t("successMessage")),1)])):(l(),u("div",Oe,[a("div",xe,[a("p",null,d(v.$t("instructions[0]",t.entity)),1),h.value?(l(),u("p",Ne,d(v.$t("instructions[1]",{markAsResolved:v.$t("action.markAsResolved")})),1)):E("",!0)]),D(a("div",Ie,[p(Tt,{state:f(n).awaitingResponse},null,8,["state"]),f(n).dataExists?(l(),S(Ft,{key:0,ref_key:"table",ref:_,uuid:t.entity.__id,versions:f(n).data,"link-target":"_blank"},null,8,["uuid","versions"])):E("",!0)],512),[[V,w.value]]),a("div",Pe,[a("a",{href:"#",role:"button",onClick:Dt(B,["prevent"])},[w.value?(l(),u(j,{key:1},[m[4]||(m[4]=a("span",{class:"icon-angle-up"},null,-1)),a("span",null,d(v.$t("action.table.hide")),1)],64)):(l(),u(j,{key:0},[m[3]||(m[3]=a("span",{class:"icon-angle-down"},null,-1)),a("span",null,d(v.$t("action.table.show")),1)],64))])]),p(q,{class:J(["btn btn-default more-details",{disabled:f($)}]),to:f(K)(f(c),f(r),t.entity?.__id),target:"_blank"},{default:R(()=>[m[5]||(m[5]=a("span",{class:"icon-external-link-square"},null,-1)),A(d(v.$t("action.seeMoreDetails")),1)]),_:1,__:[5]},8,["to","class"]),h.value?(l(),u(j,{key:0},[a("button",{type:"button",class:"btn btn-default edit-entity","aria-disabled":f($),onClick:m[0]||(m[0]=nt=>v.$emit("hide",!0))},[m[6]||(m[6]=a("span",{class:"icon-pencil"},null,-1)),A(d(v.$t("action.editEntity")),1)],8,Ue),a("button",{type:"button",class:"btn btn-default mark-as-resolved","aria-disabled":f($),onClick:z},[m[7]||(m[7]=a("span",{class:"icon-check"},null,-1)),A(d(v.$t("action.markAsResolved"))+" ",1),p(L,{state:f($)},null,8,["state"])],8,Fe)],64)):E("",!0)])),a("div",Ve,[a("button",{type:"button",class:"btn btn-primary","aria-disabled":f($),onClick:m[1]||(m[1]=nt=>v.$emit("hide"))},d(v.$t("action.close")),9,He)])]),_:1},8,["state","hideable"])}}});typeof pt=="function"&&pt(it);typeof mt=="function"&&mt(it);function ft(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{noEntities:{t:0,b:{t:2,i:[{t:3}],s:"There are no Entities to show."}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"There are no matching Entities."}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"All Entities are deleted."}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"All Entities on the page have been deleted."}},alert:{delete:{t:0,b:{t:2,i:[{t:3,v:"Entity “"},{t:4,k:"label"},{t:3,v:"” has been deleted."}]}}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"Filtering is unavailable for deleted Entities"}},searchDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"Search is unavailable for deleted Entities"}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Download is unavailable for deleted Entities"}},deletedEntity:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"There are no deleted Entities."}},allRestored:{t:0,b:{t:2,i:[{t:3}],s:"All deleted Entities are restored."}},allRestoredOnPage:{t:0,b:{t:2,i:[{t:3}],s:"All Entities on the page have been restored."}}}}}})}function vt(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{cs:{noEntities:{t:0,b:{t:2,i:[{t:3}],s:"Nejsou zde žádné subjekty, které by bylo možné zobrazit."}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"Neexistují žádné odpovídající entity."}}},de:{noEntities:{t:0,b:{t:2,i:[{t:3}],s:"Es gibt keine Entitäten zum Anzeigen."}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"Es gibt keine passenden Entitäten."}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"Alle Entitäten werden gelöscht."}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Alle Entitäten auf der Seite wurden gelöscht."}},alert:{delete:{t:0,b:{t:2,i:[{t:3,v:'Die Entität "'},{t:4,k:"label"},{t:3,v:"“ wurde gelöscht."}]}}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"Filterung ist für gelöschte Entitäten nicht verfügbar"}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Der Download ist für gelöschte Entitäten nicht verfügbar"}},deletedEntity:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Es gibt keine gelöschten Entitäten."}},allRestored:{t:0,b:{t:2,i:[{t:3}],s:"Alle gelöschten Entitäten werden wiederhergestellt."}},allRestoredOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Alle Entitäten auf der Seite wurden wiederhergestellt."}}}},es:{noEntities:{t:0,b:{t:2,i:[{t:3}],s:"No hay Entidades para mostrar."}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"No hay entidades coincidentes."}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"Se eliminan todas las Entidades."}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Se han eliminado todas las Entidades de la página."}},alert:{delete:{t:0,b:{t:2,i:[{t:3,v:"Entidad “"},{t:4,k:"label"},{t:3,v:"” se ha eliminado."}]}}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"El Filtro no está disponible para Entidades eliminadas"}},searchDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"La búsqueda no está disponible para las entidades eliminadas"}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"La descarga no está disponible para Entidades eliminadas"}},deletedEntity:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"No hay entidades eliminadas."}},allRestored:{t:0,b:{t:2,i:[{t:3}],s:"Todas las Entidades eliminadas se restauran."}},allRestoredOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Se han restaurado todas las Entidades de la página."}}}},fr:{noEntities:{t:0,b:{t:2,i:[{t:3}],s:"Pas d'entités à montrer."}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"Il n'y a pas d'Entités correspondantes"}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"Toutes les Entités sont supprimées."}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Toutes les Entités de la page ont été supprimées."}},alert:{delete:{t:0,b:{t:2,i:[{t:3,v:`L'Entité "`},{t:4,k:"label"},{t:3,v:'" a été supprimée.'}]}}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"Le filtrage n'est pas disponible pour les entités supprimées."}},searchDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"La recherche n'est pas disponible pour les entités supprimées"}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Le téléchargement n'est pas disponible pour les entités supprimées."}},deletedEntity:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Il n'y a pas d'Entité supprimée."}},allRestored:{t:0,b:{t:2,i:[{t:3}],s:"Toutes les Entités supprimées ont été restaurées."}},allRestoredOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Toutes les Entités de la page ont été restaurées."}}}},it:{noEntities:{t:0,b:{t:2,i:[{t:3}],s:"Non ci sono entità da mostrare."}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"Non sono presenti Entità corrispondenti."}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"Tutte le entità vengono eliminate."}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Tutte le entità della pagina sono state eliminate."}},alert:{delete:{t:0,b:{t:2,i:[{t:3,v:"La Entità “"},{t:4,k:"label"},{t:3,v:"” è stata cancellata."}]}}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"Il filtro non è disponibile per le Entità eliminate."}},searchDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"La ricerca non è disponibile per le entità eliminate"}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Il download non è disponibile per le Entità eliminate"}},deletedEntity:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Non ci sono Entità cancellate."}},allRestored:{t:0,b:{t:2,i:[{t:3}],s:"Tutte le entità eliminate vengono ripristinate."}},allRestoredOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Tutte le entità della pagina sono state ripristinate."}}}},pt:{noEntities:{t:0,b:{t:2,i:[{t:3}],s:"Não há Entidades para mostrar."}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"Não há Entidades correspondentes."}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"Todas as Entidades foram excluídas."}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Todas as Entidades nesta página foram excluídas."}},alert:{delete:{t:0,b:{t:2,i:[{t:3,v:'A Entidade "'},{t:4,k:"label"},{t:3,v:'" foi excluída.'}]}}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"Não é possível filtrar Entidades excluídas"}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"Não é possível fazer download de Entidades excluídas"}},deletedEntity:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"Não há Entidades excluídas."}},allRestored:{t:0,b:{t:2,i:[{t:3}],s:"Todas as Entidades excluídas foram recuperadas."}},allRestoredOnPage:{t:0,b:{t:2,i:[{t:3}],s:"Todas as Entidades nesta página foram recuperadas."}}}},sw:{noEntities:{t:0,b:{t:2,i:[{t:3}],s:"Hakuna Fomu za kuonyesha."}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"Hakuna Huluki zinazolingana."}}},"zh-Hant":{noEntities:{t:0,b:{t:2,i:[{t:3}],s:"沒有可顯示的實體。"}},noMatching:{t:0,b:{t:2,i:[{t:3}],s:"無相符的實體。"}},allDeleted:{t:0,b:{t:2,i:[{t:3}],s:"所有實體都會被刪除。"}},allDeletedOnPage:{t:0,b:{t:2,i:[{t:3}],s:"頁面上的所有實體都已刪除。"}},alert:{delete:{t:0,b:{t:2,i:[{t:3,v:"實體「1"},{t:4,k:"label"},{t:3,v:"」已被刪除。"}]}}},filterDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"已刪除的實體無法使用篩選功能"}},searchDisabledMessage:{t:0,b:{t:2,i:[{t:3}],s:"已刪除的實體無法使用搜尋功能"}},downloadDisabled:{t:0,b:{t:2,i:[{t:3}],s:"已刪除的實體無法下載"}},deletedEntity:{emptyTable:{t:0,b:{t:2,i:[{t:3}],s:"沒有已刪除的實體。"}},allRestored:{t:0,b:{t:2,i:[{t:3}],s:"所有已刪除的實體都會還原。"}},allRestoredOnPage:{t:0,b:{t:2,i:[{t:3}],s:"頁面上的所有實體都已還原。"}}}}}})}const st={name:"EntityList",components:{EntityDelete:Vt,EntityDownloadButton:Y,EntityRestore:X,EntityFilters:be,EntityResolve:it,EntityTable:et,EntityUpdate:Lt,OdataLoadingMessage:Kt,Pagination:Zt,SearchTextbox:Wt,Spinner:L,TeleportIfExists:Ht},inject:["alert"],props:{projectId:{type:String,required:!0},datasetName:{type:String,required:!0},deleted:{type:Boolean,required:!1}},emits:["fetch-deleted-count"],setup(){const{dataset:t,deletedEntityCount:e,odataEntities:o}=P(),s=W({fromQuery:c=>c.conflict==="true"?[!0]:c.conflict==="false"?[!1]:[!0,!1],toQuery:c=>({conflict:c.length===2?null:c[0].toString()})}),i=W({fromQuery:c=>typeof c.search=="string"?c.search:null,toQuery:c=>({search:c||null})}),{request:n}=Rt();return{dataset:t,odataEntities:o,conflict:s,request:n,deletedEntityCount:e,pageSizeOptions:[250,500,1e3],searchTerm:i}},data(){return{refreshing:!1,updateIndex:null,update:O(),resolveIndex:null,resolve:O(),confirmDelete:!0,deleteModal:O(),confirmRestore:!0,restoreModal:O(),awaitingResponses:new Set,pagination:{page:0,size:this.pageSizeOptions[0],count:0},now:new Date().toISOString(),snapshotFilter:""}},computed:{odataFilter(){return this.conflict.length===2?null:this.conflict[0]?"__system/conflict ne null":"__system/conflict eq null"},emptyTableMessage(){return!this.odataEntities.dataExists||this.odataEntities.value.length>0?"":this.odataEntities.removedEntities.size===this.odataEntities.count&&this.odataEntities.count>0?this.deleted?this.$t("deletedEntity.allRestored"):this.$t("allDeleted"):this.odataEntities.removedEntities.size>0&&this.odataEntities.value.length===0?this.deleted?this.$t("deletedEntity.allRestoredOnPage"):this.$t("allDeletedOnPage"):this.deleted?this.$t("deletedEntity.emptyTable"):this.odataFilter?this.$t("noMatching"):this.$t("noEntities")}},watch:{deleted(){this.fetchChunk(!0)},"odataEntities.count":{handler(){this.dataset.dataExists&&this.odataEntities.dataExists&&!this.odataFilter&&!this.deleted&&!this.searchTerm&&(this.dataset.entities=this.odataEntities.count)}},"odataEntities.removedEntities.size":{handler(t){this.dataset.dataExists&&this.odataEntities.dataExists&&!this.odataFilter&&!this.deleted&&!this.searchTerm&&(this.dataset.entities=this.odataEntities.count-t)}}},created(){this.fetchChunk(!0),this.$watch(()=>[this.odataFilter,this.searchTerm],()=>this.fetchChunk(!0))},methods:{fetchChunk(t,e=!1){this.refreshing=e;const o=t||e;o&&(this.now=new Date().toISOString(),this.setSnapshotFilter(),this.pagination.page=0);let s=this.snapshotFilter;this.odataFilter&&(s+=` and ${this.odataFilter}`);const i=this.searchTerm?this.searchTerm:void 0;this.odataEntities.request({url:C.odataEntities(this.projectId,this.datasetName,{$top:this.pagination.size,$skip:this.pagination.page*this.pagination.size,$count:!0,$search:i,$filter:s,$orderby:"__system/createdAt desc"}),clear:t,patch:o?null:n=>this.odataEntities.replaceData(n.data,n.config)}).then(()=>{this.pagination.count=this.odataEntities.count,this.deleted&&(this.deletedEntityCount.cancelRequest(),this.deletedEntityCount.dataExists||(this.deletedEntityCount.data=F({})),this.deletedEntityCount.value=this.odataEntities.count)}).finally(()=>{this.refreshing=!1}).catch(I),e&&!this.deleted&&this.$emit("fetch-deleted-count")},setSnapshotFilter(){this.snapshotFilter="",this.deleted?this.snapshotFilter+=`__system/deletedAt le ${this.now}`:(this.snapshotFilter+=`__system/createdAt le ${this.now} and `,this.snapshotFilter+=`(__system/deletedAt eq null or __system/deletedAt gt ${this.now})`)},reset(){this.odataFilter==null&&!this.searchTerm?this.fetchChunk(!0):(this.conflict=[!0,!1],this.searchTerm="")},showUpdate(t){if(this.refreshing)return;this.updateIndex=t;const e=this.odataEntities.value[t];this.update.show({entity:qt(e,this.dataset.properties)})},hideUpdate(){this.update.hide(),this.updateIndex=null,this.resolveIndex!=null&&this.showResolve(this.resolveIndex)},afterUpdate(t){const e=this.updateIndex;this.hideUpdate(),this.alert.success(this.$t("alert.updateEntity"));const o=this.odataEntities.value[e],s=Object.assign(Object.create(null),{__id:o.__id,label:t.currentVersion.label,__system:{...o.__system,version:t.currentVersion.version,updates:o.__system.updates+1,updatedAt:t.updatedAt}}),{data:i}=t.currentVersion;for(const{name:n,odataName:h}of this.dataset.properties)s[h]=i[n];this.odataEntities.value[e]=s,this.resolveIndex==null?this.$refs.table.afterUpdate(e):this.showResolve(this.resolveIndex)},showResolve(t){this.refreshing||(this.resolveIndex=t,this.resolve.show({entity:this.odataEntities.value[t]}))},hideResolve(t){t?(this.resolve.hide(!1),this.$nextTick(()=>this.showUpdate(this.resolveIndex))):(this.resolve.hide(),this.resolveIndex=null)},afterResolve(t){const e=Object.create(null);Object.assign(e,this.odataEntities.value[this.resolveIndex]),e.__system={...e.__system,conflict:null,updatedAt:t.updatedAt},this.odataEntities.value[this.resolveIndex]=e,this.$refs.table.afterUpdate(this.resolveIndex)},showDelete(t){this.confirmDelete?this.deleteModal.show({entity:t}):this.requestDelete([t,this.confirmDelete])},requestDelete(t){const[{__id:e,label:o},s]=t;this.awaitingResponses.add(e),this.request({method:"DELETE",url:C.entity(this.projectId,this.datasetName,e)}).then(()=>{this.deleteModal.hide(),this.deletedEntityCount.dataExists&&(this.deletedEntityCount.value+=1),this.alert.success(this.$t("alert.entityDeleted",{label:o})),s!=null&&(this.confirmDelete=s),this.odataEntities.removedEntities.add(e);const i=this.odataEntities.dataExists?this.odataEntities.value.findIndex(n=>n.__id===e):-1;i!==-1&&(this.$refs.table.afterDelete(i),this.odataEntities.value.splice(i,1))}).catch(I).finally(()=>{this.awaitingResponses.delete(e)})},showRestore(t){this.confirmRestore?this.restoreModal.show({entity:t}):this.requestRestore([t,this.confirmRestore])},requestRestore(t){const[{__id:e,label:o},s]=t;this.awaitingResponses.add(e),this.request({method:"POST",url:C.entityRestore(this.projectId,this.datasetName,e)}).then(()=>{this.restoreModal.hide(),this.deletedEntityCount.dataExists&&this.deletedEntityCount.value>0&&(this.deletedEntityCount.value-=1),this.alert.success(this.$t("alert.entityRestored",{label:o})),s!=null&&(this.confirmRestore=s),this.odataEntities.removedEntities.add(e);const i=this.odataEntities.dataExists?this.odataEntities.value.findIndex(n=>n.__id===e):-1;i!==-1&&(this.$refs.table.afterDelete(i),this.odataEntities.value.splice(i,1))}).catch(I).finally(()=>{this.awaitingResponses.delete(e)})},handlePageChange(){this.odataEntities.count<this.pageSizeOptions[0]||this.fetchChunk(!1)}}},Be={id:"entity-list"},Ke={id:"entity-list-actions",class:"table-actions-bar"},Qe=["aria-disabled"];function Ze(t,e,o,s,i,n){const h=g("search-textbox"),c=g("entity-filters"),r=g("spinner"),k=g("entity-download-button"),b=g("teleport-if-exists"),y=g("entity-table"),w=g("odata-loading-message"),_=g("pagination"),B=g("entity-update"),K=g("entity-resolve"),Q=g("entity-delete"),$=g("entity-restore"),U=H("tooltip");return l(),u("div",Be,[a("div",Ke,[a("form",{class:"form-inline",onSubmit:e[2]||(e[2]=Dt(()=>{},["prevent"]))},[p(h,{modelValue:s.searchTerm,"onUpdate:modelValue":e[0]||(e[0]=z=>s.searchTerm=z),label:t.$t("common.search"),"hide-label":!0,disabled:o.deleted,"disabled-message":o.deleted?t.$t("searchDisabledMessage"):null},null,8,["modelValue","label","disabled","disabled-message"]),p(c,{conflict:s.conflict,"onUpdate:conflict":e[1]||(e[1]=z=>s.conflict=z),disabled:o.deleted,"disabled-message":o.deleted?t.$t("filterDisabledMessage"):null},null,8,["conflict","disabled","disabled-message"])],32),a("button",{id:"entity-list-refresh-button",type:"button",class:"btn btn-outlined","aria-disabled":i.refreshing,onClick:e[3]||(e[3]=z=>n.fetchChunk(!1,!0))},[e[9]||(e[9]=a("span",{class:"icon-refresh"},null,-1)),A(d(t.$t("action.refresh"))+" ",1),p(r,{state:i.refreshing},null,8,["state"])],8,Qe),s.odataEntities.dataExists?(l(),S(b,{key:0,to:".dataset-entities-heading-row"},{default:R(()=>[D(p(k,{"odata-filter":o.deleted?null:n.odataFilter,disabled:o.deleted},null,8,["odata-filter","disabled"]),[[U,o.deleted?t.$t("downloadDisabled"):null,void 0,{"aria-describedby":!0}]])]),_:1})):E("",!0)]),D(p(y,{ref:"table",properties:s.dataset.properties,deleted:o.deleted,"awaiting-deleted-responses":i.awaitingResponses,onUpdate:n.showUpdate,onResolve:n.showResolve,onDelete:n.showDelete,onRestore:n.showRestore},null,8,["properties","deleted","awaiting-deleted-responses","onUpdate","onResolve","onDelete","onRestore"]),[[V,s.odataEntities.dataExists]]),D(a("p",{class:"empty-table-message"},d(n.emptyTableMessage),513),[[V,n.emptyTableMessage]]),p(w,{type:"entity",top:i.pagination.size,odata:s.odataEntities,filter:n.odataFilter!=null||!!s.searchTerm,refreshing:i.refreshing,"total-count":s.dataset.dataExists?s.dataset.entities:0},null,8,["top","odata","filter","refreshing","total-count"]),i.pagination.count>0?(l(),S(_,{key:0,page:i.pagination.page,"onUpdate:page":[e[4]||(e[4]=z=>i.pagination.page=z),e[6]||(e[6]=z=>n.handlePageChange())],size:i.pagination.size,"onUpdate:size":e[5]||(e[5]=z=>i.pagination.size=z),count:i.pagination.count,"size-options":s.pageSizeOptions,spinner:s.odataEntities.awaitingResponse},null,8,["page","size","count","size-options","spinner"])):E("",!0),p(B,x(i.update,{onHide:n.hideUpdate,onSuccess:n.afterUpdate}),null,16,["onHide","onSuccess"]),p(K,x(i.resolve,{onHide:n.hideResolve,onSuccess:n.afterResolve}),null,16,["onHide","onSuccess"]),p(Q,x(i.deleteModal,{checkbox:"","awaiting-response":i.deleteModal.state&&i.awaitingResponses.has(i.deleteModal.entity.__id),onHide:e[7]||(e[7]=z=>i.deleteModal.hide()),onDelete:n.requestDelete}),null,16,["awaiting-response","onDelete"]),p($,x(i.restoreModal,{checkbox:"","awaiting-response":i.restoreModal.state&&i.awaitingResponses.has(i.restoreModal.entity.__id),onHide:e[8]||(e[8]=z=>i.restoreModal.hide()),onRestore:n.requestRestore}),null,16,["awaiting-response","onRestore"])])}typeof ft=="function"&&ft(st);typeof vt=="function"&&vt(st);const We=At(st,[["render",Ze]]),gt=(t,e)=>{const{searchParams:o}=new URL(e.url,window.location.origin),s=o.get("$skip")??0,i=t["@odata.count"];return t.value.map((n,h)=>({...n,__system:{...n.__system,rowNumber:i-s-h}}))},Ge=()=>{const{createResource:t}=P(),e=t("odataEntities",()=>({transformResponse:({data:s,config:i})=>Ot({value:F(gt(s,i)),count:s["@odata.count"],removedEntities:F(new Set)}),replaceData(s,i){e.count=s["@odata.count"],e.value=F(gt({...s,value:s.value.filter(n=>!e.removedEntities.has(n.__id))},i))}})),o=t("deletedEntityCount",()=>({transformResponse:({data:s})=>F({value:s["@odata.count"]})}));return{odataEntities:e,deletedEntityCount:o}};function yt(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{en:{upload:{t:0,b:{t:2,i:[{t:3}],s:"Upload Entities"}},alert:{upload:{t:0,b:{t:2,i:[{t:3}],s:"Your Entities have been successfully uploaded."}}},purgeDescription:{t:0,b:{t:2,i:[{t:3}],s:"Entities are deleted after 30 days in the Trash"}},action:{toggleDeletedEntities:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" deleted Entity"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" deleted Entities"}]}]}}},analyzeDisabledDeletedData:{t:0,b:{t:2,i:[{t:3}],s:"OData access is unavailable for deleted Entities"}}}}})}function Et(t){const e=t;e.__i18n=e.__i18n||[],e.__i18n.push({locale:"",resource:{de:{upload:{t:0,b:{t:2,i:[{t:3}],s:"Entitäten hochladen"}},purgeDescription:{t:0,b:{t:2,i:[{t:3}],s:"Entitäten werden nach 30 Tagen im Papierkorb gelöscht"}},action:{toggleDeletedEntities:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" gelöscht Entität"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" gelöschte Entitäten"}]}]}}},analyzeDisabledDeletedData:{t:0,b:{t:2,i:[{t:3}],s:"Der OData-Zugriff ist für gelöschte Entitäten nicht verfügbar"}}},es:{upload:{t:0,b:{t:2,i:[{t:3}],s:"Subir entidades"}},alert:{upload:{t:0,b:{t:2,i:[{t:3}],s:"Sus Entidades han sido cargadas con éxito."}}},purgeDescription:{t:0,b:{t:2,i:[{t:3}],s:"Las Entidades se eliminan después de 30 días en la Papelera"}},action:{toggleDeletedEntities:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" Entidad eliminada"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" Entidades eliminadas"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" Entidades eliminadas"}]}]}}},analyzeDisabledDeletedData:{t:0,b:{t:2,i:[{t:3}],s:"El acceso OData no está disponible para Entidades eliminadas"}}},fr:{upload:{t:0,b:{t:2,i:[{t:3}],s:"Téléverser des entités"}},alert:{upload:{t:0,b:{t:2,i:[{t:3}],s:"Vos Entités ont été téléversées."}}},purgeDescription:{t:0,b:{t:2,i:[{t:3}],s:"Les entités sont supprimées après 30 jours passés dans la corbeille."}},action:{toggleDeletedEntities:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" entité supprimée."}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" Entités supprimées."}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" Entités supprimées."}]}]}}},analyzeDisabledDeletedData:{t:0,b:{t:2,i:[{t:3}],s:"L'accès OData n'est pas disponible pour les entités supprimées"}}},it:{upload:{t:0,b:{t:2,i:[{t:3}],s:"Caricare Entità"}},alert:{upload:{t:0,b:{t:2,i:[{t:3}],s:"Le entità sono state caricate con successo."}}},purgeDescription:{t:0,b:{t:2,i:[{t:3}],s:"Le Entità vengono eliminate dopo 30 giorni nel Cestino"}},action:{toggleDeletedEntities:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" Entità cancellata"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" Entità cancellate"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" Entità cancellate"}]}]}}},analyzeDisabledDeletedData:{t:0,b:{t:2,i:[{t:3}],s:"L'accesso OData non è disponibile per gli Entità cancellate"}}},pt:{upload:{t:0,b:{t:2,i:[{t:3}],s:"Carregar Entidades"}},purgeDescription:{t:0,b:{t:2,i:[{t:3}],s:"Entidades são excluídas após 30 dias na Lixeira"}},action:{toggleDeletedEntities:{t:0,b:{t:1,c:[{t:2,i:[{t:4,k:"count"},{t:3,v:" Entidade excluída"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" Entidades excluídas"}]},{t:2,i:[{t:4,k:"count"},{t:3,v:" Entidades excluídas"}]}]}}},analyzeDisabledDeletedData:{t:0,b:{t:2,i:[{t:3}],s:"O acesso OData não está disponível para Entidades excluídas"}}},"zh-Hant":{upload:{t:0,b:{t:2,i:[{t:3}],s:"上傳實體"}},alert:{upload:{t:0,b:{t:2,i:[{t:3}],s:"您的實體已成功上傳。"}}},purgeDescription:{t:0,b:{t:2,i:[{t:3}],s:"實體將在 30 天後從垃圾箱中刪除"}},action:{toggleDeletedEntities:{t:0,b:{t:2,i:[{t:4,k:"count"},{t:3,v:" 個已刪除的實體"}]}}},analyzeDisabledDeletedData:{t:0,b:{t:2,i:[{t:3}],s:"已刪除實體的 OData 存取不可用"}}}}})}const at={name:"DatasetEntities",components:{OdataAnalyze:Jt,OdataDataAccess:Gt,EntityList:We,EntityUpload:xt(Pt("EntityUpload")),PageSection:Yt},inject:["alert"],provide(){return{projectId:this.projectId,datasetName:this.datasetName}},props:{projectId:{type:String,required:!0},datasetName:{type:String,required:!0}},setup(){const{project:t,dataset:e}=P(),{deletedEntityCount:o}=Ge(),s=Nt(),i=W({fromQuery:h=>typeof h.deleted=="string"&&h.deleted==="true",toQuery:h=>({deleted:h===!0?"true":null})}),n=T(()=>t.dataExists&&t.permits("entity.delete"));return It(()=>{i.value&&t.dataExists&&!n.value&&s.push("/")}),{project:t,dataset:e,deletedEntityCount:o,deleted:i,canDelete:n}},data(){return{upload:O("EntityUpload"),analyze:O()}},computed:{odataUrl(){const t=C.odataEntitiesSvc(this.projectId,this.datasetName);return`${window.location.origin}${t}`}},created(){this.deleted||this.fetchDeletedCount()},methods:{afterUpload(t){this.upload.hide(),this.alert.success(this.$t("alert.upload")),this.$refs.list.reset(),this.dataset.entities+=t},fetchDeletedCount(){this.deletedEntityCount.request({method:"GET",url:C.odataEntities(this.projectId,this.datasetName,{$top:0,$count:!0,$filter:"__system/deletedAt ne null"})}).catch(I)},toggleDeleted(){const{path:t}=this.$route;this.$router.push(this.deleted?t:`${t}?deleted=true`)}}},Je={id:"dataset-entities"},Ye={class:"dataset-entities-heading-row"},Xe={class:"icon-close"};function ti(t,e,o,s,i,n){const h=g("odata-data-access"),c=g("entity-list"),r=g("page-section"),k=g("entity-upload"),b=g("odata-analyze");return l(),u("div",Je,[p(r,null,{heading:R(()=>[a("div",Ye,[s.project.dataExists&&s.project.permits("entity.create")?(l(),u("button",{key:0,id:"dataset-entities-upload-button",type:"button",class:"btn btn-primary",onClick:e[0]||(e[0]=y=>i.upload.show())},[e[5]||(e[5]=a("span",{class:"icon-upload"},null,-1)),A(d(t.$t("upload")),1)])):E("",!0),s.deletedEntityCount.dataExists?(l(),u(j,{key:1},[s.canDelete&&(s.deletedEntityCount.value>0||s.deleted)?(l(),u("button",{key:0,type:"button",class:J(["btn toggle-deleted-entities",{"btn-danger":s.deleted,"btn-link":!s.deleted}]),onClick:e[1]||(e[1]=(...y)=>n.toggleDeleted&&n.toggleDeleted(...y))},[e[6]||(e[6]=a("span",{class:"icon-trash"},null,-1)),A(d(t.$tcn("action.toggleDeletedEntities",s.deletedEntityCount.value))+" ",1),D(a("span",Xe,null,512),[[V,s.deleted]])],2)):E("",!0)],64)):E("",!0),D(a("p",{class:"purge-description"},d(t.$t("purgeDescription")),513),[[V,s.deleted]]),p(h,{"analyze-disabled":s.deleted,"analyze-disabled-message":t.$t("analyzeDisabledDeletedData"),onAnalyze:e[2]||(e[2]=y=>i.analyze.show())},null,8,["analyze-disabled","analyze-disabled-message"])])]),body:R(()=>[p(c,{ref:"list","project-id":o.projectId,"dataset-name":o.datasetName,deleted:s.deleted,onFetchDeletedCount:n.fetchDeletedCount},null,8,["project-id","dataset-name","deleted","onFetchDeletedCount"])]),_:1}),s.dataset.dataExists?(l(),S(k,x({key:0},i.upload,{onHide:e[3]||(e[3]=y=>i.upload.hide()),onSuccess:n.afterUpload}),null,16,["onSuccess"])):E("",!0),p(b,x(i.analyze,{"odata-url":n.odataUrl,onHide:e[4]||(e[4]=y=>i.analyze.hide())}),null,16,["odata-url"])])}typeof yt=="function"&&yt(at);typeof Et=="function"&&Et(at);const mi=At(at,[["render",ti]]);export{mi as default};
